{"version":3,"file":"parcoords.mjs","sources":["../src/util/renderQueue.js","../src/util/width.js","../src/brush/1d/brushExtents.js","../src/brush/1d/brushReset.js","../src/brush/1d/selected.js","../src/brush/1d/brushFor.js","../src/brush/1d/install.js","../src/brush/1d/uninstall.js","../src/brush/1d/index.js","../src/brush/1d-multi/drawBrushes.js","../src/brush/1d-multi/selected.js","../src/brush/1d-multi/newBrush.js","../src/brush/1d-multi/brushExtents.js","../src/brush/1d-multi/brushReset.js","../src/brush/1d-multi/brushFor.js","../src/brush/1d-multi/install.js","../src/brush/1d-multi/uninstall.js","../src/brush/1d-multi/index.js","../src/brush/strums/uninstall.js","../src/brush/strums/selected.js","../src/brush/strums/removeStrum.js","../src/brush/strums/onDragEnd.js","../src/brush/strums/onDrag.js","../src/util/height.js","../src/brush/dimensionsForPoint.js","../src/brush/strums/onDragStart.js","../src/brush/strums/brushReset.js","../src/brush/consecutive.js","../src/brush/strums/install.js","../src/brush/strums/index.js","../src/brush/angular/uninstall.js","../src/brush/angular/util/hypothenuse.js","../src/brush/angular/selected.js","../src/brush/angular/removeStrum.js","../src/brush/angular/onDragEnd.js","../src/brush/angular/onDrag.js","../src/brush/angular/onDragStart.js","../src/brush/angular/brushReset.js","../src/brush/angular/install.js","../src/brush/angular/index.js","../src/api/intersection.js","../src/api/mergeParcoords.js","../src/api/selected.js","../src/api/brushMode.js","../src/util/dimensionLabels.js","../src/util/flipAxisAndUpdatePCP.js","../src/util/rotateLabels.js","../src/api/updateAxes.js","../src/util/getRange.js","../src/api/autoscale.js","../src/api/brushable.js","../src/api/commonScale.js","../src/api/computeRealCentroids.js","../src/api/applyDimensionDefaults.js","../src/api/createAxes.js","../src/api/axisDots.js","../src/api/applyAxisConfig.js","../src/api/reorderable.js","../src/api/resize.js","../src/api/reorder.js","../src/api/sortDimensions.js","../src/api/sortDimensionsByRowData.js","../src/util/isBrushed.js","../src/api/clear.js","../src/util/computeCentroids.js","../src/util/computeControlPoints.js","../src/util/colorPath.js","../src/util/functor.js","../src/api/renderBrushed.js","../src/api/brushReset.js","../src/api/toType.js","../src/api/toString.js","../src/api/adjacentPairs.js","../src/api/highlight.js","../src/api/unhighlight.js","../src/api/removeAxes.js","../src/api/render.js","../src/api/renderDefault.js","../src/api/toTypeCoerceNumbers.js","../src/api/detectDimensionTypes.js","../src/api/getOrderedDimensionKeys.js","../src/api/interactive.js","../src/api/shadows.js","../src/api/init.js","../src/api/flip.js","../src/api/detectDimensions.js","../src/api/scale.js","../src/state/defaultConfig.js","../src/state/index.js","../src/util/computeClusterCentroids.js","../src/state/sideEffects.js","../src/util/getset.js","../src/bindEvents.js","../src/index.js"],"sourcesContent":["import 'requestanimationframe';\n\nconst renderQueue = function(func) {\n  let _queue = [], // data to be rendered\n    _rate = 1000, // number of calls per frame\n    _invalidate = function() {}, // invalidate last render queue\n    _clear = function() {}; // clearing function\n\n  let rq = function(data) {\n    if (data) rq.data(data);\n    _invalidate();\n    _clear();\n    rq.render();\n  };\n\n  rq.render = function() {\n    let valid = true;\n    _invalidate = rq.invalidate = function() {\n      valid = false;\n    };\n\n    function doFrame() {\n      if (!valid) return true;\n      let chunk = _queue.splice(0, _rate);\n      chunk.map(func);\n      requestAnimationFrame(doFrame);\n    }\n\n    doFrame();\n  };\n\n  rq.data = function(data) {\n    _invalidate();\n    _queue = data.slice(0); // creates a copy of the data\n    return rq;\n  };\n\n  rq.add = function(data) {\n    _queue = _queue.concat(data);\n  };\n\n  rq.rate = function(value) {\n    if (!arguments.length) return _rate;\n    _rate = value;\n    return rq;\n  };\n\n  rq.remaining = function() {\n    return _queue.length;\n  };\n\n  // clear the canvas\n  rq.clear = function(func) {\n    if (!arguments.length) {\n      _clear();\n      return rq;\n    }\n    _clear = func;\n    return rq;\n  };\n\n  rq.invalidate = _invalidate;\n\n  return rq;\n};\n\nexport default renderQueue;\n","const w = config => config.width - config.margin.right - config.margin.left;\n\nexport default w;\n","import { select } from 'd3-selection';\nimport { brushSelection } from 'd3-brush';\n\nconst brushExtents = (state, config, pc) => extents => {\n  const { brushes, brushNodes } = state;\n\n  if (typeof extents === 'undefined') {\n    return Object.keys(config.dimensions).reduce((acc, cur) => {\n      const brush = brushes[cur];\n      //todo: brush check\n      if (brush !== undefined && brushSelection(brushNodes[cur]) !== null) {\n        acc[cur] = brush.extent();\n      }\n\n      return acc;\n    }, {});\n  } else {\n    //first get all the brush selections\n    const brushSelections = {};\n    pc\n      .g()\n      .selectAll('.brush')\n      .each(function(d) {\n        brushSelections[d] = select(this);\n      });\n\n    // loop over each dimension and update appropriately (if it was passed in through extents)\n    Object.keys(config.dimensions).forEach(d => {\n      if (extents[d] === undefined) {\n        return;\n      }\n\n      const brush = brushes[d];\n      if (brush !== undefined) {\n        const dim = config.dimensions[d];\n        const yExtent = extents[d].map(dim.yscale);\n\n        //update the extent\n        //sets the brushable extent to the specified array of points [[x0, y0], [x1, y1]]\n        brush.extent([[-15, yExtent[1]], [15, yExtent[0]]]);\n\n        //redraw the brush\n        //https://github.com/d3/d3-brush#brush_move\n        // For an x-brush, it must be defined as [x0, x1]; for a y-brush, it must be defined as [y0, y1].\n        brushSelections[d].call(brush).call(brush.move, yExtent.reverse());\n\n        //fire some events\n        // brush.event(brushSelections[d]);\n      }\n    });\n\n    //redraw the chart\n    pc.renderBrushed();\n\n    return pc;\n  }\n};\n\nexport default brushExtents;\n","import { select } from 'd3-selection';\n\nconst brushReset = (state, config, pc) => dimension => {\n  const { brushes } = state;\n\n  if (dimension === undefined) {\n    config.brushed = false;\n    if (pc.g() !== undefined && pc.g() !== null) {\n      pc\n        .g()\n        .selectAll('.brush')\n        .each(function(d) {\n          select(this).call(brushes[d].move, null);\n        });\n      pc.renderBrushed();\n    }\n  } else {\n    if (pc.g() !== undefined && pc.g() !== null) {\n      pc\n        .g()\n        .selectAll('.brush')\n        .each(function(d) {\n          if (d !== dimension) return;\n          select(this).call(brushes[d].move, null);\n          brushes[d].event(select(this));\n        });\n      pc.renderBrushed();\n    }\n  }\n  return this;\n};\n\nexport default brushReset;\n","import { brushSelection } from 'd3-brush';\n//https://github.com/d3/d3-brush/issues/10\n\n// data within extents\nconst selected = (state, config, brushGroup) => () => {\n  const { brushNodes } = state;\n  const is_brushed = p => brushSelection(brushNodes[p]) !== null;\n\n  const actives = Object.keys(config.dimensions).filter(is_brushed);\n  const extents = actives.map(p => {\n    const _brushRange = brushSelection(brushNodes[p]);\n\n    if (typeof config.dimensions[p].yscale.invert === 'function') {\n      return [\n        config.dimensions[p].yscale.invert(_brushRange[1]),\n        config.dimensions[p].yscale.invert(_brushRange[0]),\n      ];\n    } else {\n      return _brushRange;\n    }\n  });\n  // We don't want to return the full data set when there are no axes brushed.\n  // Actually, when there are no axes brushed, by definition, no items are\n  // selected. So, let's avoid the filtering and just return false.\n  //if (actives.length === 0) return false;\n\n  // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n  if (actives.length === 0) return config.data;\n\n  // test if within range\n  const within = {\n    date: (d, p, dimension) => {\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        return (\n          extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n          config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n        );\n      } else {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      }\n    },\n    number: (d, p, dimension) => {\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        return (\n          extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n          config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n        );\n      } else {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      }\n    },\n    string: (d, p, dimension) => {\n      return (\n        extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n        config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n      );\n    },\n  };\n\n  return config.data.filter(d => {\n    switch (brushGroup.predicate) {\n      case 'AND':\n        return actives.every(function(p, dimension) {\n          return within[config.dimensions[p].type](d, p, dimension);\n        });\n      case 'OR':\n        return actives.some(function(p, dimension) {\n          return within[config.dimensions[p].type](d, p, dimension);\n        });\n      default:\n        throw new Error('Unknown brush predicate ' + config.brushPredicate);\n    }\n  });\n};\n\nexport default selected;\n","import { brushY } from 'd3-brush';\nimport { event } from 'd3-selection';\n\nimport selected from './selected';\n\nconst brushUpdated = (config, pc, events) => newSelection => {\n  config.brushed = newSelection;\n  events.call('brush', pc, config.brushed);\n  pc.renderBrushed();\n};\n\nconst brushFor = (state, config, pc, events, brushGroup) => (\n  axis,\n  _selector\n) => {\n  const brushRangeMax =\n    config.dimensions[axis].type === 'string'\n      ? config.dimensions[axis].yscale.range()[\n          config.dimensions[axis].yscale.range().length - 1\n        ]\n      : config.dimensions[axis].yscale.range()[0];\n\n  const _brush = brushY(_selector).extent([[-15, 0], [15, brushRangeMax]]);\n\n  _brush\n    .on('start', function() {\n      if (event.sourceEvent !== null) {\n        events.call('brushstart', pc, config.brushed);\n        event.sourceEvent.stopPropagation();\n      }\n    })\n    .on('brush', function() {\n      brushUpdated(config, pc, events)(selected(state, config, brushGroup)());\n    })\n    .on('end', function() {\n      brushUpdated(config, pc, events)(selected(state, config, brushGroup)());\n      events.call('brushend', pc, config.brushed);\n    });\n\n  state.brushes[axis] = _brush;\n  state.brushNodes[axis] = _selector.node();\n\n  return _brush;\n};\n\nexport default brushFor;\n","import { select } from 'd3-selection';\nimport brushExtents from './brushExtents';\nimport brushReset from './brushReset';\nimport brushFor from './brushFor';\n\nconst install = (state, config, pc, events, brushGroup) => () => {\n  if (!pc.g()) {\n    pc.createAxes();\n  }\n\n  // Add and store a brush for each axis.\n  const brush = pc\n    .g()\n    .append('svg:g')\n    .attr('class', 'brush')\n    .each(function(d) {\n      select(this).call(\n        brushFor(state, config, pc, events, brushGroup)(d, select(this))\n      );\n    });\n  brush\n    .selectAll('rect')\n    .style('visibility', null)\n    .attr('x', -15)\n    .attr('width', 30);\n\n  brush.selectAll('rect.background').style('fill', 'transparent');\n\n  brush\n    .selectAll('rect.extent')\n    .style('fill', 'rgba(255,255,255,0.25)')\n    .style('stroke', 'rgba(0,0,0,0.6)');\n\n  brush.selectAll('.resize rect').style('fill', 'rgba(0,0,0,0.1)');\n\n  pc.brushExtents = brushExtents(state, config, pc);\n  pc.brushReset = brushReset(state, config, pc);\n  return pc;\n};\n\nexport default install;\n","const uninstall = (state, pc) => () => {\n  if (pc.g() !== undefined && pc.g() !== null)\n    pc\n      .g()\n      .selectAll('.brush')\n      .remove();\n\n  state.brushes = {};\n  delete pc.brushExtents;\n  delete pc.brushReset;\n};\n\nexport default uninstall;\n","import brushExtents from './brushExtents';\nimport install from './install';\nimport selected from './selected';\nimport uninstall from './uninstall';\n\nconst BrushState = {\n  brushes: {},\n  brushNodes: {},\n};\n\nconst install1DAxes = (brushGroup, config, pc, events) => {\n  const state = Object.assign({}, BrushState);\n\n  brushGroup.modes['1D-axes'] = {\n    install: install(state, config, pc, events, brushGroup),\n    uninstall: uninstall(state, pc),\n    selected: selected(state, config, brushGroup),\n    brushState: brushExtents(state, config, pc),\n  };\n};\n\nexport default install1DAxes;\n","import { select } from 'd3-selection';\n\nconst drawBrushes = (brushes, config, pc, axis, selector) => {\n  const brushSelection = selector.selectAll('.brush').data(brushes, d => d.id);\n\n  brushSelection\n    .enter()\n    .insert('g', '.brush')\n    .attr('class', 'brush')\n    .attr('dimension', axis)\n    .attr(\n      'id',\n      b => 'brush-' + Object.keys(config.dimensions).indexOf(axis) + '-' + b.id\n    )\n    .each(function(brushObject) {\n      brushObject.brush(select(this));\n    });\n\n  brushSelection.each(function(brushObject) {\n    select(this)\n      .attr('class', 'brush')\n      .selectAll('.overlay')\n      .style('pointer-events', function() {\n        const brush = brushObject.brush;\n        if (brushObject.id === brushes.length - 1 && brush !== undefined) {\n          return 'all';\n        } else {\n          return 'none';\n        }\n      });\n  });\n\n  brushSelection.exit().remove();\n};\n\nexport default drawBrushes;\n","import { brushSelection } from 'd3-brush';\n\n// data within extents\nconst selected = (state, config, pc, events, brushGroup) => {\n  const { brushes } = state;\n\n  const is_brushed = (p, pos) => {\n    const axisBrushes = brushes[p];\n\n    for (let i = 0; i < axisBrushes.length; i++) {\n      const brush = document.getElementById('brush-' + pos + '-' + i);\n\n      if (brushSelection(brush) !== null) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const actives = Object.keys(config.dimensions).filter(is_brushed);\n  const extents = actives.map(p => {\n    const axisBrushes = brushes[p];\n\n    return axisBrushes\n      .map((d, i) =>\n        brushSelection(\n          document.getElementById(\n            'brush-' + Object.keys(config.dimensions).indexOf(p) + '-' + i\n          )\n        )\n      )\n      .map((d, i) => {\n        if (d === null || d === undefined) {\n          return null;\n        } else if (typeof config.dimensions[p].yscale.invert === 'function') {\n          return [\n            config.dimensions[p].yscale.invert(d[1]),\n            config.dimensions[p].yscale.invert(d[0]),\n          ];\n        } else {\n          return d;\n        }\n      });\n  });\n\n  // We don't want to return the full data set when there are no axes brushed.\n  // Actually, when there are no axes brushed, by definition, no items are\n  // selected. So, let's avoid the filtering and just return false.\n  //if (actives.length === 0) return false;\n\n  // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n  if (actives.length === 0) return config.data;\n\n  // test if within range\n  const within = {\n    date: (d, p, i) => {\n      const dimExt = extents[i];\n\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        for (const e of dimExt) {\n          if (e === null || e === undefined) {\n            continue;\n          }\n\n          if (\n            e[0] <= config.dimensions[p].yscale(d[p]) &&\n            config.dimensions[p].yscale(d[p]) <= e[1]\n          ) {\n            return true;\n          }\n        }\n\n        return false;\n      } else {\n        for (const e of dimExt) {\n          if (e === null || e === undefined) {\n            continue;\n          }\n\n          if (e[0] <= d[p] && d[p] <= e[1]) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n    },\n    number: (d, p, i) => {\n      const dimExt = extents[i];\n\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        for (const e of dimExt) {\n          if (e === null || e === undefined) {\n            continue;\n          }\n\n          if (\n            e[0] <= config.dimensions[p].yscale(d[p]) &&\n            config.dimensions[p].yscale(d[p]) <= e[1]\n          ) {\n            return true;\n          }\n        }\n\n        return false;\n      } else {\n        for (const e of dimExt) {\n          if (e === null || e === undefined) {\n            continue;\n          }\n\n          if (e[0] <= d[p] && d[p] <= e[1]) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n    },\n    string: (d, p, i) => {\n      const dimExt = extents[i];\n\n      for (const e of dimExt) {\n        if (e === null || e === undefined) {\n          continue;\n        }\n\n        if (\n          e[0] <= config.dimensions[p].yscale(d[p]) &&\n          config.dimensions[p].yscale(d[p]) <= e[1]\n        ) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n  };\n\n  return config.data.filter(d => {\n    switch (brushGroup.predicate) {\n      case 'AND':\n        return actives.every((p, i) =>\n          within[config.dimensions[p].type](d, p, i)\n        );\n      case 'OR':\n        return actives.some((p, i) =>\n          within[config.dimensions[p].type](d, p, i)\n        );\n      default:\n        throw new Error('Unknown brush predicate ' + config.brushPredicate);\n    }\n  });\n};\n\nexport default selected;\n","import { brushY, brushSelection } from 'd3-brush';\nimport { event, select } from 'd3-selection';\nimport drawBrushes from './drawBrushes';\nimport selected from './selected';\n\nconst brushUpdated = (config, pc, events) => newSelection => {\n  config.brushed = newSelection;\n  events.call('brush', pc, config.brushed);\n  pc.renderBrushed();\n};\n\nconst newBrush = (state, config, pc, events, brushGroup) => (\n  axis,\n  _selector\n) => {\n  const { brushes, brushNodes } = state;\n\n  const brushRangeMax =\n    config.dimensions[axis].type === 'string'\n      ? config.dimensions[axis].yscale.range()[\n          config.dimensions[axis].yscale.range().length - 1\n        ]\n      : config.dimensions[axis].yscale.range()[0];\n\n  const brush = brushY().extent([[-15, 0], [15, brushRangeMax]]);\n\n  if (brushes[axis]) {\n    brushes[axis].push({\n      id: brushes[axis].length,\n      brush,\n      node: _selector.node(),\n    });\n  } else {\n    brushes[axis] = [{ id: 0, brush, node: _selector.node() }];\n  }\n\n  if (brushNodes[axis]) {\n    brushNodes[axis].push({ id: brushes.length, node: _selector.node() });\n  } else {\n    brushNodes[axis] = [{ id: 0, node: _selector.node() }];\n  }\n\n  brush\n    .on('start', function() {\n      if (event.sourceEvent !== null) {\n        events.call('brushstart', pc, config.brushed);\n        event.sourceEvent.stopPropagation();\n      }\n    })\n    .on('brush', function() {\n      // record selections\n      brushUpdated(\n        config,\n        pc,\n        events\n      )(selected(state, config, pc, events, brushGroup));\n    })\n    .on('end', function() {\n      // Figure out if our latest brush has a selection\n      const lastBrushID = brushes[axis][brushes[axis].length - 1].id;\n      const lastBrush = document.getElementById(\n        'brush-' +\n          Object.keys(config.dimensions).indexOf(axis) +\n          '-' +\n          lastBrushID\n      );\n      const selection = brushSelection(lastBrush);\n\n      // If it does, that means we need another one\n      if (selection && selection[0] !== selection[1]) {\n        newBrush(state, config, pc, events, brushGroup)(axis, _selector);\n      }\n\n      // Always draw brushes\n      drawBrushes(brushes[axis], config, pc, axis, _selector);\n\n      brushUpdated(\n        config,\n        pc,\n        events\n      )(selected(state, config, pc, events, brushGroup));\n      events.call('brushend', pc, config.brushed);\n    });\n\n  return brush;\n};\n\nexport default newBrush;\n","import { select } from 'd3-selection';\nimport { brushSelection } from 'd3-brush';\nimport newBrush from './newBrush';\nimport drawBrushes from './drawBrushes';\n\n/**\n *\n * extents are in format of [[2,6], [3,5]]\n *\n * * @param state\n * @param config\n * @param pc\n * @returns {Function}\n */\nconst brushExtents = (state, config, pc, events, brushGroup) => extents => {\n  const { brushes } = state;\n\n  if (typeof extents === 'undefined') {\n    return Object.keys(config.dimensions).reduce((acc, cur, pos) => {\n      const axisBrushes = brushes[cur];\n\n      if (axisBrushes === undefined || axisBrushes === null) {\n        acc[cur] = [];\n      } else {\n        acc[cur] = axisBrushes.reduce((d, p, i) => {\n          const range = brushSelection(\n            document.getElementById('brush-' + pos + '-' + i)\n          );\n          if (range !== null) {\n            d = d.push(range);\n          }\n\n          return d;\n        }, []);\n      }\n\n      return acc;\n    }, {});\n  } else {\n    // //first get all the brush selections\n    // loop over each dimension and update appropriately (if it was passed in through extents)\n    Object.keys(config.dimensions).forEach((d, pos) => {\n      if (extents[d] === undefined || extents[d] === null) {\n        return;\n      }\n\n      const dim = config.dimensions[d];\n\n      const yExtents = extents[d].map(e => e.map(dim.yscale));\n\n      const _bs = yExtents.map((e, j) => {\n        const _brush = newBrush(state, config, pc, events, brushGroup)(\n          d,\n          select('#brush-group-' + pos)\n        );\n        //update the extent\n        //sets the brushable extent to the specified array of points [[x0, y0], [x1, y1]]\n        _brush.extent([[-15, e[1]], [15, e[0]]]);\n\n        return {\n          id: j,\n          brush: _brush,\n          ext: e,\n        };\n      });\n\n      brushes[d] = _bs;\n\n      drawBrushes(_bs, config, pc, d, select('#brush-group-' + pos));\n\n      //redraw the brush\n      //https://github.com/d3/d3-brush#brush_move\n      // For an x-brush, it must be defined as [x0, x1]; for a y-brush, it must be defined as [y0, y1].\n      _bs.forEach((f, k) => {\n        select('#brush-' + pos + '-' + k)\n          .call(f.brush)\n          .call(f.brush.move, f.ext.reverse());\n      });\n    });\n\n    //redraw the chart\n    pc.renderBrushed();\n\n    return pc;\n  }\n};\n\nexport default brushExtents;\n","import { select } from 'd3-selection';\nimport { brushSelection } from 'd3-brush';\n\nconst brushReset = (state, config, pc) => dimension => {\n  const { brushes } = state;\n\n  if (dimension === undefined) {\n    config.brushed = false;\n    if (pc.g() !== undefined && pc.g() !== null) {\n      Object.keys(config.dimensions).forEach((d, pos) => {\n        const axisBrush = brushes[d];\n\n        axisBrush.forEach((e, i) => {\n          const brush = document.getElementById('brush-' + pos + '-' + i);\n          if (brushSelection(brush) !== null) {\n            pc\n              .g()\n              .select('#brush-' + pos + '-' + i)\n              .call(e.brush.move, null);\n          }\n        });\n      });\n\n      pc.renderBrushed();\n    }\n  } else {\n    if (pc.g() !== undefined && pc.g() !== null) {\n      const axisBrush = brushes[dimension];\n      const pos = Object.keys(config.dimensions).indexOf(dimension);\n\n      axisBrush.forEach((e, i) => {\n        const brush = document.getElementById('brush-' + pos + '-' + i);\n        if (brushSelection(brush) !== null) {\n          pc\n            .g()\n            .select('#brush-' + pos + '-' + i)\n            .call(e.brush.move, null);\n          e.event(select('#brush-' + pos + '-' + i));\n        }\n      });\n\n      pc.renderBrushed();\n    }\n  }\n  return this;\n};\n\nexport default brushReset;\n","import newBrush from './newBrush';\nimport drawBrushes from './drawBrushes';\n\nconst brushFor = (state, config, pc, events, brushGroup) => (\n  axis,\n  _selector\n) => {\n  const { brushes } = state;\n  newBrush(state, config, pc, events, brushGroup)(axis, _selector);\n  drawBrushes(brushes[axis], config, pc, axis, _selector);\n};\n\nexport default brushFor;\n","import { select } from 'd3-selection';\nimport brushExtents from './brushExtents';\nimport brushReset from './brushReset';\nimport brushFor from './brushFor';\n\nconst install = (state, config, pc, events, brushGroup) => () => {\n  if (!pc.g()) {\n    pc.createAxes();\n  }\n\n  pc\n    .g()\n    .append('svg:g')\n    .attr('id', (d, i) => 'brush-group-' + i)\n    .attr('class', 'brush-group')\n    .attr('dimension', d => d)\n    .each(function(d) {\n      brushFor(state, config, pc, events, brushGroup)(d, select(this));\n    });\n\n  pc.brushExtents = brushExtents(state, config, pc, events, brushGroup);\n  pc.brushReset = brushReset(state, config, pc);\n  return pc;\n};\n\nexport default install;\n","const uninstall = (state, pc) => () => {\n  if (pc.g() !== undefined && pc.g() !== null)\n    pc\n      .g()\n      .selectAll('.brush-group')\n      .remove();\n\n  state.brushes = {};\n  delete pc.brushExtents;\n  delete pc.brushReset;\n};\n\nexport default uninstall;\n","import brushExtents from './brushExtents';\nimport install from './install';\nimport selected from './selected';\nimport uninstall from './uninstall';\n\nconst BrushState = {\n  brushes: {},\n  brushNodes: {},\n};\n\nconst install1DMultiAxes = (brushGroup, config, pc, events) => {\n  const state = Object.assign({}, BrushState);\n\n  brushGroup.modes['1D-axes-multi'] = {\n    install: install(state, config, pc, events, brushGroup),\n    uninstall: uninstall(state, pc),\n    selected: selected(state, config, brushGroup),\n    brushState: brushExtents(state, config, pc),\n  };\n};\n\nexport default install1DMultiAxes;\n","const uninstall = (state, pc) => () => {\n  pc.selection\n    .select('svg')\n    .select('g#strums')\n    .remove();\n  pc.selection\n    .select('svg')\n    .select('rect#strum-events')\n    .remove();\n  pc.on('axesreorder.strums', undefined);\n  delete pc.brushReset;\n\n  state.strumRect = undefined;\n};\n\nexport default uninstall;\n","// test if point falls between lines\nconst containmentTest = (strum, width) => p => {\n  const p1 = [strum.p1[0] - strum.minX, strum.p1[1] - strum.minX],\n    p2 = [strum.p2[0] - strum.minX, strum.p2[1] - strum.minX],\n    m1 = 1 - width / p1[0],\n    b1 = p1[1] * (1 - m1),\n    m2 = 1 - width / p2[0],\n    b2 = p2[1] * (1 - m2);\n\n  const x = p[0],\n    y = p[1],\n    y1 = m1 * x + b1,\n    y2 = m2 * x + b2;\n\n  return y > Math.min(y1, y2) && y < Math.max(y1, y2);\n};\n\nconst crossesStrum = (state, config) => (d, id) => {\n  let strum = state.strums[id],\n    test = containmentTest(strum, state.strums.width(id)),\n    d1 = strum.dims.left,\n    d2 = strum.dims.right,\n    y1 = config.dimensions[d1].yscale,\n    y2 = config.dimensions[d2].yscale,\n    point = [y1(d[d1]) - strum.minX, y2(d[d2]) - strum.minX];\n  return test(point);\n};\n\nconst selected = (brushGroup, state, config) => {\n  // Get the ids of the currently active strums.\n  const ids = Object.getOwnPropertyNames(state.strums).filter(d => !isNaN(d)),\n    brushed = config.data;\n\n  if (ids.length === 0) {\n    return brushed;\n  }\n\n  const crossTest = crossesStrum(state, config);\n\n  return brushed.filter(d => {\n    switch (brushGroup.predicate) {\n      case 'AND':\n        return ids.every(id => crossTest(d, id));\n      case 'OR':\n        return ids.some(id => crossTest(d, id));\n      default:\n        throw new Error('Unknown brush predicate ' + config.brushPredicate);\n    }\n  });\n};\n\nexport default selected;\n","const removeStrum = (state, pc) => {\n  const strum = state.strums[state.strums.active],\n    svg = pc.selection.select('svg').select('g#strums');\n\n  delete state.strums[state.strums.active];\n  svg.selectAll('line#strum-' + strum.dims.i).remove();\n  svg.selectAll('circle#strum-' + strum.dims.i).remove();\n};\n\nexport default removeStrum;\n","import selected from './selected';\nimport removeStrum from './removeStrum';\n\nconst onDragEnd = (brushGroup, state, config, pc, events) => () => {\n  const strum = state.strums[state.strums.active];\n\n  // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n  // considered a drag without move. So we have to deal with that case\n  if (strum && strum.p1[0] === strum.p2[0] && strum.p1[1] === strum.p2[1]) {\n    removeStrum(state, pc);\n  }\n\n  const brushed = selected(brushGroup, state, config);\n  state.strums.active = undefined;\n  config.brushed = brushed;\n  pc.renderBrushed();\n  events.call('brushend', pc, config.brushed);\n};\n\nexport default onDragEnd;\n","import { event, select } from 'd3-selection';\nimport { drag } from 'd3-drag';\nimport onDragEnd from './onDragEnd';\n\nconst drawStrum = (\n  brushGroup,\n  state,\n  config,\n  pc,\n  events,\n  strum,\n  activePoint\n) => {\n  let _svg = pc.selection.select('svg').select('g#strums'),\n    id = strum.dims.i,\n    points = [strum.p1, strum.p2],\n    _line = _svg.selectAll('line#strum-' + id).data([strum]),\n    circles = _svg.selectAll('circle#strum-' + id).data(points),\n    _drag = drag();\n\n  _line\n    .enter()\n    .append('line')\n    .attr('id', 'strum-' + id)\n    .attr('class', 'strum');\n\n  _line\n    .attr('x1', d => d.p1[0])\n    .attr('y1', d => d.p1[1])\n    .attr('x2', d => d.p2[0])\n    .attr('y2', d => d.p2[1])\n    .attr('stroke', 'black')\n    .attr('stroke-width', 2);\n\n  _drag\n    .on('drag', function(d, i) {\n      const ev = event;\n      i = i + 1;\n      strum['p' + i][0] = Math.min(Math.max(strum.minX + 1, ev.x), strum.maxX);\n      strum['p' + i][1] = Math.min(Math.max(strum.minY, ev.y), strum.maxY);\n      drawStrum(brushGroup, state, config, pc, events, strum, i - 1);\n    })\n    .on('end', onDragEnd(brushGroup, state, config, pc, events));\n\n  circles\n    .enter()\n    .append('circle')\n    .attr('id', 'strum-' + id)\n    .attr('class', 'strum');\n\n  circles\n    .attr('cx', d => d[0])\n    .attr('cy', d => d[1])\n    .attr('r', 5)\n    .style(\n      'opacity',\n      (d, i) => (activePoint !== undefined && i === activePoint ? 0.8 : 0)\n    )\n    .on('mouseover', function() {\n      select(this).style('opacity', 0.8);\n    })\n    .on('mouseout', function() {\n      select(this).style('opacity', 0);\n    })\n    .call(_drag);\n};\n\nconst onDrag = (brushGroup, state, config, pc, events) => () => {\n  const ev = event,\n    strum = state.strums[state.strums.active];\n\n  // Make sure that the point is within the bounds\n  strum.p2[0] = Math.min(\n    Math.max(strum.minX + 1, ev.x - config.margin.left),\n    strum.maxX\n  );\n  strum.p2[1] = Math.min(\n    Math.max(strum.minY, ev.y - config.margin.top),\n    strum.maxY\n  );\n\n  drawStrum(brushGroup, state, config, pc, events, strum, 1);\n};\n\nexport default onDrag;\n","const h = config => config.height - config.margin.top - config.margin.bottom;\n\nexport default h;\n","const dimensionsForPoint = (config, pc, xscale, p) => {\n  const dims = { i: -1, left: undefined, right: undefined };\n  Object.keys(config.dimensions).some((dim, i) => {\n    if (xscale(dim) < p[0]) {\n      dims.i = i;\n      dims.left = dim;\n      dims.right = Object.keys(config.dimensions)[\n        pc.getOrderedDimensionKeys().indexOf(dim) + 1\n      ];\n      return false;\n    }\n    return true;\n  });\n\n  if (dims.left === undefined) {\n    // Event on the left side of the first axis.\n    dims.i = 0;\n    dims.left = pc.getOrderedDimensionKeys()[0];\n    dims.right = pc.getOrderedDimensionKeys()[1];\n  } else if (dims.right === undefined) {\n    // Event on the right side of the last axis\n    dims.i = Object.keys(config.dimensions).length - 1;\n    dims.right = dims.left;\n    dims.left = pc.getOrderedDimensionKeys()[\n      Object.keys(config.dimensions).length - 2\n    ];\n  }\n\n  return dims;\n};\n\nexport default dimensionsForPoint;\n","import { mouse } from 'd3-selection';\nimport h from '../../util/height';\nimport dimensionsForPoint from '../dimensionsForPoint';\n\n// First we need to determine between which two axes the sturm was started.\n// This will determine the freedom of movement, because a strum can\n// logically only happen between two axes, so no movement outside these axes\n// should be allowed.\nconst onDragStart = (state, config, pc, xscale) => () => {\n  let p = mouse(state.strumRect.node());\n\n  p[0] = p[0] - config.margin.left;\n  p[1] = p[1] - config.margin.top;\n\n  const dims = dimensionsForPoint(config, pc, xscale, p);\n  const strum = {\n    p1: p,\n    dims: dims,\n    minX: xscale(dims.left),\n    maxX: xscale(dims.right),\n    minY: 0,\n    maxY: h(config),\n  };\n\n  // Make sure that the point is within the bounds\n  strum.p1[0] = Math.min(Math.max(strum.minX, p[0]), strum.maxX);\n  strum.p2 = strum.p1.slice();\n\n  state.strums[dims.i] = strum;\n  state.strums.active = dims.i;\n};\n\nexport default onDragStart;\n","import onDragEnd from './onDragEnd';\nimport removeStrum from './removeStrum';\n\nconst brushReset = (brushGroup, state, config, pc, events) => () => {\n  const ids = Object.getOwnPropertyNames(state.strums).filter(d => !isNaN(d));\n\n  ids.forEach(d => {\n    state.strums.active = d;\n    removeStrum(state, pc);\n  });\n  onDragEnd(brushGroup, state, config, pc, events)();\n};\n\nexport default brushReset;\n","// Checks if the first dimension is directly left of the second dimension.\nconst consecutive = dimensions => (first, second) => {\n  const keys = Object.keys(dimensions);\n\n  return keys.some(\n    (d, i) =>\n      d === first ? i + i < keys.length && dimensions[i + 1] === second : false\n  );\n};\n\nexport default consecutive;\n","import { drag } from 'd3-drag';\nimport onDragEnd from './onDragEnd';\nimport onDrag from './onDrag';\nimport onDragStart from './onDragStart';\nimport removeStrum from './removeStrum';\nimport brushReset from './brushReset';\nimport w from '../../util/width';\nimport h from '../../util/height';\nimport consecutive from '../consecutive';\n\nconst install = (brushGroup, state, config, pc, events, xscale) => () => {\n  if (pc.g() === undefined || pc.g() === null) {\n    pc.createAxes();\n  }\n\n  const _drag = drag();\n\n  // Map of current strums. Strums are stored per segment of the PC. A segment,\n  // being the area between two axes. The left most area is indexed at 0.\n  state.strums.active = undefined;\n  // Returns the width of the PC segment where currently a strum is being\n  // placed. NOTE: even though they are evenly spaced in our current\n  // implementation, we keep for when non-even spaced segments are supported as\n  // well.\n  state.strums.width = id =>\n    state.strums[id] === undefined\n      ? undefined\n      : state.strums[id].maxX - state.strums[id].minX;\n\n  pc.on('axesreorder.strums', () => {\n    const ids = Object.getOwnPropertyNames(state.strums).filter(d => !isNaN(d));\n\n    if (ids.length > 0) {\n      // We have some strums, which might need to be removed.\n      ids.forEach(d => {\n        const dims = state.strums[d].dims;\n        state.strums.active = d;\n        // If the two dimensions of the current strum are not next to each other\n        // any more, than we'll need to remove the strum. Otherwise we keep it.\n        if (!consecutive(config.dimensions)(dims.left, dims.right)) {\n          removeStrum(state, pc);\n        }\n      });\n      onDragEnd(brushGroup, state, config, pc, events)();\n    }\n  });\n\n  // Add a new svg group in which we draw the strums.\n  pc.selection\n    .select('svg')\n    .append('g')\n    .attr('id', 'strums')\n    .attr(\n      'transform',\n      'translate(' + config.margin.left + ',' + config.margin.top + ')'\n    );\n\n  // Install the required brushReset function\n  pc.brushReset = brushReset(brushGroup, state, config, pc, events);\n\n  _drag\n    .on('start', onDragStart(state, config, pc, xscale))\n    .on('drag', onDrag(brushGroup, state, config, pc, events))\n    .on('end', onDragEnd(brushGroup, state, config, pc, events));\n\n  // NOTE: The styling needs to be done here and not in the css. This is because\n  //       for 1D brushing, the canvas layers should not listen to\n  //       pointer-events._.\n  state.strumRect = pc.selection\n    .select('svg')\n    .insert('rect', 'g#strums')\n    .attr('id', 'strum-events')\n    .attr('x', config.margin.left)\n    .attr('y', config.margin.top)\n    .attr('width', w(config))\n    .attr('height', h(config) + 2)\n    .style('opacity', 0)\n    .call(_drag);\n};\n\nexport default install;\n","import uninstall from './uninstall';\nimport install from './install';\nimport selected from './selected';\n\nconst BrushState = {\n  strums: {},\n  strumRect: {},\n};\n\nconst install2DStrums = (brushGroup, config, pc, events, xscale) => {\n  const state = Object.assign({}, BrushState);\n\n  brushGroup.modes['2D-strums'] = {\n    install: install(brushGroup, state, config, pc, events, xscale),\n    uninstall: uninstall(state, pc),\n    selected: selected(brushGroup, state, config),\n    brushState: () => state.strums,\n  };\n};\n\nexport default install2DStrums;\n","const uninstall = (state, pc) => () => {\n  pc.selection\n    .select('svg')\n    .select('g#arcs')\n    .remove();\n  pc.selection\n    .select('svg')\n    .select('rect#arc-events')\n    .remove();\n  pc.on('axesreorder.arcs', undefined);\n\n  delete pc.brushReset;\n\n  state.strumRect = undefined;\n};\n\nexport default uninstall;\n","const hypothenuse = (a, b) => Math.sqrt(a * a + b * b);\n\nexport default hypothenuse;\n","import hypothenuse from './util/hypothenuse';\n\n// [0, 2*PI] -> [-PI/2, PI/2]\nconst signedAngle = angle =>\n  angle > Math.PI ? 1.5 * Math.PI - angle : 0.5 * Math.PI - angle;\n\n/**\n * angles are stored in radians from in [0, 2*PI], where 0 in 12 o'clock.\n * However, one can only select lines from 0 to PI, so we compute the\n * 'signed' angle, where 0 is the horizontal line (3 o'clock), and +/- PI/2\n * are 12 and 6 o'clock respectively.\n */\nconst containmentTest = arc => a => {\n  let startAngle = signedAngle(arc.startAngle);\n  let endAngle = signedAngle(arc.endAngle);\n\n  if (startAngle > endAngle) {\n    const tmp = startAngle;\n    startAngle = endAngle;\n    endAngle = tmp;\n  }\n\n  // test if segment angle is contained in angle interval\n  return a >= startAngle && a <= endAngle;\n};\n\nconst crossesStrum = (state, config) => (d, id) => {\n  const arc = state.arcs[id],\n    test = containmentTest(arc),\n    d1 = arc.dims.left,\n    d2 = arc.dims.right,\n    y1 = config.dimensions[d1].yscale,\n    y2 = config.dimensions[d2].yscale,\n    a = state.arcs.width(id),\n    b = y1(d[d1]) - y2(d[d2]),\n    c = hypothenuse(a, b),\n    angle = Math.asin(b / c); // rad in [-PI/2, PI/2]\n  return test(angle);\n};\n\nconst selected = (brushGroup, state, config) => {\n  const ids = Object.getOwnPropertyNames(state.arcs).filter(d => !isNaN(d));\n  const brushed = config.data;\n\n  if (ids.length === 0) {\n    return brushed;\n  }\n\n  const crossTest = crossesStrum(state, config);\n\n  return brushed.filter(d => {\n    switch (brushGroup.predicate) {\n      case 'AND':\n        return ids.every(id => crossTest(d, id));\n      case 'OR':\n        return ids.some(id => crossTest(d, id));\n      default:\n        throw new Error('Unknown brush predicate ' + config.brushPredicate);\n    }\n  });\n};\n\nexport default selected;\n","const removeStrum = (state, pc) => {\n  const arc = state.arcs[state.arcs.active],\n    svg = pc.selection.select('svg').select('g#arcs');\n\n  delete state.arcs[state.arcs.active];\n  state.arcs.active = undefined;\n  svg.selectAll('line#arc-' + arc.dims.i).remove();\n  svg.selectAll('circle#arc-' + arc.dims.i).remove();\n  svg.selectAll('path#arc-' + arc.dims.i).remove();\n};\n\nexport default removeStrum;\n","import selected from './selected';\nimport removeStrum from './removeStrum';\n\nconst onDragEnd = (brushGroup, state, config, pc, events) => () => {\n  const arc = state.arcs[state.arcs.active];\n\n  // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n  // considered a drag without move. So we have to deal with that case\n  if (arc && arc.p1[0] === arc.p2[0] && arc.p1[1] === arc.p2[1]) {\n    removeStrum(state, pc);\n  }\n\n  if (arc) {\n    const angle = state.arcs.startAngle(state.arcs.active);\n\n    arc.startAngle = angle;\n    arc.endAngle = angle;\n    arc.arc\n      .outerRadius(state.arcs.length(state.arcs.active))\n      .startAngle(angle)\n      .endAngle(angle);\n  }\n\n  state.arcs.active = undefined;\n  config.brushed = selected(brushGroup, state, config);\n  pc.renderBrushed();\n  events.call('brushend', pc, config.brushed);\n};\n\nexport default onDragEnd;\n","import { event, select } from 'd3-selection';\nimport { drag } from 'd3-drag';\nimport onDragEnd from './onDragEnd';\n\nconst drawStrum = (brushGroup, state, config, pc, events, arc, activePoint) => {\n  const svg = pc.selection.select('svg').select('g#arcs'),\n    id = arc.dims.i,\n    points = [arc.p2, arc.p3],\n    _line = svg\n      .selectAll('line#arc-' + id)\n      .data([{ p1: arc.p1, p2: arc.p2 }, { p1: arc.p1, p2: arc.p3 }]),\n    circles = svg.selectAll('circle#arc-' + id).data(points),\n    _drag = drag(),\n    _path = svg.selectAll('path#arc-' + id).data([arc]);\n\n  _path\n    .enter()\n    .append('path')\n    .attr('id', 'arc-' + id)\n    .attr('class', 'arc')\n    .style('fill', 'orange')\n    .style('opacity', 0.5);\n\n  _path\n    .attr('d', arc.arc)\n    .attr('transform', 'translate(' + arc.p1[0] + ',' + arc.p1[1] + ')');\n\n  _line\n    .enter()\n    .append('line')\n    .attr('id', 'arc-' + id)\n    .attr('class', 'arc');\n\n  _line\n    .attr('x1', d => d.p1[0])\n    .attr('y1', d => d.p1[1])\n    .attr('x2', d => d.p2[0])\n    .attr('y2', d => d.p2[1])\n    .attr('stroke', 'black')\n    .attr('stroke-width', 2);\n\n  _drag\n    .on('drag', (d, i) => {\n      const ev = event;\n      i = i + 2;\n\n      arc['p' + i][0] = Math.min(Math.max(arc.minX + 1, ev.x), arc.maxX);\n      arc['p' + i][1] = Math.min(Math.max(arc.minY, ev.y), arc.maxY);\n\n      const angle =\n        i === 3 ? state.arcs.startAngle(id) : state.arcs.endAngle(id);\n\n      if (\n        (arc.startAngle < Math.PI &&\n          arc.endAngle < Math.PI &&\n          angle < Math.PI) ||\n        (arc.startAngle >= Math.PI &&\n          arc.endAngle >= Math.PI &&\n          angle >= Math.PI)\n      ) {\n        if (i === 2) {\n          arc.endAngle = angle;\n          arc.arc.endAngle(angle);\n        } else if (i === 3) {\n          arc.startAngle = angle;\n          arc.arc.startAngle(angle);\n        }\n      }\n\n      drawStrum(brushGroup, state, config, pc, events, arc, i - 2);\n    })\n    .on('end', onDragEnd(brushGroup, state, config, pc, events));\n\n  circles\n    .enter()\n    .append('circle')\n    .attr('id', 'arc-' + id)\n    .attr('class', 'arc');\n\n  circles\n    .attr('cx', d => d[0])\n    .attr('cy', d => d[1])\n    .attr('r', 5)\n    .style(\n      'opacity',\n      (d, i) => (activePoint !== undefined && i === activePoint ? 0.8 : 0)\n    )\n    .on('mouseover', function() {\n      select(this).style('opacity', 0.8);\n    })\n    .on('mouseout', function() {\n      select(this).style('opacity', 0);\n    })\n    .call(_drag);\n};\n\nconst onDrag = (brushGroup, state, config, pc, events) => () => {\n  const ev = event,\n    arc = state.arcs[state.arcs.active];\n\n  // Make sure that the point is within the bounds\n  arc.p2[0] = Math.min(\n    Math.max(arc.minX + 1, ev.x - config.margin.left),\n    arc.maxX\n  );\n  arc.p2[1] = Math.min(Math.max(arc.minY, ev.y - config.margin.top), arc.maxY);\n  arc.p3 = arc.p2.slice();\n  drawStrum(brushGroup, state, config, pc, events, arc, 1);\n};\n\nexport default onDrag;\n","import { mouse } from 'd3-selection';\nimport { arc as d3Arc } from 'd3-shape';\nimport dimensionsForPoint from '../dimensionsForPoint';\nimport h from '../../util/height';\n\n// First we need to determine between which two axes the arc was started.\n// This will determine the freedom of movement, because a arc can\n// logically only happen between two axes, so no movement outside these axes\n// should be allowed.\nconst onDragStart = (state, config, pc, xscale) => () => {\n  const p = mouse(state.strumRect.node());\n\n  p[0] = p[0] - config.margin.left;\n  p[1] = p[1] - config.margin.top;\n\n  const dims = dimensionsForPoint(config, pc, xscale, p);\n  const arc = {\n    p1: p,\n    dims: dims,\n    minX: xscale(dims.left),\n    maxX: xscale(dims.right),\n    minY: 0,\n    maxY: h(config),\n    startAngle: undefined,\n    endAngle: undefined,\n    arc: d3Arc().innerRadius(0),\n  };\n\n  // Make sure that the point is within the bounds\n  arc.p1[0] = Math.min(Math.max(arc.minX, p[0]), arc.maxX);\n  arc.p2 = arc.p1.slice();\n  arc.p3 = arc.p1.slice();\n\n  state.arcs[dims.i] = arc;\n  state.arcs.active = dims.i;\n};\n\nexport default onDragStart;\n","import onDragEnd from './onDragEnd';\nimport removeStrum from './removeStrum';\n\nconst brushReset = (brushGroup, state, config, pc, events) => () => {\n  const ids = Object.getOwnPropertyNames(state.arcs).filter(d => !isNaN(d));\n\n  ids.forEach(d => {\n    state.arcs.active = d;\n    removeStrum(state, pc);\n  });\n  onDragEnd(brushGroup, state, config, pc, events)();\n};\n\nexport default brushReset;\n","import { drag } from 'd3-drag';\nimport onDragEnd from './onDragEnd';\nimport onDrag from './onDrag';\nimport onDragStart from './onDragStart';\nimport removeStrum from './removeStrum';\nimport brushReset from './brushReset';\nimport w from '../../util/width';\nimport h from '../../util/height';\n\nimport hypothenuse from './util/hypothenuse';\nimport consecutive from '../consecutive';\n\n// returns angles in [-PI/2, PI/2]\nconst angle = (p1, p2) => {\n  const a = p1[0] - p2[0],\n    b = p1[1] - p2[1],\n    c = hypothenuse(a, b);\n\n  return Math.asin(b / c);\n};\n\nconst endAngle = state => id => {\n  const arc = state.arcs[id];\n  if (arc === undefined) {\n    return undefined;\n  }\n  let sAngle = angle(arc.p1, arc.p2),\n    uAngle = -sAngle + Math.PI / 2;\n\n  if (arc.p1[0] > arc.p2[0]) {\n    uAngle = 2 * Math.PI - uAngle;\n  }\n\n  return uAngle;\n};\n\nconst startAngle = state => id => {\n  const arc = state.arcs[id];\n  if (arc === undefined) {\n    return undefined;\n  }\n\n  let sAngle = angle(arc.p1, arc.p3),\n    uAngle = -sAngle + Math.PI / 2;\n\n  if (arc.p1[0] > arc.p3[0]) {\n    uAngle = 2 * Math.PI - uAngle;\n  }\n\n  return uAngle;\n};\n\nconst length = state => id => {\n  const arc = state.arcs[id];\n\n  if (arc === undefined) {\n    return undefined;\n  }\n\n  const a = arc.p1[0] - arc.p2[0],\n    b = arc.p1[1] - arc.p2[1];\n\n  return hypothenuse(a, b);\n};\n\nconst install = (brushGroup, state, config, pc, events, xscale) => () => {\n  if (!pc.g()) {\n    pc.createAxes();\n  }\n\n  const _drag = drag();\n\n  // Map of current arcs. arcs are stored per segment of the PC. A segment,\n  // being the area between two axes. The left most area is indexed at 0.\n  state.arcs.active = undefined;\n  // Returns the width of the PC segment where currently a arc is being\n  // placed. NOTE: even though they are evenly spaced in our current\n  // implementation, we keep for when non-even spaced segments are supported as\n  // well.\n  state.arcs.width = id => {\n    const arc = state.arcs[id];\n    return arc === undefined ? undefined : arc.maxX - arc.minX;\n  };\n\n  // returns angles in [0, 2 * PI]\n  state.arcs.endAngle = endAngle(state);\n  state.arcs.startAngle = startAngle(state);\n  state.arcs.length = length(state);\n\n  pc.on('axesreorder.arcs', () => {\n    const ids = Object.getOwnPropertyNames(arcs).filter(d => !isNaN(d));\n\n    if (ids.length > 0) {\n      // We have some arcs, which might need to be removed.\n      ids.forEach(d => {\n        const dims = arcs[d].dims;\n        state.arcs.active = d;\n        // If the two dimensions of the current arc are not next to each other\n        // any more, than we'll need to remove the arc. Otherwise we keep it.\n        if (!consecutive(dims)(dims.left, dims.right)) {\n          removeStrum(state, pc);\n        }\n      });\n      onDragEnd(brushGroup, state, config, pc, events)();\n    }\n  });\n\n  // Add a new svg group in which we draw the arcs.\n  pc.selection\n    .select('svg')\n    .append('g')\n    .attr('id', 'arcs')\n    .attr(\n      'transform',\n      'translate(' + config.margin.left + ',' + config.margin.top + ')'\n    );\n\n  // Install the required brushReset function\n  pc.brushReset = brushReset(brushGroup, state, config, pc, events);\n\n  _drag\n    .on('start', onDragStart(state, config, pc, xscale))\n    .on('drag', onDrag(brushGroup, state, config, pc, events))\n    .on('end', onDragEnd(brushGroup, state, config, pc, events));\n\n  // NOTE: The styling needs to be done here and not in the css. This is because\n  //       for 1D brushing, the canvas layers should not listen to\n  //       pointer-events._.\n  state.strumRect = pc.selection\n    .select('svg')\n    .insert('rect', 'g#arcs')\n    .attr('id', 'arc-events')\n    .attr('x', config.margin.left)\n    .attr('y', config.margin.top)\n    .attr('width', w(config))\n    .attr('height', h(config) + 2)\n    .style('opacity', 0)\n    .call(_drag);\n};\n\nexport default install;\n","import uninstall from './uninstall';\nimport install from './install';\nimport selected from './selected';\n\nconst BrushState = {\n  arcs: {},\n  strumRect: {},\n};\n\nconst installAngularBrush = (brushGroup, config, pc, events, xscale) => {\n  const state = Object.assign({}, BrushState);\n\n  brushGroup.modes['angular'] = {\n    install: install(brushGroup, state, config, pc, events, xscale),\n    uninstall: uninstall(state, pc),\n    selected: selected(brushGroup, state, config),\n    brushState: () => state.arcs,\n  };\n};\n\nexport default installAngularBrush;\n","// calculate 2d intersection of line a->b with line c->d\n// points are objects with x and y properties\nconst intersection = (a, b, c, d) => {\n  return {\n    x:\n      ((a.x * b.y - a.y * b.x) * (c.x - d.x) -\n        (a.x - b.x) * (c.x * d.y - c.y * d.x)) /\n      ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n    y:\n      ((a.x * b.y - a.y * b.x) * (c.y - d.y) -\n        (a.y - b.y) * (c.x * d.y - c.y * d.x)) /\n      ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n  };\n};\n\nexport default intersection;\n","// Merges the canvases and SVG elements into one canvas element which is then passed into the callback\n// (so you can choose to save it to disk, etc.)\nconst mergeParcoords = pc => callback => {\n  // Retina display, etc.\n  const devicePixelRatio = window.devicePixelRatio || 1;\n\n  // Create a canvas element to store the merged canvases\n  const mergedCanvas = document.createElement('canvas');\n  mergedCanvas.width = pc.canvas.foreground.clientWidth * devicePixelRatio;\n  mergedCanvas.height =\n    (pc.canvas.foreground.clientHeight + 30) * devicePixelRatio;\n  mergedCanvas.style.width = mergedCanvas.width / devicePixelRatio + 'px';\n  mergedCanvas.style.height = mergedCanvas.height / devicePixelRatio + 'px';\n\n  // Give the canvas a white background\n  const context = mergedCanvas.getContext('2d');\n  context.fillStyle = '#ffffff';\n  context.fillRect(0, 0, mergedCanvas.width, mergedCanvas.height);\n\n  // Merge all the canvases\n  for (const key in pc.canvas) {\n    context.drawImage(\n      pc.canvas[key],\n      0,\n      24 * devicePixelRatio,\n      mergedCanvas.width,\n      mergedCanvas.height - 30 * devicePixelRatio\n    );\n  }\n\n  // Add SVG elements to canvas\n  const DOMURL = window.URL || window.webkitURL || window;\n  const serializer = new XMLSerializer();\n  const svgStr = serializer.serializeToString(\n    pc.selection.select('svg').node()\n  );\n\n  // Create a Data URI.\n  const src = 'data:image/svg+xml;base64,' + window.btoa(svgStr);\n  const img = new Image();\n  img.onload = () => {\n    context.drawImage(\n      img,\n      0,\n      0,\n      img.width * devicePixelRatio,\n      img.height * devicePixelRatio\n    );\n    if (typeof callback === 'function') {\n      callback(mergedCanvas);\n    }\n  };\n  img.src = src;\n};\n\nexport default mergeParcoords;\n","import { brushSelection } from 'd3-brush';\nimport { selectAll } from 'd3-selection';\n\nconst selected = config => {\n  let actives = [];\n  let extents = [];\n  let ranges = {};\n  //get brush selections from each node, convert to actual values\n  //invert order of values in array to comply with the parcoords architecture\n  if (config.brushes.length === 0) {\n    let nodes = selectAll('.brush').nodes();\n    for (let k = 0; k < nodes.length; k++) {\n      if (brushSelection(nodes[k]) !== null) {\n        actives.push(nodes[k].__data__);\n        let values = [];\n        let ranger = brushSelection(nodes[k]);\n        if (\n          typeof config.dimensions[nodes[k].__data__].yscale.domain()[0] ===\n          'number'\n        ) {\n          for (let i = 0; i < ranger.length; i++) {\n            if (\n              actives.includes(nodes[k].__data__) &&\n              config.flipAxes.includes(nodes[k].__data__)\n            ) {\n              values.push(\n                config.dimensions[nodes[k].__data__].yscale.invert(ranger[i])\n              );\n            } else if (config.dimensions[nodes[k].__data__].yscale() !== 1) {\n              values.unshift(\n                config.dimensions[nodes[k].__data__].yscale.invert(ranger[i])\n              );\n            }\n          }\n          extents.push(values);\n          for (let ii = 0; ii < extents.length; ii++) {\n            if (extents[ii].length === 0) {\n              extents[ii] = [1, 1];\n            }\n          }\n        } else {\n          ranges[nodes[k].__data__] = brushSelection(nodes[k]);\n          let dimRange = config.dimensions[nodes[k].__data__].yscale.range();\n          let dimDomain = config.dimensions[nodes[k].__data__].yscale.domain();\n          for (let j = 0; j < dimRange.length; j++) {\n            if (\n              dimRange[j] >= ranger[0] &&\n              dimRange[j] <= ranger[1] &&\n              actives.includes(nodes[k].__data__) &&\n              config.flipAxes.includes(nodes[k].__data__)\n            ) {\n              values.push(dimRange[j]);\n            } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n              values.unshift(dimRange[j]);\n            }\n          }\n          extents.push(values);\n          for (let ii = 0; ii < extents.length; ii++) {\n            if (extents[ii].length === 0) {\n              extents[ii] = [1, 1];\n            }\n          }\n        }\n      }\n    }\n    // test if within range\n    const within = {\n      date: function(d, p, dimension) {\n        let category = d[p];\n        let categoryIndex = config.dimensions[p].yscale\n          .domain()\n          .indexOf(category);\n        let categoryRangeValue = config.dimensions[p].yscale.range()[\n          categoryIndex\n        ];\n        return (\n          categoryRangeValue >= ranges[p][0] &&\n          categoryRangeValue <= ranges[p][1]\n        );\n      },\n      number: function(d, p, dimension) {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      },\n      string: function(d, p, dimension) {\n        let category = d[p];\n        let categoryIndex = config.dimensions[p].yscale\n          .domain()\n          .indexOf(category);\n        let categoryRangeValue = config.dimensions[p].yscale.range()[\n          categoryIndex\n        ];\n        return (\n          categoryRangeValue >= ranges[p][0] &&\n          categoryRangeValue <= ranges[p][1]\n        );\n      },\n    };\n    return config.data.filter(d =>\n      actives.every((p, dimension) =>\n        within[config.dimensions[p].type](d, p, dimension)\n      )\n    );\n  } else {\n    // need to get data from each brush instead of each axis\n    // first must find active axes by iterating through all brushes\n    // then go through similiar process as above.\n    let multiBrushData = [];\n    for (let idx = 0; idx < config.brushes.length; idx++) {\n      let brush = config.brushes[idx];\n      let values = [];\n      let ranger = brush.extent;\n      let actives = [brush.data];\n      if (\n        typeof config.dimensions[brush.data].yscale.domain()[0] === 'number'\n      ) {\n        for (let i = 0; i < ranger.length; i++) {\n          if (\n            actives.includes(brush.data) &&\n            config.flipAxes.includes(brush.data)\n          ) {\n            values.push(config.dimensions[brush.data].yscale.invert(ranger[i]));\n          } else if (config.dimensions[brush.data].yscale() !== 1) {\n            values.unshift(\n              config.dimensions[brush.data].yscale.invert(ranger[i])\n            );\n          }\n        }\n        extents.push(values);\n        for (let ii = 0; ii < extents.length; ii++) {\n          if (extents[ii].length === 0) {\n            extents[ii] = [1, 1];\n          }\n        }\n      } else {\n        ranges[brush.data] = brush.extent;\n        let dimRange = config.dimensions[brush.data].yscale.range();\n        let dimDomain = config.dimensions[brush.data].yscale.domain();\n        for (let j = 0; j < dimRange.length; j++) {\n          if (\n            dimRange[j] >= ranger[0] &&\n            dimRange[j] <= ranger[1] &&\n            actives.includes(brush.data) &&\n            config.flipAxes.includes(brush.data)\n          ) {\n            values.push(dimRange[j]);\n          } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n            values.unshift(dimRange[j]);\n          }\n        }\n        extents.push(values);\n        for (let ii = 0; ii < extents.length; ii++) {\n          if (extents[ii].length === 0) {\n            extents[ii] = [1, 1];\n          }\n        }\n      }\n      let within = {\n        date: function(d, p, dimension) {\n          let category = d[p];\n          let categoryIndex = config.dimensions[p].yscale\n            .domain()\n            .indexOf(category);\n          let categoryRangeValue = config.dimensions[p].yscale.range()[\n            categoryIndex\n          ];\n          return (\n            categoryRangeValue >= ranges[p][0] &&\n            categoryRangeValue <= ranges[p][1]\n          );\n        },\n        number: function(d, p, dimension) {\n          return extents[idx][0] <= d[p] && d[p] <= extents[idx][1];\n        },\n        string: function(d, p, dimension) {\n          let category = d[p];\n          let categoryIndex = config.dimensions[p].yscale\n            .domain()\n            .indexOf(category);\n          let categoryRangeValue = config.dimensions[p].yscale.range()[\n            categoryIndex\n          ];\n          return (\n            categoryRangeValue >= ranges[p][0] &&\n            categoryRangeValue <= ranges[p][1]\n          );\n        },\n      };\n\n      // filter data, but instead of returning it now,\n      // put it into multiBrush data which is returned after\n      // all brushes are iterated through.\n      let filtered = config.data.filter(d =>\n        actives.every((p, dimension) =>\n          within[config.dimensions[p].type](d, p, dimension)\n        )\n      );\n      for (let z = 0; z < filtered.length; z++) {\n        multiBrushData.push(filtered[z]);\n      }\n      actives = [];\n      ranges = {};\n    }\n    return multiBrushData;\n  }\n};\n\nexport default selected;\n","const brushPredicate = (brushGroup, config, pc) => (predicate = null) => {\n  if (predicate === null) {\n    return brushGroup.predicate;\n  }\n\n  predicate = String(predicate).toUpperCase();\n  if (predicate !== 'AND' && predicate !== 'OR') {\n    throw new Error('Invalid predicate ' + predicate);\n  }\n\n  brushGroup.predicate = predicate;\n  console.log(brushGroup.currentMode());\n  config.brushed = brushGroup.currentMode().selected();\n  pc.renderBrushed();\n  return pc;\n};\n\nconst brushMode = (brushGroup, config, pc) => (mode = null) => {\n  if (mode === null) {\n    return brushGroup.mode;\n  }\n\n  if (pc.brushModes().indexOf(mode) === -1) {\n    throw new Error('pc.brushmode: Unsupported brush mode: ' + mode);\n  }\n\n  // Make sure that we don't trigger unnecessary events by checking if the mode\n  // actually changes.\n  if (mode !== brushGroup.mode) {\n    // When changing brush modes, the first thing we need to do is clearing any\n    // brushes from the current mode, if any.\n    if (brushGroup.mode !== 'None') {\n      pc.brushReset();\n    }\n\n    // Next, we need to 'uninstall' the current brushMode.\n    brushGroup.modes[brushGroup.mode].uninstall(pc);\n    // Finally, we can install the requested one.\n    brushGroup.mode = mode;\n    brushGroup.modes[brushGroup.mode].install();\n    if (mode === 'None') {\n      delete pc.brushPredicate;\n    } else {\n      pc.brushPredicate = brushPredicate(brushGroup, config, pc);\n    }\n  }\n\n  return pc;\n};\n\nexport default brushMode;\n","/**\n * dimension display names\n *\n * @param config\n * @param d\n * @returns {*}\n */\nconst dimensionLabels = config => d =>\n  config.dimensions[d].title ? config.dimensions[d].title : d;\n\nexport default dimensionLabels;\n","import { select } from 'd3-selection';\n\nconst flipAxisAndUpdatePCP = (config, pc, axis) =>\n  function(dimension) {\n    pc.flip(dimension);\n    pc.brushReset(dimension);\n    select(this.parentElement)\n      .transition()\n      .duration(config.animationTime)\n      .call(axis.scale(config.dimensions[dimension].yscale));\n    pc.render();\n  };\n\nexport default flipAxisAndUpdatePCP;\n","import { event } from 'd3-selection';\n\nconst rotateLabels = (config, pc) => {\n  if (!config.rotateLabels) return;\n\n  let delta = event.deltaY;\n  delta = delta < 0 ? -5 : delta;\n  delta = delta > 0 ? 5 : delta;\n\n  config.dimensionTitleRotation += delta;\n  pc.svg\n    .selectAll('text.label')\n    .attr(\n      'transform',\n      'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n    );\n  event.preventDefault();\n};\n\nexport default rotateLabels;\n","import { select } from 'd3-selection';\n\nimport dimensionLabels from '../util/dimensionLabels';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\nimport rotateLabels from '../util/rotateLabels';\n\nconst updateAxes = (config, pc, position, axis, flags) => (\n  animationTime = null\n) => {\n  if (animationTime === null) {\n    animationTime = config.animationTime;\n  }\n\n  const g_data = pc.svg\n    .selectAll('.dimension')\n    .data(pc.getOrderedDimensionKeys());\n  // Enter\n  g_data\n    .enter()\n    .append('svg:g')\n    .attr('class', 'dimension')\n    .attr('transform', p => 'translate(' + position(p) + ')')\n    .style('opacity', 0)\n    .append('svg:g')\n    .attr('class', 'axis')\n    .attr('transform', 'translate(0,0)')\n    .each(function(d) {\n      const axisElement = select(this).call(\n        pc.applyAxisConfig(axis, config.dimensions[d])\n      );\n\n      axisElement\n        .selectAll('path')\n        .style('fill', 'none')\n        .style('stroke', '#222')\n        .style('shape-rendering', 'crispEdges');\n\n      axisElement\n        .selectAll('line')\n        .style('fill', 'none')\n        .style('stroke', '#222')\n        .style('shape-rendering', 'crispEdges');\n    })\n    .append('svg:text')\n    .attr({\n      'text-anchor': 'middle',\n      y: 0,\n      transform:\n        'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')',\n      x: 0,\n      class: 'label',\n    })\n    .text(dimensionLabels(config))\n    .on('dblclick', flipAxisAndUpdatePCP(config, pc, axis))\n    .on('wheel', rotateLabels(config, pc));\n\n  // Update\n  g_data.attr('opacity', 0);\n  g_data\n    .select('.axis')\n    .transition()\n    .duration(animationTime)\n    .each(function(d) {\n      select(this).call(pc.applyAxisConfig(axis, config.dimensions[d]));\n    });\n  g_data\n    .select('.label')\n    .transition()\n    .duration(animationTime)\n    .text(dimensionLabels(config))\n    .attr(\n      'transform',\n      'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n    );\n\n  // Exit\n  g_data.exit().remove();\n\n  g = pc.svg.selectAll('.dimension');\n  g\n    .transition()\n    .duration(animationTime)\n    .attr('transform', p => 'translate(' + position(p) + ')')\n    .style('opacity', 1);\n\n  pc.svg\n    .selectAll('.axis')\n    .transition()\n    .duration(animationTime)\n    .each(function(d) {\n      select(this).call(pc.applyAxisConfig(axis, config.dimensions[d]));\n    });\n\n  if (flags.brushable) pc.brushable();\n  if (flags.reorderable) pc.reorderable();\n  if (pc.brushMode() !== 'None') {\n    let mode = pc.brushMode();\n    pc.brushMode('None');\n    pc.brushMode(mode);\n  }\n  return this;\n};\n\nexport default updateAxes;\n","/** adjusts an axis' default range [h()+1, 1] if a NullValueSeparator is set */\nconst getRange = config => {\n  const h = config.height - config.margin.top - config.margin.bottom;\n\n  if (config.nullValueSeparator == 'bottom') {\n    return [\n      h +\n        1 -\n        config.nullValueSeparatorPadding.bottom -\n        config.nullValueSeparatorPadding.top,\n      1,\n    ];\n  } else if (config.nullValueSeparator == 'top') {\n    return [\n      h + 1,\n      1 +\n        config.nullValueSeparatorPadding.bottom +\n        config.nullValueSeparatorPadding.top,\n    ];\n  }\n  return [h + 1, 1];\n};\n\nexport default getRange;\n","import { scaleLinear, scaleOrdinal, scalePoint, scaleTime } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport getRange from '../util/getRange';\nimport w from '../util/width';\nimport h from '../util/height';\n\nconst autoscale = (config, pc, xscale, ctx) =>\n  function() {\n    // yscale\n    const defaultScales = {\n      date: function(k) {\n        let _extent = extent(config.data, d => (d[k] ? d[k].getTime() : null));\n        // special case if single value\n        if (_extent[0] === _extent[1]) {\n          return scalePoint()\n            .domain(_extent)\n            .range(getRange(config));\n        }\n        if (config.flipAxes.includes(k)) {\n          _extent = _extent.map(val => tempDate.unshift(val));\n        }\n        return scaleTime()\n          .domain(_extent)\n          .range(getRange(config));\n      },\n      number: function(k) {\n        let _extent = extent(config.data, d => +d[k]);\n        // special case if single value\n        if (_extent[0] === _extent[1]) {\n          return scalePoint()\n            .domain(_extent)\n            .range(getRange(config));\n        }\n        if (config.flipAxes.includes(k)) {\n          _extent = _extent.map(val => tempDate.unshift(val));\n        }\n        return scaleLinear()\n          .domain(_extent)\n          .range(getRange(config));\n      },\n      string: function(k) {\n        let counts = {},\n          domain = [];\n        // Let's get the count for each value so that we can sort the domain based\n        // on the number of items for each value.\n        config.data.map(p => {\n          if (p[k] === undefined && config.nullValueSeparator !== 'undefined') {\n            return null; // null values will be drawn beyond the horizontal null value separator!\n          }\n          if (counts[p[k]] === undefined) {\n            counts[p[k]] = 1;\n          } else {\n            counts[p[k]] = counts[p[k]] + 1;\n          }\n        });\n        if (config.flipAxes.includes(k)) {\n          domain = Object.getOwnPropertyNames(counts).sort();\n        } else {\n          let tempArr = Object.getOwnPropertyNames(counts).sort();\n          for (let i = 0; i < Object.getOwnPropertyNames(counts).length; i++) {\n            domain.push(tempArr.pop());\n          }\n        }\n\n        //need to create an ordinal scale for categorical data\n        let categoricalRange = [];\n        if (domain.length === 1) {\n          //edge case\n          domain = [' ', domain[0], ' '];\n        }\n        let addBy = getRange(config)[0] / (domain.length - 1);\n        for (let j = 0; j < domain.length; j++) {\n          if (categoricalRange.length === 0) {\n            categoricalRange.push(0);\n            continue;\n          }\n          categoricalRange.push(categoricalRange[j - 1] + addBy);\n        }\n        return scaleOrdinal()\n          .domain(domain)\n          .range(categoricalRange);\n      },\n    };\n    Object.keys(config.dimensions).forEach(function(k) {\n      if (\n        config.dimensions[k].yscale === undefined ||\n        config.dimensions[k].yscale === null\n      )\n        config.dimensions[k].yscale = defaultScales[config.dimensions[k].type](\n          k\n        );\n    });\n\n    // xscale\n    xscale.range([0, w(config)], 1);\n    // Retina display, etc.\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    // canvas sizes\n    pc.selection\n      .selectAll('canvas')\n      .style('margin-top', config.margin.top + 'px')\n      .style('margin-left', config.margin.left + 'px')\n      .style('width', w(config) + 2 + 'px')\n      .style('height', h(config) + 2 + 'px')\n      .attr('width', (w(config) + 2) * devicePixelRatio)\n      .attr('height', (h(config) + 2) * devicePixelRatio);\n    // default styles, needs to be set when canvas width changes\n    ctx.foreground.strokeStyle = config.color;\n    ctx.foreground.lineWidth = 1.4;\n    ctx.foreground.globalCompositeOperation = config.composite;\n    ctx.foreground.globalAlpha = config.alpha;\n    ctx.foreground.scale(devicePixelRatio, devicePixelRatio);\n    ctx.brushed.strokeStyle = config.brushedColor;\n    ctx.brushed.lineWidth = 1.4;\n    ctx.brushed.globalCompositeOperation = config.composite;\n    ctx.brushed.globalAlpha = config.alpha;\n    ctx.brushed.scale(devicePixelRatio, devicePixelRatio);\n    ctx.highlight.lineWidth = 3;\n    ctx.highlight.scale(devicePixelRatio, devicePixelRatio);\n\n    return this;\n  };\n\nexport default autoscale;\n","import { brushSelection, brushY } from 'd3-brush';\nimport { event, select } from 'd3-selection';\n\nconst brushable = (config, pc, flags) =>\n  function() {\n    if (!pc.g()) {\n      pc.createAxes();\n    }\n\n    const g = pc.g();\n\n    // Add and store a brush for each axis.\n    g\n      .append('svg:g')\n      .attr('class', 'brush')\n      .each(function(d) {\n        if (config.dimensions[d] !== undefined) {\n          config.dimensions[d]['brush'] = brushY(select(this)).extent([\n            [-15, 0],\n            [15, config.dimensions[d].yscale.range()[0]],\n          ]);\n          select(this).call(\n            config.dimensions[d]['brush']\n              .on('start', function() {\n                if (event.sourceEvent !== null && !event.sourceEvent.ctrlKey) {\n                  pc.brushReset();\n                }\n              })\n              .on('brush', function() {\n                if (!event.sourceEvent.ctrlKey) {\n                  pc.brush();\n                }\n              })\n              .on('end', function() {\n                // save brush selection is ctrl key is held\n                // store important brush information and\n                // the html element of the selection,\n                // to make a dummy selection element\n                if (event.sourceEvent.ctrlKey) {\n                  let html = select(this)\n                    .select('.selection')\n                    .nodes()[0].outerHTML;\n                  html = html.replace(\n                    'class=\"selection\"',\n                    'class=\"selection dummy' +\n                      ' selection-' +\n                      config.brushes.length +\n                      '\"'\n                  );\n                  let dat = select(this).nodes()[0].__data__;\n                  let brush = {\n                    id: config.brushes.length,\n                    extent: brushSelection(this),\n                    html: html,\n                    data: dat,\n                  };\n                  config.brushes.push(brush);\n                  select(select(this).nodes()[0].parentNode)\n                    .select('.axis')\n                    .nodes()[0].outerHTML += html;\n                  pc.brush();\n                  config.dimensions[d].brush.move(select(this, null));\n                  select(this)\n                    .select('.selection')\n                    .attr('style', 'display:none');\n                  pc.brushable();\n                } else {\n                  pc.brush();\n                }\n              })\n          );\n          select(this).on('dblclick', function() {\n            pc.brushReset(d);\n          });\n        }\n      });\n\n    flags.brushable = true;\n    return this;\n  };\n\nexport default brushable;\n","import { extent } from 'd3-array';\n\nconst commonScale = (config, pc) =>\n  function(global, type) {\n    const t = type || 'number';\n    if (typeof global === 'undefined') {\n      global = true;\n    }\n\n    // try to autodetect dimensions and create scales\n    if (!Object.keys(config.dimensions).length) {\n      pc.detectDimensions();\n    }\n    pc.autoscale();\n\n    // scales of the same type\n    const scales = Object.keys(config.dimensions).filter(\n      p => config.dimensions[p].type == t\n    );\n\n    if (global) {\n      let _extent = extent(\n        scales\n          .map(d => config.dimensions[d].yscale.domain())\n          .reduce((cur, acc) => cur.concat(acc))\n      );\n\n      scales.forEach(d => {\n        config.dimensions[d].yscale.domain(_extent);\n      });\n    } else {\n      scales.forEach(d => {\n        config.dimensions[d].yscale.domain(extent(config.data, d => +d[k]));\n      });\n    }\n\n    // update centroids\n    if (config.bundleDimension !== null) {\n      pc.bundleDimension(config.bundleDimension);\n    }\n\n    return this;\n  };\n\nexport default commonScale;\n","const computeRealCentroids = (dimensions, position) => row =>\n  Object.keys(dimensions).map(d => {\n    const x = position(d);\n    const y = dimensions[d].yscale(row[d]);\n    return [x, y];\n  });\n\nexport default computeRealCentroids;\n","const applyDimensionDefaults = (config, pc) =>\n  function(dims) {\n    const types = pc.detectDimensionTypes(config.data);\n    dims = dims ? dims : Object.keys(types);\n\n    return dims.reduce((acc, cur, i) => {\n      const k = config.dimensions[cur] ? config.dimensions[cur] : {};\n\n      acc[cur] = {\n        ...k,\n        orient: k.orient ? k.orient : 'left',\n        ticks: k.ticks != null ? k.ticks : 5,\n        innerTickSize: k.innerTickSize != null ? k.innerTickSize : 6,\n        outerTickSize: k.outerTickSize != null ? k.outerTickSize : 0,\n        tickPadding: k.tickPadding != null ? k.tickPadding : 3,\n        type: k.type ? k.type : types[cur],\n        index: k.index != null ? k.index : i,\n      };\n\n      return acc;\n    }, {});\n  };\n\nexport default applyDimensionDefaults;\n","import { select } from 'd3-selection';\n\nimport dimensionLabels from '../util/dimensionLabels';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\nimport rotateLabels from '../util/rotateLabels';\n\nimport w from '../util/width';\nimport h from '../util/height';\n\n/**\n * Create static SVG axes with dimension names, ticks, and labels.\n *\n * @param config\n * @param pc\n * @param xscale\n * @param flags\n * @param axis\n * @returns {Function}\n */\nconst createAxes = (config, pc, xscale, flags, axis) =>\n  function() {\n    if (pc.g() !== undefined) {\n      pc.removeAxes();\n    }\n    // Add a group element for each dimension.\n    pc._g = pc.svg\n      .selectAll('.dimension')\n      .data(pc.getOrderedDimensionKeys(), function(d) {\n        return d;\n      })\n      .enter()\n      .append('svg:g')\n      .attr('class', 'dimension')\n      .attr('transform', function(d) {\n        return 'translate(' + xscale(d) + ')';\n      });\n    // Add an axis and title.\n    pc._g\n      .append('svg:g')\n      .attr('class', 'axis')\n      .attr('transform', 'translate(0,0)')\n      .each(function(d) {\n        let axisElement = select(this).call(\n          pc.applyAxisConfig(axis, config.dimensions[d])\n        );\n\n        axisElement\n          .selectAll('path')\n          .style('fill', 'none')\n          .style('stroke', '#222')\n          .style('shape-rendering', 'crispEdges');\n\n        axisElement\n          .selectAll('line')\n          .style('fill', 'none')\n          .style('stroke', '#222')\n          .style('shape-rendering', 'crispEdges');\n      })\n\n      .append('svg:text')\n      .attr('text-anchor', 'middle')\n      .attr('y', 0)\n      .attr(\n        'transform',\n        'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n      )\n      .attr('x', 0)\n      .attr('class', 'label')\n      .text(dimensionLabels(config))\n      .on('dblclick', flipAxisAndUpdatePCP(config, pc, axis))\n      .on('wheel', rotateLabels(config, pc));\n\n    if (config.nullValueSeparator == 'top') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', 1 + config.nullValueSeparatorPadding.top)\n        .attr('x2', w(config))\n        .attr('y2', 1 + config.nullValueSeparatorPadding.top)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    } else if (config.nullValueSeparator == 'bottom') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', h(config) + 1 - config.nullValueSeparatorPadding.bottom)\n        .attr('x2', w(config))\n        .attr('y2', h(config) + 1 - config.nullValueSeparatorPadding.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    }\n\n    flags.axes = true;\n    return this;\n  };\n\nexport default createAxes;\n","import { entries } from 'd3-collection';\nimport { min } from 'd3-array';\n\n//draw dots with radius r on the axis line where data intersects\nconst axisDots = (config, pc, position) => _r => {\n  const r = _r || 0.1;\n  const ctx = pc.ctx.marks;\n  const startAngle = 0;\n  const endAngle = 2 * Math.PI;\n  ctx.globalAlpha = min([1 / Math.pow(config.data.length, 1 / 2), 1]);\n  config.data.forEach(d => {\n    entries(config.dimensions).forEach((p, i) => {\n      ctx.beginPath();\n      ctx.arc(\n        position(p),\n        config.dimensions[p.key].yscale(d[p]),\n        r,\n        startAngle,\n        endAngle\n      );\n      ctx.stroke();\n      ctx.fill();\n    });\n  });\n  return this;\n};\n\nexport default axisDots;\n","import { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\n\nconst applyAxisConfig = (axis, dimension) => {\n  let axisCfg;\n\n  switch (dimension.orient) {\n    case 'left':\n      axisCfg = axisLeft(dimension.yscale);\n      break;\n    case 'right':\n      axisCfg = axisRight(dimension.yscale);\n      break;\n    case 'top':\n      axisCfg = axisTop(dimension.yscale);\n      break;\n    case 'bottom':\n      axisCfg = axisBottom(dimension.yscale);\n      break;\n    default:\n      axisCfg = axisLeft(dimension.yscale);\n      break;\n  }\n\n  axisCfg\n    .ticks(dimension.ticks)\n    .tickValues(dimension.tickValues)\n    .tickSizeInner(dimension.innerTickSize)\n    .tickSizeOuter(dimension.outerTickSize)\n    .tickPadding(dimension.tickPadding)\n    .tickFormat(dimension.tickFormat);\n\n  return axisCfg;\n};\n\nexport default applyAxisConfig;\n","import { drag } from 'd3-drag';\nimport { event, select } from 'd3-selection';\n\nimport w from '../util/width';\n\n// Jason Davies, http://bl.ocks.org/1341281\nconst reorderable = (config, pc, xscale, position, dragging, flags) =>\n  function() {\n    if (pc.g() === undefined) pc.createAxes();\n    const g = pc.g();\n\n    g.style('cursor', 'move').call(\n      drag()\n        .on('start', function(d) {\n          dragging[d] = this.__origin__ = xscale(d);\n        })\n        .on('drag', function(d) {\n          dragging[d] = Math.min(\n            w(config),\n            Math.max(0, (this.__origin__ += event.dx))\n          );\n          pc.sortDimensions();\n          xscale.domain(pc.getOrderedDimensionKeys());\n          pc.render();\n          g.attr('transform', d => 'translate(' + position(d) + ')');\n        })\n        .on('end', function(d) {\n          delete this.__origin__;\n          delete dragging[d];\n          select(this)\n            .transition()\n            .attr('transform', 'translate(' + xscale(d) + ')');\n          pc.render();\n        })\n    );\n    flags.reorderable = true;\n    return this;\n  };\n\nexport default reorderable;\n","// rescale for height, width and margins\n// TODO currently assumes chart is brushable, and destroys old brushes\nconst resize = (config, pc, flags, events) => {\n  return function() {\n    // selection size\n    pc.selection\n      .select('svg')\n      .attr('width', config.width)\n      .attr('height', config.height);\n    pc.svg.attr(\n      'transform',\n      'translate(' + config.margin.left + ',' + config.margin.top + ')'\n    );\n\n    // FIXME: the current brush state should pass through\n    if (flags.brushable) pc.brushReset();\n\n    // scales\n    pc.autoscale();\n\n    // axes, destroys old brushes.\n    if (pc.g()) pc.createAxes();\n    if (flags.brushable) pc.brushable();\n    if (flags.reorderable) pc.reorderable();\n\n    events.call('resize', this, {\n      width: config.width,\n      height: config.height,\n      margin: config.margin,\n    });\n\n    return this;\n  };\n};\n\nexport default resize;\n","// Reorder dimensions, such that the highest value (visually) is on the left and\n// the lowest on the right. Visual values are determined by the data values in\n// the given row.\nconst reorder = (config, pc, xscale) => rowdata => {\n  const firstDim = pc.getOrderedDimensionKeys()[0];\n\n  pc.sortDimensionsByRowData(rowdata);\n  // NOTE: this is relatively cheap given that:\n  // number of dimensions < number of data items\n  // Thus we check equality of order to prevent rerendering when this is the case.\n  const reordered = firstDim !== pc.getOrderedDimensionKeys()[0];\n\n  if (reordered) {\n    xscale.domain(pc.getOrderedDimensionKeys());\n    const highlighted = config.highlighted.slice(0);\n    pc.unhighlight();\n\n    const g = pc.g();\n    g\n      .transition()\n      .duration(1500)\n      .attr('transform', d => 'translate(' + xscale(d) + ')');\n    pc.render();\n\n    // pc.highlight() does not check whether highlighted is length zero, so we do that here.\n    if (highlighted.length !== 0) {\n      pc.highlight(highlighted);\n    }\n  }\n};\n\nexport default reorder;\n","const sortDimensions = (config, position) => () => {\n  const copy = Object.assign({}, config.dimensions);\n  const positionSortedKeys = Object.keys(config.dimensions).sort(\n    (a, b) => (position(a) - position(b) === 0 ? 1 : position(a) - position(b))\n  );\n  config.dimensions = {};\n  positionSortedKeys.forEach((p, i) => {\n    config.dimensions[p] = copy[p];\n    config.dimensions[p].index = i;\n  });\n};\n\nexport default sortDimensions;\n","const sortDimensionsByRowData = config => rowdata => {\n  const copy = Object.assign({}, config.dimensions);\n  const positionSortedKeys = Object.keys(config.dimensions).sort((a, b) => {\n    const pixelDifference =\n      config.dimensions[a].yscale(rowdata[a]) -\n      config.dimensions[b].yscale(rowdata[b]);\n\n    // Array.sort is not necessarily stable, this means that if pixelDifference is zero\n    // the ordering of dimensions might change unexpectedly. This is solved by sorting on\n    // variable name in that case.\n    return pixelDifference === 0 ? a.localeCompare(b) : pixelDifference;\n  });\n  config.dimensions = {};\n  positionSortedKeys.forEach((p, i) => {\n    config.dimensions[p] = copy[p];\n    config.dimensions[p].index = i;\n  });\n};\n\nexport default sortDimensionsByRowData;\n","const isBrushed = (config, brushGroup) => {\n  if (config.brushed && config.brushed.length !== config.data.length)\n    return true;\n\n  const object = brushGroup.currentMode().brushState();\n\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport default isBrushed;\n","import isBrushed from '../util/isBrushed';\nimport w from '../util/width';\nimport h from '../util/height';\n\nconst clear = (config, pc, ctx, brushGroup) =>\n  function(layer) {\n    ctx[layer].clearRect(0, 0, w(config) + 2, h(config) + 2);\n\n    // This will make sure that the foreground items are transparent\n    // without the need for changing the opacity style of the foreground canvas\n    // as this would stop the css styling from working\n    if (layer === 'brushed' && isBrushed(config, brushGroup)) {\n      ctx.brushed.fillStyle = pc.selection.style('background-color');\n      ctx.brushed.globalAlpha = 1 - config.alphaOnBrushed;\n      ctx.brushed.fillRect(0, 0, w(config) + 2, h(config) + 2);\n      ctx.brushed.globalAlpha = config.alpha;\n    }\n    return this;\n  };\n\nexport default clear;\n","const computeCentroids = (config, position, row) => {\n  const centroids = [];\n\n  const p = Object.keys(config.dimensions);\n  const cols = p.length;\n  const a = 0.5; // center between axes\n  for (let i = 0; i < cols; ++i) {\n    // centroids on 'real' axes\n    const x = position(p[i]);\n    const y = config.dimensions[p[i]].yscale(row[p[i]]);\n    centroids.push($V([x, y]));\n\n    // centroids on 'virtual' axes\n    if (i < cols - 1) {\n      const cx = x + a * (position(p[i + 1]) - x);\n      let cy = y + a * (config.dimensions[p[i + 1]].yscale(row[p[i + 1]]) - y);\n      if (config.bundleDimension !== null) {\n        const leftCentroid = config.clusterCentroids\n          .get(\n            config.dimensions[config.bundleDimension].yscale(\n              row[config.bundleDimension]\n            )\n          )\n          .get(p[i]);\n        const rightCentroid = config.clusterCentroids\n          .get(\n            config.dimensions[config.bundleDimension].yscale(\n              row[config.bundleDimension]\n            )\n          )\n          .get(p[i + 1]);\n        let centroid = 0.5 * (leftCentroid + rightCentroid);\n        cy = centroid + (1 - config.bundlingStrength) * (cy - centroid);\n      }\n      centroids.push($V([cx, cy]));\n    }\n  }\n\n  return centroids;\n};\n\nexport default computeCentroids;\n","const computeControlPoints = (smoothness, centroids) => {\n  const cols = centroids.length;\n  const a = smoothness;\n  const cps = [];\n\n  cps.push(centroids[0]);\n  cps.push(\n    $V([\n      centroids[0].e(1) + a * 2 * (centroids[1].e(1) - centroids[0].e(1)),\n      centroids[0].e(2),\n    ])\n  );\n  for (let col = 1; col < cols - 1; ++col) {\n    let mid = centroids[col];\n    let left = centroids[col - 1];\n    let right = centroids[col + 1];\n\n    let diff = left.subtract(right);\n    cps.push(mid.add(diff.x(a)));\n    cps.push(mid);\n    cps.push(mid.subtract(diff.x(a)));\n  }\n  cps.push(\n    $V([\n      centroids[cols - 1].e(1) +\n        a * 2 * (centroids[cols - 2].e(1) - centroids[cols - 1].e(1)),\n      centroids[cols - 1].e(2),\n    ])\n  );\n  cps.push(centroids[cols - 1]);\n\n  return cps;\n};\n\nexport default computeControlPoints;\n","// draw single cubic bezier curve\nimport { entries } from 'd3-collection';\nimport computeCentroids from './computeCentroids';\nimport computeControlPoints from './computeControlPoints';\nimport h from './height';\n\nconst singleCurve = (config, position, d, ctx) => {\n  const centroids = computeCentroids(config, position, d);\n  const cps = computeControlPoints(config.smoothness, centroids);\n\n  ctx.moveTo(cps[0].e(1), cps[0].e(2));\n\n  for (let i = 1; i < cps.length; i += 3) {\n    if (config.showControlPoints) {\n      for (let j = 0; j < 3; j++) {\n        ctx.fillRect(cps[i + j].e(1), cps[i + j].e(2), 2, 2);\n      }\n    }\n    ctx.bezierCurveTo(\n      cps[i].e(1),\n      cps[i].e(2),\n      cps[i + 1].e(1),\n      cps[i + 1].e(2),\n      cps[i + 2].e(1),\n      cps[i + 2].e(2)\n    );\n  }\n};\n\n// returns the y-position just beyond the separating null value line\nconst getNullPosition = config => {\n  if (config.nullValueSeparator == 'bottom') {\n    return h(config) + 1;\n  } else if (config.nullValueSeparator == 'top') {\n    return 1;\n  } else {\n    console.log(\n      \"A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'.\"\n    );\n  }\n  return h(config) + 1;\n};\n\nconst singlePath = (config, position, d, ctx) => {\n  entries(config.dimensions).forEach((p, i) => {\n    //p isn't really p\n    if (i == 0) {\n      ctx.moveTo(\n        position(p.key),\n        typeof d[p.key] == 'undefined'\n          ? getNullPosition(config)\n          : config.dimensions[p.key].yscale(d[p.key])\n      );\n    } else {\n      ctx.lineTo(\n        position(p.key),\n        typeof d[p.key] == 'undefined'\n          ? getNullPosition(config)\n          : config.dimensions[p.key].yscale(d[p.key])\n      );\n    }\n  });\n};\n\n// draw single polyline\nconst colorPath = (config, position, d, ctx) => {\n  ctx.beginPath();\n  if (\n    (config.bundleDimension !== null && config.bundlingStrength > 0) ||\n    config.smoothness > 0\n  ) {\n    singleCurve(config, position, d, ctx);\n  } else {\n    singlePath(config, position, d, ctx);\n  }\n  ctx.stroke();\n};\n\nexport default colorPath;\n","const _functor = v => (typeof v === 'function' ? v : () => v);\n\nexport default _functor;\n","import isBrushed from '../util/isBrushed';\nimport colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathBrushed = (config, ctx, position) => (d, i) => {\n  if (config.brushedColor !== null) {\n    ctx.brushed.strokeStyle = functor(config.brushedColor)(d, i);\n  } else {\n    ctx.brushed.strokeStyle = functor(config.color)(d, i);\n  }\n  return colorPath(config, position, d, ctx.brushed);\n};\n\nconst renderBrushedDefault = (config, ctx, position, pc, brushGroup) => () => {\n  pc.clear('brushed');\n\n  if (isBrushed(config, brushGroup)) {\n    config.brushed.forEach(pathBrushed(config, ctx, position));\n  }\n};\n\nconst renderBrushedQueue = (config, brushGroup, brushedQueue) => () => {\n  if (isBrushed(config, brushGroup)) {\n    brushedQueue(config.brushed);\n  } else {\n    brushedQueue([]); // This is needed to clear the currently brushed items\n  }\n};\n\nconst renderBrushed = (config, pc, events) =>\n  function() {\n    if (!Object.keys(config.dimensions).length) pc.detectDimensions();\n\n    pc.renderBrushed[config.mode]();\n    events.call('render', this);\n    return this;\n  };\n\nexport { pathBrushed, renderBrushed, renderBrushedDefault, renderBrushedQueue };\n","import { select, selectAll } from 'd3-selection';\n\nconst brushReset = config =>\n  function(dimension) {\n    const brushesToKeep = [];\n    for (let j = 0; j < config.brushes.length; j++) {\n      if (config.brushes[j].data !== dimension) {\n        brushesToKeep.push(config.brushes[j]);\n      }\n    }\n\n    config.brushes = brushesToKeep;\n    config.brushed = false;\n\n    if (pc.g() !== undefined) {\n      const nodes = selectAll('.brush').nodes();\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].__data__ === dimension) {\n          // remove all dummy brushes for this axis or the real brush\n          select(select(nodes[i]).nodes()[0].parentNode)\n            .selectAll('.dummy')\n            .remove();\n          config.dimensions[dimension].brush.move(select(nodes[i], null));\n        }\n      }\n    }\n\n    return this;\n  };\n\nexport default brushReset;\n","// a better \"typeof\" from this post: http://stackoverflow.com/questions/7390426/better-way-to-get-type-of-a-javascript-variable\nconst toType = v => {\n  return {}.toString\n    .call(v)\n    .match(/\\s([a-zA-Z]+)/)[1]\n    .toLowerCase();\n};\n\nexport default toType;\n","// this descriptive text should live with other introspective methods\nconst toString = config => () =>\n  'Parallel Coordinates: ' +\n  Object.keys(config.dimensions).length +\n  ' dimensions (' +\n  Object.keys(config.data[0]).length +\n  ' total) , ' +\n  config.data.length +\n  ' rows';\n\nexport default toString;\n","// pairs of adjacent dimensions\nconst adjacentPairs = arr => {\n  let ret = [];\n  for (let i = 0; i < arr.length - 1; i++) {\n    ret.push([arr[i], arr[i + 1]]);\n  }\n  return ret;\n};\n\nexport default adjacentPairs;\n","import { selectAll } from 'd3-selection';\n\nimport colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathHighlight = (config, ctx, position) => (d, i) => {\n  ctx.highlight.strokeStyle = functor(config.color)(d, i);\n  return colorPath(config, position, d, ctx.highlight);\n};\n\n// highlight an array of data\nconst highlight = (config, pc, canvas, events, ctx, position) =>\n  function(data = null) {\n    if (data === null) {\n      return config.highlighted;\n    }\n\n    config.highlighted = data;\n    pc.clear('highlight');\n    selectAll([canvas.foreground, canvas.brushed]).classed('faded', true);\n    data.forEach(pathHighlight(config, ctx, position));\n    events.call('highlight', this, data);\n    return this;\n  };\n\nexport default highlight;\n","import { selectAll } from 'd3-selection';\n\n// clear highlighting\nconst unhighlight = (config, pc, canvas) =>\n  function() {\n    config.highlighted = [];\n    pc.clear('highlight');\n    selectAll([canvas.foreground, canvas.brushed]).classed('faded', false);\n    return this;\n  };\n\nexport default unhighlight;\n","const removeAxes = pc =>\n  function() {\n    pc._g.remove();\n\n    delete pc._g;\n    return this;\n  };\n\nexport default removeAxes;\n","/**\n * Renders the polylines.\n * If no dimensions have been specified, it will attempt to detect quantitative\n * dimensions based on the first data entry. If scales haven't been set, it will\n * autoscale based on the extent for each dimension.\n *\n * @param config\n * @param pc\n * @param events\n * @returns {Function}\n */\nconst render = (config, pc, events) =>\n  function() {\n    // try to autodetect dimensions and create scales\n    if (!Object.keys(config.dimensions).length) {\n      pc.detectDimensions();\n    }\n    pc.autoscale();\n\n    pc.render[config.mode]();\n\n    events.call('render', this);\n    return this;\n  };\n\nexport default render;\n","import colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathForeground = (config, ctx, position) => (d, i) => {\n  ctx.foreground.strokeStyle = functor(config.color)(d, i);\n  return colorPath(config, position, d, ctx.foreground);\n};\n\nconst renderDefault = (config, pc, ctx, position) => () => {\n  pc.clear('foreground');\n  pc.clear('highlight');\n\n  pc.renderBrushed.default();\n\n  config.data.forEach(pathForeground(config, ctx, position));\n};\n\nconst renderDefaultQueue = (config, pc, foregroundQueue) => () => {\n  pc.renderBrushed.queue();\n  foregroundQueue(config.data);\n};\n\nexport default renderDefault;\n\nexport { pathForeground, renderDefaultQueue };\n","import toType from './toType';\n\n// try to coerce to number before returning type\nconst toTypeCoerceNumbers = v =>\n  parseFloat(v) == v && v != null ? 'number' : toType(v);\n\nexport default toTypeCoerceNumbers;\n","import toTypeCoerceNumbers from './toTypeCoerceNumbers';\n\n// attempt to determine types of each dimension based on first row of data\nconst detectDimensionTypes = data =>\n  Object.keys(data[0]).reduce((acc, cur) => {\n    const key = isNaN(Number(cur)) ? cur : parseInt(cur);\n    acc[key] = toTypeCoerceNumbers(data[0][cur]);\n\n    return acc;\n  }, {});\n\nexport default detectDimensionTypes;\n","import { ascending } from 'd3-array';\n\nconst getOrderedDimensionKeys = config => () =>\n  Object.keys(config.dimensions).sort((x, y) =>\n    ascending(config.dimensions[x].index, config.dimensions[y].index)\n  );\n\nexport default getOrderedDimensionKeys;\n","const interactive = flags =>\n  function() {\n    flags.interactive = true;\n    return this;\n  };\n\nexport default interactive;\n","const shadows = (flags, pc) =>\n  function() {\n    flags.shadows = true;\n    pc.alphaOnBrushed(0.1);\n    pc.render();\n    return this;\n  };\n\nexport default shadows;\n","import { select } from 'd3-selection';\n\n/**\n * Setup a new parallel coordinates chart.\n *\n * @param config\n * @param canvas\n * @param ctx\n * @returns {pc} a parcoords closure\n */\nconst init = (config, canvas, ctx) => {\n  /**\n   * Create the chart within a container. The selector can also be a d3 selection.\n   *\n   * @param selection a d3 selection\n   * @returns {pc} instance for chained api\n   */\n  const pc = function(selection) {\n    selection = pc.selection = select(selection);\n\n    config.width = selection.node().clientWidth;\n    config.height = selection.node().clientHeight;\n    // canvas data layers\n    ['marks', 'foreground', 'brushed', 'highlight'].forEach(layer => {\n      canvas[layer] = selection\n        .append('canvas')\n        .attr('class', layer)\n        .node();\n      ctx[layer] = canvas[layer].getContext('2d');\n    });\n\n    // svg tick and brush layers\n    pc.svg = selection\n      .append('svg')\n      .attr('width', config.width)\n      .attr('height', config.height)\n      .style('font', '14px sans-serif')\n      .style('position', 'absolute')\n\n      .append('svg:g')\n      .attr(\n        'transform',\n        'translate(' + config.margin.left + ',' + config.margin.top + ')'\n      );\n    // for chained api\n    return pc;\n  };\n\n  // for partial-application style programming\n  return pc;\n};\n\nexport default init;\n","const flip = config =>\n  function(d) {\n    //__.dimensions[d].yscale.domain().reverse();                               // does not work\n    config.dimensions[d].yscale.domain(\n      config.dimensions[d].yscale.domain().reverse()\n    ); // works\n\n    return this;\n  };\n\nexport default flip;\n","const detectDimensions = pc =>\n  function() {\n    pc.dimensions(pc.applyDimensionDefaults());\n    return this;\n  };\n\nexport default detectDimensions;\n","const scale = config =>\n  function(d, domain) {\n    config.dimensions[d].yscale.domain(domain);\n\n    return this;\n  };\n\nexport default scale;\n","const DefaultConfig = {\n  data: [],\n  highlighted: [],\n  dimensions: {},\n  dimensionTitleRotation: 0,\n  brushes: [],\n  brushed: false,\n  brushedColor: null,\n  alphaOnBrushed: 0.0,\n  mode: 'default',\n  rate: 20,\n  width: 600,\n  height: 300,\n  margin: { top: 24, right: 20, bottom: 12, left: 20 },\n  nullValueSeparator: 'undefined', // set to \"top\" or \"bottom\"\n  nullValueSeparatorPadding: { top: 8, right: 0, bottom: 8, left: 0 },\n  color: '#069',\n  composite: 'source-over',\n  alpha: 0.7,\n  bundlingStrength: 0.5,\n  bundleDimension: null,\n  smoothness: 0.0,\n  showControlPoints: false,\n  hideAxis: [],\n  flipAxes: [],\n  animationTime: 1100, // How long it takes to flip the axis when you double click\n  rotateLabels: false,\n};\n\nexport default DefaultConfig;\n","import { entries, keys } from 'd3-collection';\nimport { axisLeft } from 'd3-axis';\nimport { dispatch } from 'd3-dispatch';\nimport { scalePoint } from 'd3-scale';\n\nimport DefaultConfig from './defaultConfig';\n\nconst initState = userConfig => {\n  const config = Object.assign({}, DefaultConfig, userConfig);\n\n  if (userConfig && userConfig.dimensionTitles) {\n    console.warn(\n      'dimensionTitles passed in userConfig is deprecated. Add title to dimension object.'\n    );\n    entries(userConfig.dimensionTitles).forEach(d => {\n      if (config.dimensions[d.key]) {\n        config.dimensions[d.key].title = config.dimensions[d.key].title\n          ? config.dimensions[d.key].title\n          : d.value;\n      } else {\n        config.dimensions[d.key] = {\n          title: d.value,\n        };\n      }\n    });\n  }\n\n  const eventTypes = [\n    'render',\n    'resize',\n    'highlight',\n    'brush',\n    'brushend',\n    'brushstart',\n    'axesreorder',\n  ].concat(keys(config));\n\n  const events = dispatch.apply(this, eventTypes),\n    flags = {\n      brushable: false,\n      reorderable: false,\n      axes: false,\n      interactive: false,\n      debug: false,\n    },\n    xscale = scalePoint(),\n    dragging = {},\n    axis = axisLeft().ticks(5),\n    ctx = {},\n    canvas = {};\n\n  const brush = {\n    modes: {\n      None: {\n        install: function(pc) {}, // Nothing to be done.\n        uninstall: function(pc) {}, // Nothing to be done.\n        selected: function() {\n          return [];\n        }, // Nothing to return\n        brushState: function() {\n          return {};\n        },\n      },\n    },\n    mode: 'None',\n    predicate: 'AND',\n    currentMode: function() {\n      return this.modes[this.mode];\n    },\n  };\n\n  return {\n    config,\n    events,\n    eventTypes,\n    flags,\n    xscale,\n    dragging,\n    axis,\n    ctx,\n    canvas,\n    brush,\n  };\n};\n\nexport default initState;\n","const computeClusterCentroids = (config, d) => {\n  const clusterCentroids = new Map();\n  const clusterCounts = new Map();\n  // determine clusterCounts\n  config.data.forEach(function(row) {\n    let scaled = config.dimensions[d].yscale(row[d]);\n    if (!clusterCounts.has(scaled)) {\n      clusterCounts.set(scaled, 0);\n    }\n    let count = clusterCounts.get(scaled);\n    clusterCounts.set(scaled, count + 1);\n  });\n\n  config.data.forEach(function(row) {\n    Object.keys(config.dimensions).map(p => {\n      let scaled = config.dimensions[d].yscale(row[d]);\n      if (!clusterCentroids.has(scaled)) {\n        const _map = new Map();\n        clusterCentroids.set(scaled, _map);\n      }\n      if (!clusterCentroids.get(scaled).has(p)) {\n        clusterCentroids.get(scaled).set(p, 0);\n      }\n      let value = clusterCentroids.get(scaled).get(p);\n      value += config.dimensions[p].yscale(row[p]) / clusterCounts.get(scaled);\n      clusterCentroids.get(scaled).set(p, value);\n    });\n  });\n\n  return clusterCentroids;\n};\n\nexport default computeClusterCentroids;\n","// side effects for setters\nimport { dispatch } from 'd3-dispatch';\nimport computeClusterCentroids from '../util/computeClusterCentroids';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\n\nconst without = (arr, items) => {\n  items.forEach(el => {\n    delete arr[el];\n  });\n  return arr;\n};\n\nconst sideEffects = (\n  config,\n  ctx,\n  pc,\n  xscale,\n  flags,\n  brushedQueue,\n  foregroundQueue\n) =>\n  dispatch\n    .apply(this, Object.keys(config))\n    .on('composite', d => {\n      ctx.foreground.globalCompositeOperation = d.value;\n      ctx.brushed.globalCompositeOperation = d.value;\n    })\n    .on('alpha', d => {\n      ctx.foreground.globalAlpha = d.value;\n      ctx.brushed.globalAlpha = d.value;\n    })\n    .on('brushedColor', d => {\n      ctx.brushed.strokeStyle = d.value;\n    })\n    .on('width', d => pc.resize())\n    .on('height', d => pc.resize())\n    .on('margin', d => pc.resize())\n    .on('rate', d => {\n      brushedQueue.rate(d.value);\n      foregroundQueue.rate(d.value);\n    })\n    .on('dimensions', d => {\n      config.dimensions = pc.applyDimensionDefaults(Object.keys(d.value));\n      xscale.domain(pc.getOrderedDimensionKeys());\n      pc.sortDimensions();\n      if (flags.interactive) {\n        pc.render().updateAxes();\n      }\n    })\n    .on('bundleDimension', d => {\n      if (!Object.keys(config.dimensions).length) pc.detectDimensions();\n      pc.autoscale();\n      if (typeof d.value === 'number') {\n        if (d.value < Object.keys(config.dimensions).length) {\n          config.bundleDimension = config.dimensions[d.value];\n        } else if (d.value < config.hideAxis.length) {\n          config.bundleDimension = config.hideAxis[d.value];\n        }\n      } else {\n        config.bundleDimension = d.value;\n      }\n\n      config.clusterCentroids = computeClusterCentroids(\n        config,\n        config.bundleDimension\n      );\n      if (flags.interactive) {\n        pc.render();\n      }\n    })\n    .on('hideAxis', d => {\n      pc.dimensions(pc.applyDimensionDefaults());\n      pc.dimensions(without(config.dimensions, d.value));\n    })\n    .on('flipAxes', d => {\n      if (d.value && d.value.length) {\n        d.value.forEach(function(axis) {\n          flipAxisAndUpdatePCP(config, pc, axis);\n        });\n        pc.updateAxes(0);\n      }\n    });\n\nexport default sideEffects;\n","const getset = (obj, state, events, side_effects, pc) => {\n  Object.keys(state).forEach(function(key) {\n    obj[key] = function(x) {\n      if (!arguments.length) {\n        return state[key];\n      }\n      if (\n        key === 'dimensions' &&\n        Object.prototype.toString.call(x) === '[object Array]'\n      ) {\n        console.warn('pc.dimensions([]) is deprecated, use pc.dimensions({})');\n        x = obj.applyDimensionDefaults(x);\n      }\n      let old = state[key];\n      state[key] = x;\n      side_effects.call(key, obj, { value: x, previous: old });\n      events.call(key, obj, { value: x, previous: old });\n      return obj;\n    };\n  });\n};\n\nexport default getset;\n","// side effects for setters\nimport sideEffects from './state/sideEffects';\nimport getset from './util/getset';\n\nconst d3_rebind = (target, source, method) =>\n  function() {\n    const value = method.apply(source, arguments);\n    return value === source ? target : value;\n  };\n\nconst _rebind = (target, source, method) => {\n  target[method] = d3_rebind(target, source, source[method]);\n  return target;\n};\n\nconst bindEvents = (\n  __,\n  ctx,\n  pc,\n  xscale,\n  flags,\n  brushedQueue,\n  foregroundQueue,\n  events,\n  axis\n) => {\n  const side_effects = sideEffects(\n    __,\n    ctx,\n    pc,\n    xscale,\n    flags,\n    brushedQueue,\n    foregroundQueue\n  );\n\n  // create getter/setters\n  getset(pc, __, events, side_effects, pc);\n\n  // expose events\n  // getter/setter with event firing\n  _rebind(pc, events, 'on');\n\n  _rebind(\n    pc,\n    axis,\n    'ticks',\n    'orient',\n    'tickValues',\n    'tickSubdivide',\n    'tickSize',\n    'tickPadding',\n    'tickFormat'\n  );\n};\n\nexport default bindEvents;\n","// misc\nimport renderQueue from './util/renderQueue';\nimport w from './util/width';\n\n// brush\nimport install1DAxes from './brush/1d';\nimport install1DAxesMulti from './brush/1d-multi';\nimport install2DStrums from './brush/strums';\nimport installAngularBrush from './brush/angular';\n\n// api\nimport intersection from './api/intersection';\nimport mergeParcoords from './api/mergeParcoords';\nimport selected from './api/selected';\nimport brushMode from './api/brushMode';\nimport updateAxes from './api/updateAxes';\nimport autoscale from './api/autoscale';\nimport brushable from './api/brushable';\nimport commonScale from './api/commonScale';\nimport computeRealCentroids from './api/computeRealCentroids';\nimport applyDimensionDefaults from './api/applyDimensionDefaults';\nimport createAxes from './api/createAxes';\nimport axisDots from './api/axisDots';\nimport applyAxisConfig from './api/applyAxisConfig';\nimport reorderable from './api/reorderable';\nimport resize from './api/resize';\nimport reorder from './api/reorder';\nimport sortDimensions from './api/sortDimensions';\nimport sortDimensionsByRowData from './api/sortDimensionsByRowData';\nimport clear from './api/clear';\nimport {\n  pathBrushed,\n  renderBrushed,\n  renderBrushedDefault,\n  renderBrushedQueue,\n} from './api/renderBrushed';\nimport brushReset from './api/brushReset';\nimport toType from './api/toType';\nimport toString from './api/toString';\nimport adjacentPairs from './api/adjacentPairs';\nimport highlight from './api/highlight';\nimport unhighlight from './api/unhighlight';\nimport removeAxes from './api/removeAxes';\nimport render from './api/render';\nimport renderDefault, {\n  pathForeground,\n  renderDefaultQueue,\n} from './api/renderDefault';\nimport toTypeCoerceNumbers from './api/toTypeCoerceNumbers';\nimport detectDimensionTypes from './api/detectDimensionTypes';\nimport getOrderedDimensionKeys from './api/getOrderedDimensionKeys';\nimport interactive from './api/interactive';\nimport shadows from './api/shadows';\nimport init from './api/init';\nimport flip from './api/flip';\nimport detectDimensions from './api/detectDimensions';\nimport scale from './api/scale';\n\nimport { version } from '../package.json';\nimport initState from './state';\nimport bindEvents from './bindEvents';\n\n//css\nimport './parallel-coordinates.css';\n\nconst ParCoords = userConfig => {\n  const state = initState(userConfig);\n  const {\n    config,\n    events,\n    flags,\n    xscale,\n    dragging,\n    axis,\n    ctx,\n    canvas,\n    brush,\n  } = state;\n\n  const pc = init(config, canvas, ctx);\n\n  const position = d => {\n    if (xscale.range().length === 0) {\n      xscale.range([0, w(config)], 1);\n    }\n    return dragging[d] == null ? xscale(d) : dragging[d];\n  };\n\n  const brushedQueue = renderQueue(pathBrushed(config, ctx, position))\n    .rate(50)\n    .clear(() => pc.clear('brushed'));\n\n  const foregroundQueue = renderQueue(pathForeground(config, ctx, position))\n    .rate(50)\n    .clear(function() {\n      pc.clear('foreground');\n      pc.clear('highlight');\n    });\n\n  bindEvents(\n    config,\n    ctx,\n    pc,\n    xscale,\n    flags,\n    brushedQueue,\n    foregroundQueue,\n    events,\n    axis\n  );\n\n  // expose the state of the chart\n  pc.state = config;\n  pc.flags = flags;\n\n  pc.autoscale = autoscale(config, pc, xscale, ctx);\n  pc.scale = scale(config);\n  pc.flip = flip(config);\n  pc.commonScale = commonScale(config, pc);\n  pc.detectDimensions = detectDimensions(pc);\n  // attempt to determine types of each dimension based on first row of data\n  pc.detectDimensionTypes = detectDimensionTypes;\n  pc.applyDimensionDefaults = applyDimensionDefaults(config, pc);\n  pc.getOrderedDimensionKeys = getOrderedDimensionKeys(config);\n\n  //Renders the polylines.\n  pc.render = render(config, pc, events);\n  pc.renderBrushed = renderBrushed(config, pc, events);\n  pc.render.default = renderDefault(config, pc, ctx, position);\n  pc.render.queue = renderDefaultQueue(config, pc, foregroundQueue);\n  pc.renderBrushed.default = renderBrushedDefault(\n    config,\n    ctx,\n    position,\n    pc,\n    brush\n  );\n  pc.renderBrushed.queue = renderBrushedQueue(config, brush, brushedQueue);\n\n  pc.compute_real_centroids = computeRealCentroids(config.dimensions, position);\n  pc.shadows = shadows(flags, pc);\n  pc.axisDots = axisDots(config, pc, position);\n  pc.clear = clear(config, pc, ctx, brush);\n  pc.createAxes = createAxes(config, pc, xscale, flags, axis);\n  pc.removeAxes = removeAxes(pc);\n  pc.updateAxes = updateAxes(config, pc, position, axis, flags);\n  pc.applyAxisConfig = applyAxisConfig;\n  pc.brushable = brushable(config, pc, flags);\n  pc.brushReset = brushReset(config);\n  pc.selected = selected(config);\n  pc.reorderable = reorderable(config, pc, xscale, position, dragging, flags);\n\n  // Reorder dimensions, such that the highest value (visually) is on the left and\n  // the lowest on the right. Visual values are determined by the data values in\n  // the given row.\n  pc.reorder = reorder(config, pc, xscale);\n  pc.sortDimensionsByRowData = sortDimensionsByRowData(config);\n  pc.sortDimensions = sortDimensions(config, position);\n\n  // pairs of adjacent dimensions\n  pc.adjacent_pairs = adjacentPairs;\n  pc.interactive = interactive(flags);\n\n  // expose internal state\n  pc.xscale = xscale;\n  pc.ctx = ctx;\n  pc.canvas = canvas;\n  pc.g = () => pc._g;\n\n  // rescale for height, width and margins\n  // TODO currently assumes chart is brushable, and destroys old brushes\n  pc.resize = resize(config, pc, flags, events);\n\n  // highlight an array of data\n  pc.highlight = highlight(config, pc, canvas, events, ctx, position);\n  // clear highlighting\n  pc.unhighlight = unhighlight(config, pc, canvas);\n\n  // calculate 2d intersection of line a->b with line c->d\n  // points are objects with x and y properties\n  pc.intersection = intersection;\n\n  // Merges the canvases and SVG elements into one canvas element which is then passed into the callback\n  // (so you can choose to save it to disk, etc.)\n  pc.mergeParcoords = mergeParcoords(pc);\n  pc.brushModes = () => Object.getOwnPropertyNames(brush.modes);\n  pc.brushMode = brushMode(brush, config, pc);\n\n  // install brushes\n  install1DAxes(brush, config, pc, events);\n  install2DStrums(brush, config, pc, events, xscale);\n  installAngularBrush(brush, config, pc, events, xscale);\n  install1DAxesMulti(brush, config, pc, events);\n\n  pc.version = version;\n  // this descriptive text should live with other introspective methods\n  pc.toString = toString(config);\n  pc.toType = toType;\n  // try to coerce to number before returning type\n  pc.toTypeCoerceNumbers = toTypeCoerceNumbers;\n\n  return pc;\n};\n\nexport default ParCoords;\n"],"names":["renderQueue","func","_queue","rq","data","render","valid","invalidate","doFrame","chunk","splice","_rate","map","slice","add","concat","rate","value","arguments","length","remaining","clear","_invalidate","w","config","width","margin","right","left","brushExtents","state","pc","brushes","brushNodes","extents","Object","keys","dimensions","reduce","acc","cur","brush","undefined","brushSelection","extent","brushSelections","g","selectAll","each","d","select","forEach","dim","yExtent","yscale","call","move","reverse","renderBrushed","brushReset","dimension","brushed","event","selected","brushGroup","is_brushed","p","actives","filter","_brushRange","invert","within","bandwidth","predicate","every","type","some","Error","brushPredicate","brushUpdated","events","newSelection","brushFor","axis","_selector","brushRangeMax","range","_brush","brushY","on","sourceEvent","stopPropagation","node","install","createAxes","append","attr","style","uninstall","remove","BrushState","install1DAxes","assign","modes","drawBrushes","selector","id","enter","insert","indexOf","b","brushObject","exit","pos","axisBrushes","i","document","getElementById","dimExt","e","newBrush","push","lastBrushID","lastBrush","selection","yExtents","_bs","j","f","k","ext","axisBrush","_this","install1DMultiAxes","strumRect","containmentTest","strum","p1","minX","p2","m1","b1","m2","b2","x","y","y1","y2","Math","min","max","crossesStrum","strums","test","d1","dims","d2","point","ids","getOwnPropertyNames","isNaN","crossTest","removeStrum","active","svg","onDragEnd","drawStrum","activePoint","_svg","points","_line","circles","_drag","drag","ev","maxX","minY","maxY","onDrag","top","h","height","bottom","dimensionsForPoint","xscale","getOrderedDimensionKeys","onDragStart","mouse","consecutive","first","second","install2DStrums","hypothenuse","a","sqrt","signedAngle","angle","PI","startAngle","arc","endAngle","tmp","arcs","c","asin","outerRadius","p3","_path","d3Arc","innerRadius","sAngle","uAngle","installAngularBrush","intersection","mergeParcoords","devicePixelRatio","window","mergedCanvas","createElement","canvas","foreground","clientWidth","clientHeight","context","getContext","fillStyle","fillRect","key","drawImage","DOMURL","URL","webkitURL","serializer","XMLSerializer","svgStr","serializeToString","src","btoa","img","Image","onload","callback","ranges","nodes","__data__","values","ranger","domain","includes","flipAxes","unshift","ii","dimRange","dimDomain","category","categoryIndex","categoryRangeValue","multiBrushData","idx","filtered","z","String","toUpperCase","log","currentMode","brushMode","mode","brushModes","dimensionLabels","title","flipAxisAndUpdatePCP","flip","parentElement","transition","duration","animationTime","scale","rotateLabels","delta","deltaY","dimensionTitleRotation","preventDefault","updateAxes","position","flags","g_data","axisElement","applyAxisConfig","text","brushable","reorderable","getRange","nullValueSeparator","nullValueSeparatorPadding","autoscale","ctx","defaultScales","_extent","getTime","scalePoint","tempDate","val","scaleTime","scaleLinear","counts","sort","tempArr","pop","categoricalRange","addBy","scaleOrdinal","strokeStyle","color","lineWidth","globalCompositeOperation","composite","globalAlpha","alpha","brushedColor","highlight","ctrlKey","html","outerHTML","replace","dat","parentNode","commonScale","global","t","detectDimensions","scales","bundleDimension","computeRealCentroids","row","applyDimensionDefaults","types","detectDimensionTypes","orient","ticks","innerTickSize","outerTickSize","tickPadding","index","removeAxes","_g","axes","axisDots","r","_r","marks","pow","beginPath","stroke","fill","axisCfg","axisLeft","axisRight","axisTop","axisBottom","tickValues","tickSizeInner","tickSizeOuter","tickFormat","dragging","__origin__","dx","sortDimensions","resize","reorder","firstDim","sortDimensionsByRowData","rowdata","reordered","highlighted","unhighlight","copy","positionSortedKeys","pixelDifference","localeCompare","isBrushed","object","brushState","hasOwnProperty","layer","clearRect","alphaOnBrushed","computeCentroids","centroids","cols","$V","cx","cy","leftCentroid","clusterCentroids","get","rightCentroid","centroid","bundlingStrength","computeControlPoints","smoothness","cps","col","mid","diff","subtract","singleCurve","moveTo","showControlPoints","bezierCurveTo","getNullPosition","singlePath","lineTo","colorPath","_functor","v","pathBrushed","functor","renderBrushedDefault","renderBrushedQueue","brushedQueue","brushesToKeep","toType","toString","match","toLowerCase","adjacentPairs","ret","arr","pathHighlight","classed","pathForeground","renderDefault","default","renderDefaultQueue","foregroundQueue","queue","toTypeCoerceNumbers","parseFloat","Number","parseInt","ascending","interactive","shadows","init","DefaultConfig","initState","userConfig","dimensionTitles","warn","eventTypes","dispatch","apply","computeClusterCentroids","Map","clusterCounts","scaled","has","set","count","_map","without","items","el","sideEffects","hideAxis","getset","obj","side_effects","prototype","old","previous","d3_rebind","target","source","method","_rebind","bindEvents","__","ParCoords","compute_real_centroids","adjacent_pairs","version"],"mappings":"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"}