{"version":3,"file":"parcoords.mjs","sources":["../src/util/renderQueue.js","../src/util/width.js","../src/brush/1d/brushExtents.js","../src/brush/1d/brushReset.js","../src/brush/1d/selected.js","../src/brush/1d/brushFor.js","../src/brush/1d/install.js","../src/brush/1d/uninstall.js","../src/brush/1d/index.js","../src/util/height.js","../src/brush/install2DStrums.js","../src/brush/installAngularBrush.js","../src/api/intersection.js","../src/api/mergeParcoords.js","../src/api/selected.js","../src/api/brushMode.js","../src/util/dimensionLabels.js","../src/util/flipAxisAndUpdatePCP.js","../src/util/rotateLabels.js","../src/api/updateAxes.js","../src/util/getRange.js","../src/api/autoscale.js","../src/api/brushable.js","../src/api/commonScale.js","../src/api/computeRealCentroids.js","../src/api/applyDimensionDefaults.js","../src/api/createAxes.js","../src/api/axisDots.js","../src/api/applyAxisConfig.js","../src/api/reorderable.js","../src/api/resize.js","../src/api/reorder.js","../src/api/sortDimensions.js","../src/api/sortDimensionsByRowData.js","../src/util/isBrushed.js","../src/api/clear.js","../src/util/computeCentroids.js","../src/util/computeControlPoints.js","../src/util/colorPath.js","../src/util/functor.js","../src/api/renderBrushed.js","../src/api/brushReset.js","../src/api/toType.js","../src/api/toString.js","../src/api/adjacentPairs.js","../src/api/highlight.js","../src/api/unhighlight.js","../src/api/removeAxes.js","../src/api/render.js","../src/api/renderDefault.js","../src/api/toTypeCoerceNumbers.js","../src/api/detectDimensionTypes.js","../src/api/getOrderedDimensionKeys.js","../src/api/interactive.js","../src/api/shadows.js","../src/api/init.js","../src/api/flip.js","../src/api/detectDimensions.js","../src/api/scale.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObject.js","../src/state/defaultConfig.js","../src/state/index.js","../src/util/computeClusterCentroids.js","../src/state/sideEffects.js","../src/util/getset.js","../src/bindEvents.js","../src/index.js"],"sourcesContent":["import 'requestanimationframe';\n\nconst renderQueue = function(func) {\n  let _queue = [], // data to be rendered\n    _rate = 1000, // number of calls per frame\n    _invalidate = function() {}, // invalidate last render queue\n    _clear = function() {}; // clearing function\n\n  let rq = function(data) {\n    if (data) rq.data(data);\n    _invalidate();\n    _clear();\n    rq.render();\n  };\n\n  rq.render = function() {\n    let valid = true;\n    _invalidate = rq.invalidate = function() {\n      valid = false;\n    };\n\n    function doFrame() {\n      if (!valid) return true;\n      let chunk = _queue.splice(0, _rate);\n      chunk.map(func);\n      requestAnimationFrame(doFrame);\n    }\n\n    doFrame();\n  };\n\n  rq.data = function(data) {\n    _invalidate();\n    _queue = data.slice(0); // creates a copy of the data\n    return rq;\n  };\n\n  rq.add = function(data) {\n    _queue = _queue.concat(data);\n  };\n\n  rq.rate = function(value) {\n    if (!arguments.length) return _rate;\n    _rate = value;\n    return rq;\n  };\n\n  rq.remaining = function() {\n    return _queue.length;\n  };\n\n  // clear the canvas\n  rq.clear = function(func) {\n    if (!arguments.length) {\n      _clear();\n      return rq;\n    }\n    _clear = func;\n    return rq;\n  };\n\n  rq.invalidate = _invalidate;\n\n  return rq;\n};\n\nexport default renderQueue;\n","const w = config => config.width - config.margin.right - config.margin.left;\n\nexport default w;\n","import { keys } from 'd3-collection';\nimport { brushSelection } from 'd3-brush';\n\nconst brushExtents = (state, config, pc) => extents => {\n  const { brushes } = state;\n\n  if (typeof extents === 'undefined') {\n    return keys(config.dimensions).reduce((acc, cur) => {\n      const brush = brushes[cur];\n      //todo: brush check\n      if (brush !== undefined && brushSelection(brushNodes[cur]) !== null) {\n        acc[d] = brush.extent();\n      }\n\n      return acc;\n    }, {});\n  } else {\n    //first get all the brush selections\n    const brushSelections = pc\n      .g()\n      .selectAll('.brush')\n      .reduce(function(acc, cur) {\n        acc[cur] = select(this);\n        return acc;\n      });\n\n    // loop over each dimension and update appropriately (if it was passed in through extents)\n    keys(config.dimensions).forEach(function(d) {\n      if (extents[d] === undefined) {\n        return;\n      }\n\n      const brush = brushes[d];\n      if (brush !== undefined) {\n        //update the extent\n        brush.extent(extents[d]);\n\n        //redraw the brush\n        brushSelections[d]\n          .transition()\n          .duration(0)\n          .call(brush);\n\n        //fire some events\n        brush.event(brushSelections[d]);\n      }\n    });\n\n    //redraw the chart\n    pc.renderBrushed();\n\n    return pc;\n  }\n};\n\nexport default brushExtents;\n","import { select } from 'd3-selection';\n\nconst brushReset = (state, config, pc) => dimension => {\n  const { brushes } = state;\n\n  if (dimension === undefined) {\n    config.brushed = false;\n    if (pc.g() !== undefined && pc.g() !== null) {\n      pc\n        .g()\n        .selectAll('.brush')\n        .each(function(d) {\n          select(this).call(brushes[d].move, null);\n        });\n      pc.renderBrushed();\n    }\n  } else {\n    if (pc.g() !== undefined && pc.g() !== null) {\n      pc\n        .g()\n        .selectAll('.brush')\n        .each(function(d) {\n          if (d != dimension) return;\n          select(this).call(brushes[d].move, null);\n          brushes[d].event(select(this));\n        });\n      pc.renderBrushed();\n    }\n  }\n  return this;\n};\n\nexport default brushReset;\n","import { brushSelection } from 'd3-brush';\n//https://github.com/d3/d3-brush/issues/10\nimport { keys } from 'd3-collection';\n\n// data within extents\nconst selected = (state, config, brushGroup) => () => {\n  const { brushNodes } = state;\n  const is_brushed = p => brushSelection(brushNodes[p]) !== null;\n\n  const actives = keys(config.dimensions).filter(is_brushed);\n  const extents = actives.map(p => {\n    const _brushRange = brushSelection(brushNodes[p]);\n\n    if (typeof config.dimensions[p].yscale.invert === 'function') {\n      return [\n        config.dimensions[p].yscale.invert(_brushRange[1]),\n        config.dimensions[p].yscale.invert(_brushRange[0]),\n      ];\n    } else {\n      return _brushRange;\n    }\n  });\n  // We don't want to return the full data set when there are no axes brushed.\n  // Actually, when there are no axes brushed, by definition, no items are\n  // selected. So, let's avoid the filtering and just return false.\n  //if (actives.length === 0) return false;\n\n  // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n  if (actives.length === 0) return config.data;\n\n  // test if within range\n  const within = {\n    date: (d, p, dimension) => {\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        return (\n          extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n          config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n        );\n      } else {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      }\n    },\n    number: (d, p, dimension) => {\n      if (typeof config.dimensions[p].yscale.bandwidth === 'function') {\n        // if it is ordinal\n        return (\n          extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n          config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n        );\n      } else {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      }\n    },\n    string: (d, p, dimension) => {\n      return (\n        extents[dimension][0] <= config.dimensions[p].yscale(d[p]) &&\n        config.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n      );\n    },\n  };\n\n  return config.data.filter(d => {\n    switch (brushGroup.predicate) {\n      case 'AND':\n        return actives.every(function(p, dimension) {\n          return within[config.dimensions[p].type](d, p, dimension);\n        });\n      case 'OR':\n        return actives.some(function(p, dimension) {\n          return within[config.dimensions[p].type](d, p, dimension);\n        });\n      default:\n        throw new Error('Unknown brush predicate ' + config.brushPredicate);\n    }\n  });\n};\n\nexport default selected;\n","import { brushY } from 'd3-brush';\nimport { event } from 'd3-selection';\n\nimport selected from './selected';\n\nconst brushUpdated = (config, pc, events) => newSelection => {\n  config.brushed = newSelection;\n  events.call('brush', pc, config.brushed);\n  pc.renderBrushed();\n};\n\nconst brushFor = (state, config, pc, events, brushGroup) => (\n  axis,\n  _selector\n) => {\n  const brushRangeMax =\n    config.dimensions[axis].type === 'string'\n      ? config.dimensions[axis].yscale.range()[\n          config.dimensions[axis].yscale.range().length - 1\n        ]\n      : config.dimensions[axis].yscale.range()[0];\n\n  const _brush = brushY(_selector).extent([[-15, 0], [15, brushRangeMax]]);\n\n  _brush\n    .on('start', function() {\n      if (event.sourceEvent !== null) {\n        events.call('brushstart', pc, config.brushed);\n        event.sourceEvent.stopPropagation();\n      }\n    })\n    .on('brush', function() {\n      brushUpdated(config, pc, events)(selected(state, config, brushGroup)());\n    })\n    .on('end', function() {\n      brushUpdated(config, pc, events)(selected(state, config, brushGroup)());\n      events.call('brushend', pc, config.brushed);\n    });\n\n  state.brushes[axis] = _brush;\n  state.brushNodes[axis] = _selector.node();\n\n  return _brush;\n};\n\nexport default brushFor;\n","import { select } from 'd3-selection';\nimport brushExtents from './brushExtents';\nimport brushReset from './brushReset';\nimport brushFor from './brushFor';\n\nconst install = (state, config, pc, events, brushGroup) => () => {\n  if (!pc.g()) {\n    pc.createAxes();\n  }\n\n  // Add and store a brush for each axis.\n  const brush = pc\n    .g()\n    .append('svg:g')\n    .attr('class', 'brush')\n    .each(function(d) {\n      select(this).call(\n        brushFor(state, config, pc, events, brushGroup)(d, select(this))\n      );\n    });\n  brush\n    .selectAll('rect')\n    .style('visibility', null)\n    .attr('x', -15)\n    .attr('width', 30);\n\n  brush.selectAll('rect.background').style('fill', 'transparent');\n\n  brush\n    .selectAll('rect.extent')\n    .style('fill', 'rgba(255,255,255,0.25)')\n    .style('stroke', 'rgba(0,0,0,0.6)');\n\n  brush.selectAll('.resize rect').style('fill', 'rgba(0,0,0,0.1)');\n\n  pc.brushExtents = brushExtents(state, config, pc);\n  pc.brushReset = brushReset(state, config, pc);\n  return pc;\n};\n\nexport default install;\n","const uninstall = (state, pc) => ()=> {\n  if (pc.g() !== undefined && pc.g() !== null)\n    pc\n      .g()\n      .selectAll('.brush')\n      .remove();\n\n  state.brushes = {};\n  delete pc.brushExtents;\n  delete pc.brushReset;\n};\n\nexport default uninstall;\n","import brushExtents from './brushExtents';\nimport install from './install';\nimport selected from './selected';\nimport uninstall from './uninstall';\n\nconst BrushState = {\n  brushes: {},\n  brushNodes: {},\n};\n\nconst install1DAxes = (brushGroup, config, pc, events) => {\n  const state = Object.assign({}, BrushState);\n\n  brushGroup.modes['1D-axes'] = {\n    install: install(state, config, pc, events, brushGroup),\n    uninstall: uninstall(state, pc),\n    selected: selected(state, config, brushGroup),\n    brushState: brushExtents(state, pc),\n  };\n};\n\nexport default install1DAxes;\n","const h = config => config.height - config.margin.top - config.margin.bottom;\n\nexport default h;\n","// brush mode: 2D-strums\n// bl.ocks.org/syntagmatic/5441022\nimport { keys } from 'd3-collection';\nimport { drag } from 'd3-drag';\nimport { event, mouse, select } from 'd3-selection';\n\nimport w from '../util/width';\nimport h from '../util/height';\n\nconst install2DStrums = (brushGroup, config, pc, events, xscale) => {\n  let strums = {},\n    strumRect;\n\n  let g;\n\n  function drawStrum(strum, activePoint) {\n    let _svg = pc.selection.select('svg').select('g#strums'),\n      id = strum.dims.i,\n      points = [strum.p1, strum.p2],\n      _line = _svg.selectAll('line#strum-' + id).data([strum]),\n      circles = _svg.selectAll('circle#strum-' + id).data(points),\n      _drag = drag();\n\n    _line\n      .enter()\n      .append('line')\n      .attr('id', 'strum-' + id)\n      .attr('class', 'strum');\n\n    _line\n      .attr('x1', function(d) {\n        return d.p1[0];\n      })\n      .attr('y1', function(d) {\n        return d.p1[1];\n      })\n      .attr('x2', function(d) {\n        return d.p2[0];\n      })\n      .attr('y2', function(d) {\n        return d.p2[1];\n      })\n      .attr('stroke', 'black')\n      .attr('stroke-width', 2);\n\n    _drag\n      .on('drag', function(d, i) {\n        let ev = event;\n        i = i + 1;\n        strum['p' + i][0] = Math.min(\n          Math.max(strum.minX + 1, ev.x),\n          strum.maxX\n        );\n        strum['p' + i][1] = Math.min(Math.max(strum.minY, ev.y), strum.maxY);\n        drawStrum(strum, i - 1);\n      })\n      .on('end', onDragEnd());\n\n    circles\n      .enter()\n      .append('circle')\n      .attr('id', 'strum-' + id)\n      .attr('class', 'strum');\n\n    circles\n      .attr('cx', function(d) {\n        return d[0];\n      })\n      .attr('cy', function(d) {\n        return d[1];\n      })\n      .attr('r', 5)\n      .style('opacity', function(d, i) {\n        return activePoint !== undefined && i === activePoint ? 0.8 : 0;\n      })\n      .on('mouseover', function() {\n        select(this).style('opacity', 0.8);\n      })\n      .on('mouseout', function() {\n        select(this).style('opacity', 0);\n      })\n      .call(_drag);\n  }\n\n  function dimensionsForPoint(p) {\n    let dims = { i: -1, left: undefined, right: undefined };\n    keys(config.dimensions).some(function(dim, i) {\n      if (xscale(dim) < p[0]) {\n        let next = keys(config.dimensions)[\n          pc.getOrderedDimensionKeys().indexOf(dim) + 1\n        ];\n        dims.i = i;\n        dims.left = dim;\n        dims.right = next;\n        return false;\n      }\n      return true;\n    });\n\n    if (dims.left === undefined) {\n      // Event on the left side of the first axis.\n      dims.i = 0;\n      dims.left = pc.getOrderedDimensionKeys()[0];\n      dims.right = pc.getOrderedDimensionKeys()[1];\n    } else if (dims.right === undefined) {\n      // Event on the right side of the last axis\n      dims.i = keys(config.dimensions).length - 1;\n      dims.right = dims.left;\n      dims.left = pc.getOrderedDimensionKeys()[\n        keys(config.dimensions).length - 2\n      ];\n    }\n\n    return dims;\n  }\n\n  function onDragStart() {\n    // First we need to determine between which two axes the sturm was started.\n    // This will determine the freedom of movement, because a strum can\n    // logically only happen between two axes, so no movement outside these axes\n    // should be allowed.\n    return function() {\n      let p = mouse(strumRect.node()),\n        dims,\n        strum;\n\n      p[0] = p[0] - config.margin.left;\n      p[1] = p[1] - config.margin.top;\n\n      (dims = dimensionsForPoint(p)),\n        (strum = {\n          p1: p,\n          dims: dims,\n          minX: xscale(dims.left),\n          maxX: xscale(dims.right),\n          minY: 0,\n          maxY: h(config),\n        });\n\n      strums[dims.i] = strum;\n      strums.active = dims.i;\n\n      // Make sure that the point is within the bounds\n      strum.p1[0] = Math.min(Math.max(strum.minX, p[0]), strum.maxX);\n      strum.p2 = strum.p1.slice();\n    };\n  }\n\n  function onDrag() {\n    return function() {\n      let ev = event,\n        strum = strums[strums.active];\n\n      // Make sure that the point is within the bounds\n      strum.p2[0] = Math.min(\n        Math.max(strum.minX + 1, ev.x - config.margin.left),\n        strum.maxX\n      );\n      strum.p2[1] = Math.min(\n        Math.max(strum.minY, ev.y - config.margin.top),\n        strum.maxY\n      );\n      drawStrum(strum, 1);\n    };\n  }\n\n  function containmentTest(strum, width) {\n    let p1 = [strum.p1[0] - strum.minX, strum.p1[1] - strum.minX],\n      p2 = [strum.p2[0] - strum.minX, strum.p2[1] - strum.minX],\n      m1 = 1 - width / p1[0],\n      b1 = p1[1] * (1 - m1),\n      m2 = 1 - width / p2[0],\n      b2 = p2[1] * (1 - m2);\n\n    // test if point falls between lines\n    return function(p) {\n      let x = p[0],\n        y = p[1],\n        y1 = m1 * x + b1,\n        y2 = m2 * x + b2;\n\n      if (y > Math.min(y1, y2) && y < Math.max(y1, y2)) {\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  function selected() {\n    let ids = Object.getOwnPropertyNames(strums),\n      brushed = config.data;\n\n    // Get the ids of the currently active strums.\n    ids = ids.filter(function(d) {\n      return !isNaN(d);\n    });\n\n    function crossesStrum(d, id) {\n      let strum = strums[id],\n        test = containmentTest(strum, strums.width(id)),\n        d1 = strum.dims.left,\n        d2 = strum.dims.right,\n        y1 = config.dimensions[d1].yscale,\n        y2 = config.dimensions[d2].yscale,\n        point = [y1(d[d1]) - strum.minX, y2(d[d2]) - strum.minX];\n      return test(point);\n    }\n\n    if (ids.length === 0) {\n      return brushed;\n    }\n\n    return brushed.filter(function(d) {\n      switch (brushGroup.predicate) {\n        case 'AND':\n          return ids.every(function(id) {\n            return crossesStrum(d, id);\n          });\n        case 'OR':\n          return ids.some(function(id) {\n            return crossesStrum(d, id);\n          });\n        default:\n          throw new Error('Unknown brush predicate ' + config.brushPredicate);\n      }\n    });\n  }\n\n  function removeStrum() {\n    let strum = strums[strums.active],\n      svg = pc.selection.select('svg').select('g#strums');\n\n    delete strums[strums.active];\n    strums.active = undefined;\n    svg.selectAll('line#strum-' + strum.dims.i).remove();\n    svg.selectAll('circle#strum-' + strum.dims.i).remove();\n  }\n\n  function onDragEnd() {\n    return function() {\n      let brushed = config.data,\n        strum = strums[strums.active];\n\n      // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n      // considered a drag without move. So we have to deal with that case\n      if (strum && strum.p1[0] === strum.p2[0] && strum.p1[1] === strum.p2[1]) {\n        removeStrum(strums);\n      }\n\n      brushed = selected(strums);\n      strums.active = undefined;\n      config.brushed = brushed;\n      pc.renderBrushed();\n      events.call('brushend', pc, config.brushed);\n    };\n  }\n\n  function brushReset(strums) {\n    return function() {\n      let ids = Object.getOwnPropertyNames(strums).filter(function(d) {\n        return !isNaN(d);\n      });\n\n      ids.forEach(function(d) {\n        strums.active = d;\n        removeStrum(strums);\n      });\n      onDragEnd(strums)();\n    };\n  }\n\n  function install() {\n    if (!pc.g()) {\n      pc.createAxes();\n    }\n\n    g = pc.g();\n\n    let _drag = drag();\n\n    // Map of current strums. Strums are stored per segment of the PC. A segment,\n    // being the area between two axes. The left most area is indexed at 0.\n    strums.active = undefined;\n    // Returns the width of the PC segment where currently a strum is being\n    // placed. NOTE: even though they are evenly spaced in our current\n    // implementation, we keep for when non-even spaced segments are supported as\n    // well.\n    strums.width = function(id) {\n      let strum = strums[id];\n\n      if (strum === undefined) {\n        return undefined;\n      }\n\n      return strum.maxX - strum.minX;\n    };\n\n    pc.on('axesreorder.strums', function() {\n      let ids = Object.getOwnPropertyNames(strums).filter(function(d) {\n        return !isNaN(d);\n      });\n\n      // Checks if the first dimension is directly left of the second dimension.\n      function consecutive(first, second) {\n        let length = keys(config.dimensions).length;\n        return keys(config.dimensions).some(function(d, i) {\n          return d === first\n            ? i + i < length && config.dimensions[i + 1] === second\n            : false;\n        });\n      }\n\n      if (ids.length > 0) {\n        // We have some strums, which might need to be removed.\n        ids.forEach(function(d) {\n          let dims = strums[d].dims;\n          strums.active = d;\n          // If the two dimensions of the current strum are not next to each other\n          // any more, than we'll need to remove the strum. Otherwise we keep it.\n          if (!consecutive(dims.left, dims.right)) {\n            removeStrum(strums);\n          }\n        });\n        onDragEnd(strums)();\n      }\n    });\n\n    // Add a new svg group in which we draw the strums.\n    pc.selection\n      .select('svg')\n      .append('g')\n      .attr('id', 'strums')\n      .attr(\n        'transform',\n        'translate(' + config.margin.left + ',' + config.margin.top + ')'\n      );\n\n    // Install the required brushReset function\n    pc.brushReset = brushReset(strums);\n\n    _drag\n      .on('start', onDragStart(strums))\n      .on('drag', onDrag(strums))\n      .on('end', onDragEnd(strums));\n\n    // NOTE: The styling needs to be done here and not in the css. This is because\n    //       for 1D brushing, the canvas layers should not listen to\n    //       pointer-events._.\n    strumRect = pc.selection\n      .select('svg')\n      .insert('rect', 'g#strums')\n      .attr('id', 'strum-events')\n      .attr('x', config.margin.left)\n      .attr('y', config.margin.top)\n      .attr('width', w(config))\n      .attr('height', h(config) + 2)\n      .style('opacity', 0)\n      .call(_drag);\n  }\n\n  brushGroup.modes['2D-strums'] = {\n    install: install,\n    uninstall: function() {\n      pc.selection\n        .select('svg')\n        .select('g#strums')\n        .remove();\n      pc.selection\n        .select('svg')\n        .select('rect#strum-events')\n        .remove();\n      pc.on('axesreorder.strums', undefined);\n      delete pc.brushReset;\n\n      strumRect = undefined;\n    },\n    selected: selected,\n    brushState: function() {\n      return strums;\n    },\n  };\n};\n\nexport default install2DStrums;\n","// brush mode: angular\n// code based on 2D.strums.js\n\nimport { arc as d3Arc } from 'd3-shape';\nimport { keys } from 'd3-collection';\nimport { drag } from 'd3-drag';\nimport { event, mouse, select } from 'd3-selection';\n\nimport w from '../util/width';\nimport h from '../util/height';\n\nconst installAngularBrush = (brushGroup, config, pc, events, xscale) => {\n  let arcs = {},\n    strumRect;\n\n  let g;\n\n  function drawStrum(arc, activePoint) {\n    let svg = pc.selection.select('svg').select('g#arcs'),\n      id = arc.dims.i,\n      points = [arc.p2, arc.p3],\n      _line = svg\n        .selectAll('line#arc-' + id)\n        .data([{ p1: arc.p1, p2: arc.p2 }, { p1: arc.p1, p2: arc.p3 }]),\n      circles = svg.selectAll('circle#arc-' + id).data(points),\n      _drag = drag(),\n      _path = svg.selectAll('path#arc-' + id).data([arc]);\n\n    _path\n      .enter()\n      .append('path')\n      .attr('id', 'arc-' + id)\n      .attr('class', 'arc')\n      .style('fill', 'orange')\n      .style('opacity', 0.5);\n\n    _path\n      .attr('d', arc.arc)\n      .attr('transform', 'translate(' + arc.p1[0] + ',' + arc.p1[1] + ')');\n\n    _line\n      .enter()\n      .append('line')\n      .attr('id', 'arc-' + id)\n      .attr('class', 'arc');\n\n    _line\n      .attr('x1', function(d) {\n        return d.p1[0];\n      })\n      .attr('y1', function(d) {\n        return d.p1[1];\n      })\n      .attr('x2', function(d) {\n        return d.p2[0];\n      })\n      .attr('y2', function(d) {\n        return d.p2[1];\n      })\n      .attr('stroke', 'black')\n      .attr('stroke-width', 2);\n\n    _drag\n      .on('drag', function(d, i) {\n        let ev = event,\n          angle = 0;\n\n        i = i + 2;\n\n        arc['p' + i][0] = Math.min(Math.max(arc.minX + 1, ev.x), arc.maxX);\n        arc['p' + i][1] = Math.min(Math.max(arc.minY, ev.y), arc.maxY);\n\n        angle = i === 3 ? arcs.startAngle(id) : arcs.endAngle(id);\n\n        if (\n          (arc.startAngle < Math.PI &&\n            arc.endAngle < Math.PI &&\n            angle < Math.PI) ||\n          (arc.startAngle >= Math.PI &&\n            arc.endAngle >= Math.PI &&\n            angle >= Math.PI)\n        ) {\n          if (i === 2) {\n            arc.endAngle = angle;\n            arc.arc.endAngle(angle);\n          } else if (i === 3) {\n            arc.startAngle = angle;\n            arc.arc.startAngle(angle);\n          }\n        }\n\n        drawStrum(arc, i - 2);\n      })\n      .on('end', onDragEnd());\n\n    circles\n      .enter()\n      .append('circle')\n      .attr('id', 'arc-' + id)\n      .attr('class', 'arc');\n\n    circles\n      .attr('cx', function(d) {\n        return d[0];\n      })\n      .attr('cy', function(d) {\n        return d[1];\n      })\n      .attr('r', 5)\n      .style('opacity', function(d, i) {\n        return activePoint !== undefined && i === activePoint ? 0.8 : 0;\n      })\n      .on('mouseover', function() {\n        select(this).style('opacity', 0.8);\n      })\n      .on('mouseout', function() {\n        select(this).style('opacity', 0);\n      })\n      .call(_drag);\n  }\n\n  function dimensionsForPoint(p) {\n    let dims = { i: -1, left: undefined, right: undefined };\n    keys(config.dimensions).some(function(dim, i) {\n      if (xscale(dim) < p[0]) {\n        let next = keys(config.dimensions)[\n          pc.getOrderedDimensionKeys().indexOf(dim) + 1\n        ];\n        dims.i = i;\n        dims.left = dim;\n        dims.right = next;\n        return false;\n      }\n      return true;\n    });\n\n    if (dims.left === undefined) {\n      // Event on the left side of the first axis.\n      dims.i = 0;\n      dims.left = pc.getOrderedDimensionKeys()[0];\n      dims.right = pc.getOrderedDimensionKeys()[1];\n    } else if (dims.right === undefined) {\n      // Event on the right side of the last axis\n      dims.i = keys(config.dimensions).length - 1;\n      dims.right = dims.left;\n      dims.left = pc.getOrderedDimensionKeys()[\n        keys(config.dimensions).length - 2\n      ];\n    }\n\n    return dims;\n  }\n\n  function onDragStart() {\n    // First we need to determine between which two axes the arc was started.\n    // This will determine the freedom of movement, because a arc can\n    // logically only happen between two axes, so no movement outside these axes\n    // should be allowed.\n    return function() {\n      let p = mouse(strumRect.node()),\n        dims,\n        arc;\n\n      p[0] = p[0] - config.margin.left;\n      p[1] = p[1] - config.margin.top;\n\n      (dims = dimensionsForPoint(p)),\n        (arc = {\n          p1: p,\n          dims: dims,\n          minX: xscale(dims.left),\n          maxX: xscale(dims.right),\n          minY: 0,\n          maxY: h(config),\n          startAngle: undefined,\n          endAngle: undefined,\n          arc: d3Arc().innerRadius(0),\n        });\n\n      arcs[dims.i] = arc;\n      arcs.active = dims.i;\n\n      // Make sure that the point is within the bounds\n      arc.p1[0] = Math.min(Math.max(arc.minX, p[0]), arc.maxX);\n      arc.p2 = arc.p1.slice();\n      arc.p3 = arc.p1.slice();\n    };\n  }\n\n  function onDrag() {\n    return function() {\n      let ev = event,\n        arc = arcs[arcs.active];\n\n      // Make sure that the point is within the bounds\n      arc.p2[0] = Math.min(\n        Math.max(arc.minX + 1, ev.x - config.margin.left),\n        arc.maxX\n      );\n      arc.p2[1] = Math.min(\n        Math.max(arc.minY, ev.y - config.margin.top),\n        arc.maxY\n      );\n      arc.p3 = arc.p2.slice();\n      // console.log(arcs.angle(arcs.active));\n      // console.log(signedAngle(arcs.unsignedAngle(arcs.active)));\n      drawStrum(arc, 1);\n    };\n  }\n\n  // some helper functions\n  function hypothenuse(a, b) {\n    return Math.sqrt(a * a + b * b);\n  }\n\n  let rad = (function() {\n    let c = Math.PI / 180;\n    return function(angle) {\n      return angle * c;\n    };\n  })();\n\n  let deg = (function() {\n    let c = 180 / Math.PI;\n    return function(angle) {\n      return angle * c;\n    };\n  })();\n\n  // [0, 2*PI] -> [-PI/2, PI/2]\n  let signedAngle = function(angle) {\n    let ret = angle;\n    if (angle > Math.PI) {\n      ret = angle - 1.5 * Math.PI;\n      ret = angle - 1.5 * Math.PI;\n    } else {\n      ret = angle - 0.5 * Math.PI;\n      ret = angle - 0.5 * Math.PI;\n    }\n    return -ret;\n  };\n\n  /**\n   * angles are stored in radians from in [0, 2*PI], where 0 in 12 o'clock.\n   * However, one can only select lines from 0 to PI, so we compute the\n   * 'signed' angle, where 0 is the horizontal line (3 o'clock), and +/- PI/2\n   * are 12 and 6 o'clock respectively.\n   */\n  function containmentTest(arc) {\n    let startAngle = signedAngle(arc.startAngle);\n    let endAngle = signedAngle(arc.endAngle);\n\n    if (startAngle > endAngle) {\n      let tmp = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp;\n    }\n\n    // test if segment angle is contained in angle interval\n    return function(a) {\n      if (a >= startAngle && a <= endAngle) {\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  function selected() {\n    let ids = Object.getOwnPropertyNames(arcs),\n      brushed = config.data;\n\n    // Get the ids of the currently active arcs.\n    ids = ids.filter(function(d) {\n      return !isNaN(d);\n    });\n\n    function crossesStrum(d, id) {\n      let arc = arcs[id],\n        test = containmentTest(arc),\n        d1 = arc.dims.left,\n        d2 = arc.dims.right,\n        y1 = config.dimensions[d1].yscale,\n        y2 = config.dimensions[d2].yscale,\n        a = arcs.width(id),\n        b = y1(d[d1]) - y2(d[d2]),\n        c = hypothenuse(a, b),\n        angle = Math.asin(b / c); // rad in [-PI/2, PI/2]\n      return test(angle);\n    }\n\n    if (ids.length === 0) {\n      return brushed;\n    }\n\n    return brushed.filter(function(d) {\n      switch (brushGroup.predicate) {\n        case 'AND':\n          return ids.every(function(id) {\n            return crossesStrum(d, id);\n          });\n        case 'OR':\n          return ids.some(function(id) {\n            return crossesStrum(d, id);\n          });\n        default:\n          throw new Error('Unknown brush predicate ' + config.brushPredicate);\n      }\n    });\n  }\n\n  function removeStrum() {\n    let arc = arcs[arcs.active],\n      svg = pc.selection.select('svg').select('g#arcs');\n\n    delete arcs[arcs.active];\n    arcs.active = undefined;\n    svg.selectAll('line#arc-' + arc.dims.i).remove();\n    svg.selectAll('circle#arc-' + arc.dims.i).remove();\n    svg.selectAll('path#arc-' + arc.dims.i).remove();\n  }\n\n  function onDragEnd() {\n    return function() {\n      let brushed = config.data,\n        arc = arcs[arcs.active];\n\n      // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n      // considered a drag without move. So we have to deal with that case\n      if (arc && arc.p1[0] === arc.p2[0] && arc.p1[1] === arc.p2[1]) {\n        removeStrum(arcs);\n      }\n\n      if (arc) {\n        let angle = arcs.startAngle(arcs.active);\n\n        arc.startAngle = angle;\n        arc.endAngle = angle;\n        arc.arc\n          .outerRadius(arcs.length(arcs.active))\n          .startAngle(angle)\n          .endAngle(angle);\n      }\n\n      brushed = selected(arcs);\n      arcs.active = undefined;\n      config.brushed = brushed;\n      pc.renderBrushed();\n      events.call('brushend', pc, config.brushed);\n    };\n  }\n\n  function brushReset(arcs) {\n    return function() {\n      let ids = Object.getOwnPropertyNames(arcs).filter(function(d) {\n        return !isNaN(d);\n      });\n\n      ids.forEach(function(d) {\n        arcs.active = d;\n        removeStrum(arcs);\n      });\n      onDragEnd(arcs)();\n    };\n  }\n\n  function install() {\n    if (!pc.g()) {\n      pc.createAxes();\n    }\n\n    g = pc.g();\n\n    let _drag = drag();\n\n    // Map of current arcs. arcs are stored per segment of the PC. A segment,\n    // being the area between two axes. The left most area is indexed at 0.\n    arcs.active = undefined;\n    // Returns the width of the PC segment where currently a arc is being\n    // placed. NOTE: even though they are evenly spaced in our current\n    // implementation, we keep for when non-even spaced segments are supported as\n    // well.\n    arcs.width = function(id) {\n      let arc = arcs[id];\n\n      if (arc === undefined) {\n        return undefined;\n      }\n\n      return arc.maxX - arc.minX;\n    };\n\n    // returns angles in [-PI/2, PI/2]\n    let angle = function(p1, p2) {\n      let a = p1[0] - p2[0],\n        b = p1[1] - p2[1],\n        c = hypothenuse(a, b);\n\n      return Math.asin(b / c);\n    };\n\n    // returns angles in [0, 2 * PI]\n    arcs.endAngle = function(id) {\n      let arc = arcs[id];\n      if (arc === undefined) {\n        return undefined;\n      }\n      let sAngle = angle(arc.p1, arc.p2),\n        uAngle = -sAngle + Math.PI / 2;\n\n      if (arc.p1[0] > arc.p2[0]) {\n        uAngle = 2 * Math.PI - uAngle;\n      }\n\n      return uAngle;\n    };\n\n    arcs.startAngle = function(id) {\n      let arc = arcs[id];\n      if (arc === undefined) {\n        return undefined;\n      }\n\n      let sAngle = angle(arc.p1, arc.p3),\n        uAngle = -sAngle + Math.PI / 2;\n\n      if (arc.p1[0] > arc.p3[0]) {\n        uAngle = 2 * Math.PI - uAngle;\n      }\n\n      return uAngle;\n    };\n\n    arcs.length = function(id) {\n      let arc = arcs[id];\n\n      if (arc === undefined) {\n        return undefined;\n      }\n\n      let a = arc.p1[0] - arc.p2[0],\n        b = arc.p1[1] - arc.p2[1],\n        c = hypothenuse(a, b);\n\n      return c;\n    };\n\n    pc.on('axesreorder.arcs', function() {\n      let ids = Object.getOwnPropertyNames(arcs).filter(function(d) {\n        return !isNaN(d);\n      });\n\n      // Checks if the first dimension is directly left of the second dimension.\n      function consecutive(first, second) {\n        let length = keys(config.dimensions).length;\n        return keys(config.dimensions).some(function(d, i) {\n          return d === first\n            ? i + i < length && config.dimensions[i + 1] === second\n            : false;\n        });\n      }\n\n      if (ids.length > 0) {\n        // We have some arcs, which might need to be removed.\n        ids.forEach(function(d) {\n          let dims = arcs[d].dims;\n          arcs.active = d;\n          // If the two dimensions of the current arc are not next to each other\n          // any more, than we'll need to remove the arc. Otherwise we keep it.\n          if (!consecutive(dims.left, dims.right)) {\n            removeStrum(arcs);\n          }\n        });\n        onDragEnd(arcs)();\n      }\n    });\n\n    // Add a new svg group in which we draw the arcs.\n    pc.selection\n      .select('svg')\n      .append('g')\n      .attr('id', 'arcs')\n      .attr(\n        'transform',\n        'translate(' + config.margin.left + ',' + config.margin.top + ')'\n      );\n\n    // Install the required brushReset function\n    pc.brushReset = brushReset(arcs);\n\n    _drag\n      .on('start', onDragStart(arcs))\n      .on('drag', onDrag(arcs))\n      .on('end', onDragEnd(arcs));\n\n    // NOTE: The styling needs to be done here and not in the css. This is because\n    //       for 1D brushing, the canvas layers should not listen to\n    //       pointer-events._.\n    strumRect = pc.selection\n      .select('svg')\n      .insert('rect', 'g#arcs')\n      .attr('id', 'arc-events')\n      .attr('x', config.margin.left)\n      .attr('y', config.margin.top)\n      .attr('width', w(config))\n      .attr('height', h(config) + 2)\n      .style('opacity', 0)\n      .call(_drag);\n  }\n\n  brushGroup.modes['angular'] = {\n    install: install,\n    uninstall: function() {\n      pc.selection\n        .select('svg')\n        .select('g#arcs')\n        .remove();\n      pc.selection\n        .select('svg')\n        .select('rect#arc-events')\n        .remove();\n      pc.on('axesreorder.arcs', undefined);\n      delete pc.brushReset;\n\n      strumRect = undefined;\n    },\n    selected: selected,\n    brushState: function() {\n      return arcs;\n    },\n  };\n};\n\nexport default installAngularBrush;\n","// calculate 2d intersection of line a->b with line c->d\n// points are objects with x and y properties\nconst intersection = (a, b, c, d) => {\n  return {\n    x:\n      ((a.x * b.y - a.y * b.x) * (c.x - d.x) -\n        (a.x - b.x) * (c.x * d.y - c.y * d.x)) /\n      ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n    y:\n      ((a.x * b.y - a.y * b.x) * (c.y - d.y) -\n        (a.y - b.y) * (c.x * d.y - c.y * d.x)) /\n      ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n  };\n};\n\nexport default intersection;\n","// Merges the canvases and SVG elements into one canvas element which is then passed into the callback\n// (so you can choose to save it to disk, etc.)\nconst mergeParcoords = pc => callback => {\n  // Retina display, etc.\n  const devicePixelRatio = window.devicePixelRatio || 1;\n\n  // Create a canvas element to store the merged canvases\n  const mergedCanvas = document.createElement('canvas');\n  mergedCanvas.width = pc.canvas.foreground.clientWidth * devicePixelRatio;\n  mergedCanvas.height =\n    (pc.canvas.foreground.clientHeight + 30) * devicePixelRatio;\n  mergedCanvas.style.width = mergedCanvas.width / devicePixelRatio + 'px';\n  mergedCanvas.style.height = mergedCanvas.height / devicePixelRatio + 'px';\n\n  // Give the canvas a white background\n  const context = mergedCanvas.getContext('2d');\n  context.fillStyle = '#ffffff';\n  context.fillRect(0, 0, mergedCanvas.width, mergedCanvas.height);\n\n  // Merge all the canvases\n  for (const key in pc.canvas) {\n    context.drawImage(\n      pc.canvas[key],\n      0,\n      24 * devicePixelRatio,\n      mergedCanvas.width,\n      mergedCanvas.height - 30 * devicePixelRatio\n    );\n  }\n\n  // Add SVG elements to canvas\n  const DOMURL = window.URL || window.webkitURL || window;\n  const serializer = new XMLSerializer();\n  const svgStr = serializer.serializeToString(\n    pc.selection.select('svg').node()\n  );\n\n  // Create a Data URI.\n  const src = 'data:image/svg+xml;base64,' + window.btoa(svgStr);\n  const img = new Image();\n  img.onload = () => {\n    context.drawImage(\n      img,\n      0,\n      0,\n      img.width * devicePixelRatio,\n      img.height * devicePixelRatio\n    );\n    if (typeof callback === 'function') {\n      callback(mergedCanvas);\n    }\n  };\n  img.src = src;\n};\n\nexport default mergeParcoords;\n","import { brushSelection } from 'd3-brush';\nimport { selectAll } from 'd3-selection';\n\nconst selected = config => {\n  let actives = [];\n  let extents = [];\n  let ranges = {};\n  //get brush selections from each node, convert to actual values\n  //invert order of values in array to comply with the parcoords architecture\n  if (config.brushes.length === 0) {\n    let nodes = selectAll('.brush').nodes();\n    for (let k = 0; k < nodes.length; k++) {\n      if (brushSelection(nodes[k]) !== null) {\n        actives.push(nodes[k].__data__);\n        let values = [];\n        let ranger = brushSelection(nodes[k]);\n        if (\n          typeof config.dimensions[nodes[k].__data__].yscale.domain()[0] ===\n          'number'\n        ) {\n          for (let i = 0; i < ranger.length; i++) {\n            if (\n              actives.includes(nodes[k].__data__) &&\n              config.flipAxes.includes(nodes[k].__data__)\n            ) {\n              values.push(\n                config.dimensions[nodes[k].__data__].yscale.invert(ranger[i])\n              );\n            } else if (config.dimensions[nodes[k].__data__].yscale() !== 1) {\n              values.unshift(\n                config.dimensions[nodes[k].__data__].yscale.invert(ranger[i])\n              );\n            }\n          }\n          extents.push(values);\n          for (let ii = 0; ii < extents.length; ii++) {\n            if (extents[ii].length === 0) {\n              extents[ii] = [1, 1];\n            }\n          }\n        } else {\n          ranges[nodes[k].__data__] = brushSelection(nodes[k]);\n          let dimRange = config.dimensions[nodes[k].__data__].yscale.range();\n          let dimDomain = config.dimensions[nodes[k].__data__].yscale.domain();\n          for (let j = 0; j < dimRange.length; j++) {\n            if (\n              dimRange[j] >= ranger[0] &&\n              dimRange[j] <= ranger[1] &&\n              actives.includes(nodes[k].__data__) &&\n              config.flipAxes.includes(nodes[k].__data__)\n            ) {\n              values.push(dimRange[j]);\n            } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n              values.unshift(dimRange[j]);\n            }\n          }\n          extents.push(values);\n          for (let ii = 0; ii < extents.length; ii++) {\n            if (extents[ii].length === 0) {\n              extents[ii] = [1, 1];\n            }\n          }\n        }\n      }\n    }\n    // test if within range\n    const within = {\n      date: function(d, p, dimension) {\n        let category = d[p];\n        let categoryIndex = config.dimensions[p].yscale\n          .domain()\n          .indexOf(category);\n        let categoryRangeValue = config.dimensions[p].yscale.range()[\n          categoryIndex\n        ];\n        return (\n          categoryRangeValue >= ranges[p][0] &&\n          categoryRangeValue <= ranges[p][1]\n        );\n      },\n      number: function(d, p, dimension) {\n        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n      },\n      string: function(d, p, dimension) {\n        let category = d[p];\n        let categoryIndex = config.dimensions[p].yscale\n          .domain()\n          .indexOf(category);\n        let categoryRangeValue = config.dimensions[p].yscale.range()[\n          categoryIndex\n        ];\n        return (\n          categoryRangeValue >= ranges[p][0] &&\n          categoryRangeValue <= ranges[p][1]\n        );\n      },\n    };\n    return config.data.filter(d =>\n      actives.every((p, dimension) =>\n        within[config.dimensions[p].type](d, p, dimension)\n      )\n    );\n  } else {\n    // need to get data from each brush instead of each axis\n    // first must find active axes by iterating through all brushes\n    // then go through similiar process as above.\n    let multiBrushData = [];\n    for (let idx = 0; idx < config.brushes.length; idx++) {\n      let brush = config.brushes[idx];\n      let values = [];\n      let ranger = brush.extent;\n      let actives = [brush.data];\n      if (\n        typeof config.dimensions[brush.data].yscale.domain()[0] === 'number'\n      ) {\n        for (let i = 0; i < ranger.length; i++) {\n          if (\n            actives.includes(brush.data) &&\n            config.flipAxes.includes(brush.data)\n          ) {\n            values.push(config.dimensions[brush.data].yscale.invert(ranger[i]));\n          } else if (config.dimensions[brush.data].yscale() !== 1) {\n            values.unshift(\n              config.dimensions[brush.data].yscale.invert(ranger[i])\n            );\n          }\n        }\n        extents.push(values);\n        for (let ii = 0; ii < extents.length; ii++) {\n          if (extents[ii].length === 0) {\n            extents[ii] = [1, 1];\n          }\n        }\n      } else {\n        ranges[brush.data] = brush.extent;\n        let dimRange = config.dimensions[brush.data].yscale.range();\n        let dimDomain = config.dimensions[brush.data].yscale.domain();\n        for (let j = 0; j < dimRange.length; j++) {\n          if (\n            dimRange[j] >= ranger[0] &&\n            dimRange[j] <= ranger[1] &&\n            actives.includes(brush.data) &&\n            config.flipAxes.includes(brush.data)\n          ) {\n            values.push(dimRange[j]);\n          } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n            values.unshift(dimRange[j]);\n          }\n        }\n        extents.push(values);\n        for (let ii = 0; ii < extents.length; ii++) {\n          if (extents[ii].length === 0) {\n            extents[ii] = [1, 1];\n          }\n        }\n      }\n      let within = {\n        date: function(d, p, dimension) {\n          let category = d[p];\n          let categoryIndex = config.dimensions[p].yscale\n            .domain()\n            .indexOf(category);\n          let categoryRangeValue = config.dimensions[p].yscale.range()[\n            categoryIndex\n          ];\n          return (\n            categoryRangeValue >= ranges[p][0] &&\n            categoryRangeValue <= ranges[p][1]\n          );\n        },\n        number: function(d, p, dimension) {\n          return extents[idx][0] <= d[p] && d[p] <= extents[idx][1];\n        },\n        string: function(d, p, dimension) {\n          let category = d[p];\n          let categoryIndex = config.dimensions[p].yscale\n            .domain()\n            .indexOf(category);\n          let categoryRangeValue = config.dimensions[p].yscale.range()[\n            categoryIndex\n          ];\n          return (\n            categoryRangeValue >= ranges[p][0] &&\n            categoryRangeValue <= ranges[p][1]\n          );\n        },\n      };\n\n      // filter data, but instead of returning it now,\n      // put it into multiBrush data which is returned after\n      // all brushes are iterated through.\n      let filtered = config.data.filter(d =>\n        actives.every((p, dimension) =>\n          within[config.dimensions[p].type](d, p, dimension)\n        )\n      );\n      for (let z = 0; z < filtered.length; z++) {\n        multiBrushData.push(filtered[z]);\n      }\n      actives = [];\n      ranges = {};\n    }\n    return multiBrushData;\n  }\n};\n\nexport default selected;\n","const brushPredicate = (brushGroup, config, pc) => (predicate = null) => {\n  if (predicate === null) {\n    return brushGroup.predicate;\n  }\n\n  predicate = String(predicate).toUpperCase();\n  if (predicate !== 'AND' && predicate !== 'OR') {\n    throw new Error('Invalid predicate ' + predicate);\n  }\n\n  brushGroup.predicate = predicate;\n  config.brushed = brushGroup.currentMode().selected();\n  pc.renderBrushed();\n  return pc;\n};\n\nconst brushMode = (brushGroup, config, pc) => (mode = null) => {\n  if (mode === null) {\n    return brushGroup.mode;\n  }\n\n  if (pc.brushModes().indexOf(mode) === -1) {\n    throw new Error('pc.brushmode: Unsupported brush mode: ' + mode);\n  }\n\n  // Make sure that we don't trigger unnecessary events by checking if the mode\n  // actually changes.\n  if (mode !== brushGroup.mode) {\n    // When changing brush modes, the first thing we need to do is clearing any\n    // brushes from the current mode, if any.\n    if (brushGroup.mode !== 'None') {\n      pc.brushReset();\n    }\n\n    // Next, we need to 'uninstall' the current brushMode.\n    brushGroup.modes[brushGroup.mode].uninstall(pc);\n    // Finally, we can install the requested one.\n    brushGroup.mode = mode;\n    brushGroup.modes[brushGroup.mode].install();\n    if (mode === 'None') {\n      delete pc.brushPredicate;\n    } else {\n      pc.brushPredicate = brushPredicate(brushGroup, config, pc);\n    }\n  }\n\n  return pc;\n};\n\nexport default brushMode;\n","/**\n * dimension display names\n *\n * @param config\n * @param d\n * @returns {*}\n */\nconst dimensionLabels = config => d =>\n  config.dimensions[d].title ? config.dimensions[d].title : d;\n\nexport default dimensionLabels;\n","import { select } from 'd3-selection';\n\nconst flipAxisAndUpdatePCP = (config, pc, axis) =>\n  function(dimension) {\n    pc.flip(dimension);\n    pc.brushReset(dimension);\n    select(this.parentElement)\n      .transition()\n      .duration(config.animationTime)\n      .call(axis.scale(config.dimensions[dimension].yscale));\n    pc.render();\n  };\n\nexport default flipAxisAndUpdatePCP;\n","import { event } from 'd3-selection';\n\nconst rotateLabels = (config, pc) => {\n  if (!config.rotateLabels) return;\n\n  let delta = event.deltaY;\n  delta = delta < 0 ? -5 : delta;\n  delta = delta > 0 ? 5 : delta;\n\n  config.dimensionTitleRotation += delta;\n  pc.svg\n    .selectAll('text.label')\n    .attr(\n      'transform',\n      'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n    );\n  event.preventDefault();\n};\n\nexport default rotateLabels;\n","import { select } from 'd3-selection';\n\nimport dimensionLabels from '../util/dimensionLabels';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\nimport rotateLabels from '../util/rotateLabels';\n\nconst updateAxes = (config, pc, position, axis, flags) => (\n  animationTime = null\n) => {\n  if (animationTime === null) {\n    animationTime = config.animationTime;\n  }\n\n  const g_data = pc.svg\n    .selectAll('.dimension')\n    .data(pc.getOrderedDimensionKeys());\n  // Enter\n  g_data\n    .enter()\n    .append('svg:g')\n    .attr('class', 'dimension')\n    .attr('transform', p => 'translate(' + position(p) + ')')\n    .style('opacity', 0)\n    .append('svg:g')\n    .attr('class', 'axis')\n    .attr('transform', 'translate(0,0)')\n    .each(function(d) {\n      const axisElement = select(this).call(\n        pc.applyAxisConfig(axis, config.dimensions[d])\n      );\n\n      axisElement\n        .selectAll('path')\n        .style('fill', 'none')\n        .style('stroke', '#222')\n        .style('shape-rendering', 'crispEdges');\n\n      axisElement\n        .selectAll('line')\n        .style('fill', 'none')\n        .style('stroke', '#222')\n        .style('shape-rendering', 'crispEdges');\n    })\n    .append('svg:text')\n    .attr({\n      'text-anchor': 'middle',\n      y: 0,\n      transform:\n        'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')',\n      x: 0,\n      class: 'label',\n    })\n    .text(dimensionLabels(config))\n    .on('dblclick', flipAxisAndUpdatePCP(config, pc, axis))\n    .on('wheel', rotateLabels(config, pc));\n\n  // Update\n  g_data.attr('opacity', 0);\n  g_data\n    .select('.axis')\n    .transition()\n    .duration(animationTime)\n    .each(function(d) {\n      select(this).call(pc.applyAxisConfig(axis, config.dimensions[d]));\n    });\n  g_data\n    .select('.label')\n    .transition()\n    .duration(animationTime)\n    .text(dimensionLabels(config))\n    .attr(\n      'transform',\n      'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n    );\n\n  // Exit\n  g_data.exit().remove();\n\n  g = pc.svg.selectAll('.dimension');\n  g\n    .transition()\n    .duration(animationTime)\n    .attr('transform', p => 'translate(' + position(p) + ')')\n    .style('opacity', 1);\n\n  pc.svg\n    .selectAll('.axis')\n    .transition()\n    .duration(animationTime)\n    .each(function(d) {\n      select(this).call(pc.applyAxisConfig(axis, config.dimensions[d]));\n    });\n\n  if (flags.brushable) pc.brushable();\n  if (flags.reorderable) pc.reorderable();\n  if (pc.brushMode() !== 'None') {\n    let mode = pc.brushMode();\n    pc.brushMode('None');\n    pc.brushMode(mode);\n  }\n  return this;\n};\n\nexport default updateAxes;\n","/** adjusts an axis' default range [h()+1, 1] if a NullValueSeparator is set */\nconst getRange = config => {\n  const h = config.height - config.margin.top - config.margin.bottom;\n\n  if (config.nullValueSeparator == 'bottom') {\n    return [\n      h +\n        1 -\n        config.nullValueSeparatorPadding.bottom -\n        config.nullValueSeparatorPadding.top,\n      1,\n    ];\n  } else if (config.nullValueSeparator == 'top') {\n    return [\n      h + 1,\n      1 +\n        config.nullValueSeparatorPadding.bottom +\n        config.nullValueSeparatorPadding.top,\n    ];\n  }\n  return [h + 1, 1];\n};\n\nexport default getRange;\n","import { scaleLinear, scaleOrdinal, scalePoint, scaleTime } from 'd3-scale';\nimport { keys } from 'd3-collection';\nimport { extent } from 'd3-array';\n\nimport getRange from '../util/getRange';\nimport w from '../util/width';\nimport h from '../util/height';\n\nconst autoscale = (config, pc, xscale, ctx) =>\n  function() {\n    // yscale\n    const defaultScales = {\n      date: function(k) {\n        let _extent = extent(config.data, d => (d[k] ? d[k].getTime() : null));\n        // special case if single value\n        if (_extent[0] === _extent[1]) {\n          return scalePoint()\n            .domain(_extent)\n            .range(getRange(config));\n        }\n        if (config.flipAxes.includes(k)) {\n          _extent = _extent.map(val => tempDate.unshift(val));\n        }\n        return scaleTime()\n          .domain(_extent)\n          .range(getRange(config));\n      },\n      number: function(k) {\n        let _extent = extent(config.data, d => +d[k]);\n        // special case if single value\n        if (_extent[0] === _extent[1]) {\n          return scalePoint()\n            .domain(_extent)\n            .range(getRange(config));\n        }\n        if (config.flipAxes.includes(k)) {\n          _extent = _extent.map(val => tempDate.unshift(val));\n        }\n        return scaleLinear()\n          .domain(_extent)\n          .range(getRange(config));\n      },\n      string: function(k) {\n        let counts = {},\n          domain = [];\n        // Let's get the count for each value so that we can sort the domain based\n        // on the number of items for each value.\n        config.data.map(p => {\n          if (p[k] === undefined && config.nullValueSeparator !== 'undefined') {\n            return null; // null values will be drawn beyond the horizontal null value separator!\n          }\n          if (counts[p[k]] === undefined) {\n            counts[p[k]] = 1;\n          } else {\n            counts[p[k]] = counts[p[k]] + 1;\n          }\n        });\n        if (config.flipAxes.includes(k)) {\n          domain = Object.getOwnPropertyNames(counts).sort();\n        } else {\n          let tempArr = Object.getOwnPropertyNames(counts).sort();\n          for (let i = 0; i < Object.getOwnPropertyNames(counts).length; i++) {\n            domain.push(tempArr.pop());\n          }\n        }\n\n        //need to create an ordinal scale for categorical data\n        let categoricalRange = [];\n        if (domain.length === 1) {\n          //edge case\n          domain = [' ', domain[0], ' '];\n        }\n        let addBy = getRange(config)[0] / (domain.length - 1);\n        for (let j = 0; j < domain.length; j++) {\n          if (categoricalRange.length === 0) {\n            categoricalRange.push(0);\n            continue;\n          }\n          categoricalRange.push(categoricalRange[j - 1] + addBy);\n        }\n        return scaleOrdinal()\n          .domain(domain)\n          .range(categoricalRange);\n      },\n    };\n    keys(config.dimensions).forEach(function(k) {\n      config.dimensions[k].yscale = defaultScales[config.dimensions[k].type](k);\n    });\n\n    // xscale\n    xscale.range([0, w(config)], 1);\n    // Retina display, etc.\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    // canvas sizes\n    pc.selection\n      .selectAll('canvas')\n      .style('margin-top', config.margin.top + 'px')\n      .style('margin-left', config.margin.left + 'px')\n      .style('width', w(config) + 2 + 'px')\n      .style('height', h(config) + 2 + 'px')\n      .attr('width', (w(config) + 2) * devicePixelRatio)\n      .attr('height', (h(config) + 2) * devicePixelRatio);\n    // default styles, needs to be set when canvas width changes\n    ctx.foreground.strokeStyle = config.color;\n    ctx.foreground.lineWidth = 1.4;\n    ctx.foreground.globalCompositeOperation = config.composite;\n    ctx.foreground.globalAlpha = config.alpha;\n    ctx.foreground.scale(devicePixelRatio, devicePixelRatio);\n    ctx.brushed.strokeStyle = config.brushedColor;\n    ctx.brushed.lineWidth = 1.4;\n    ctx.brushed.globalCompositeOperation = config.composite;\n    ctx.brushed.globalAlpha = config.alpha;\n    ctx.brushed.scale(devicePixelRatio, devicePixelRatio);\n    ctx.highlight.lineWidth = 3;\n    ctx.highlight.scale(devicePixelRatio, devicePixelRatio);\n\n    return this;\n  };\n\nexport default autoscale;\n","import { brushSelection, brushY } from 'd3-brush';\nimport { event, select } from 'd3-selection';\n\nconst brushable = (config, pc, flags) =>\n  function() {\n    if (!pc.g()) {\n      pc.createAxes();\n    }\n\n    const g = pc.g();\n\n    // Add and store a brush for each axis.\n    g\n      .append('svg:g')\n      .attr('class', 'brush')\n      .each(function(d) {\n        if (config.dimensions[d] !== undefined) {\n          config.dimensions[d]['brush'] = brushY(select(this)).extent([\n            [-15, 0],\n            [15, config.dimensions[d].yscale.range()[0]],\n          ]);\n          select(this).call(\n            config.dimensions[d]['brush']\n              .on('start', function() {\n                if (event.sourceEvent !== null && !event.sourceEvent.ctrlKey) {\n                  pc.brushReset();\n                }\n              })\n              .on('brush', function() {\n                if (!event.sourceEvent.ctrlKey) {\n                  pc.brush();\n                }\n              })\n              .on('end', function() {\n                // save brush selection is ctrl key is held\n                // store important brush information and\n                // the html element of the selection,\n                // to make a dummy selection element\n                if (event.sourceEvent.ctrlKey) {\n                  let html = select(this)\n                    .select('.selection')\n                    .nodes()[0].outerHTML;\n                  html = html.replace(\n                    'class=\"selection\"',\n                    'class=\"selection dummy' +\n                      ' selection-' +\n                      config.brushes.length +\n                      '\"'\n                  );\n                  let dat = select(this).nodes()[0].__data__;\n                  let brush = {\n                    id: config.brushes.length,\n                    extent: brushSelection(this),\n                    html: html,\n                    data: dat,\n                  };\n                  config.brushes.push(brush);\n                  select(select(this).nodes()[0].parentNode)\n                    .select('.axis')\n                    .nodes()[0].outerHTML += html;\n                  pc.brush();\n                  config.dimensions[d].brush.move(select(this, null));\n                  select(this)\n                    .select('.selection')\n                    .attr('style', 'display:none');\n                  pc.brushable();\n                } else {\n                  pc.brush();\n                }\n              })\n          );\n          select(this).on('dblclick', function() {\n            pc.brushReset(d);\n          });\n        }\n      });\n\n    flags.brushable = true;\n    return this;\n  };\n\nexport default brushable;\n","import { keys } from 'd3-collection';\nimport { extent } from 'd3-array';\n\nconst commonScale = (config, pc) =>\n  function(global, type) {\n    const t = type || 'number';\n    if (typeof global === 'undefined') {\n      global = true;\n    }\n\n    // try to autodetect dimensions and create scales\n    if (!keys(config.dimensions).length) {\n      pc.detectDimensions();\n    }\n    pc.autoscale();\n\n    // scales of the same type\n    const scales = keys(config.dimensions).filter(\n      p => config.dimensions[p].type == t\n    );\n\n    if (global) {\n      let _extent = extent(\n        scales\n          .map(d => config.dimensions[d].yscale.domain())\n          .reduce((cur, acc) => cur.concat(acc))\n      );\n\n      scales.forEach(d => {\n        config.dimensions[d].yscale.domain(_extent);\n      });\n    } else {\n      scales.forEach(d => {\n        config.dimensions[d].yscale.domain(extent(config.data, d => +d[k]));\n      });\n    }\n\n    // update centroids\n    if (config.bundleDimension !== null) {\n      pc.bundleDimension(config.bundleDimension);\n    }\n\n    return this;\n  };\n\nexport default commonScale;\n","import { keys } from 'd3-collection';\n\nconst computeRealCentroids = (dimensions, position) => row =>\n  keys(dimensions).map(d => {\n    const x = position(d);\n    const y = dimensions[d].yscale(row[d]);\n    return [x, y];\n  });\n\nexport default computeRealCentroids;\n","import { keys } from 'd3-collection';\n\nconst applyDimensionDefaults = (config, pc) =>\n  function(dims) {\n    const types = pc.detectDimensionTypes(config.data);\n    dims = dims ? dims : keys(types);\n\n    return dims.reduce((acc, cur, i) => {\n      const k = config.dimensions[cur] ? config.dimensions[cur] : {};\n\n      acc[cur] = {\n        ...k,\n        orient: k.orient ? k.orient : 'left',\n        ticks: k.ticks != null ? k.ticks : 5,\n        innerTickSize: k.innerTickSize != null ? k.innerTickSize : 6,\n        outerTickSize: k.outerTickSize != null ? k.outerTickSize : 0,\n        tickPadding: k.tickPadding != null ? k.tickPadding : 3,\n        type: k.type ? k.type : types[cur],\n        index: k.index != null ? k.index : i,\n      };\n\n      return acc;\n    }, {});\n  };\n\nexport default applyDimensionDefaults;\n","import { select } from 'd3-selection';\n\nimport dimensionLabels from '../util/dimensionLabels';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\nimport rotateLabels from '../util/rotateLabels';\n\n/**\n * Create static SVG axes with dimension names, ticks, and labels.\n *\n * @param config\n * @param pc\n * @param xscale\n * @param flags\n * @param axis\n * @returns {Function}\n */\nconst createAxes = (config, pc, xscale, flags, axis) =>\n  function() {\n    if (pc.g() !== undefined) {\n      pc.removeAxes();\n    }\n    // Add a group element for each dimension.\n    pc._g = pc.svg\n      .selectAll('.dimension')\n      .data(pc.getOrderedDimensionKeys(), function(d) {\n        return d;\n      })\n      .enter()\n      .append('svg:g')\n      .attr('class', 'dimension')\n      .attr('transform', function(d) {\n        return 'translate(' + xscale(d) + ')';\n      });\n    // Add an axis and title.\n    pc._g\n      .append('svg:g')\n      .attr('class', 'axis')\n      .attr('transform', 'translate(0,0)')\n      .each(function(d) {\n        let axisElement = select(this).call(\n          pc.applyAxisConfig(axis, config.dimensions[d])\n        );\n\n        axisElement\n          .selectAll('path')\n          .style('fill', 'none')\n          .style('stroke', '#222')\n          .style('shape-rendering', 'crispEdges');\n\n        axisElement\n          .selectAll('line')\n          .style('fill', 'none')\n          .style('stroke', '#222')\n          .style('shape-rendering', 'crispEdges');\n      })\n\n      .append('svg:text')\n      .attr('text-anchor', 'middle')\n      .attr('y', 0)\n      .attr(\n        'transform',\n        'translate(0,-5) rotate(' + config.dimensionTitleRotation + ')'\n      )\n      .attr('x', 0)\n      .attr('class', 'label')\n      .text(dimensionLabels(config))\n      .on('dblclick', flipAxisAndUpdatePCP(config, pc, axis))\n      .on('wheel', rotateLabels(config, pc));\n\n    if (config.nullValueSeparator == 'top') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', 1 + config.nullValueSeparatorPadding.top)\n        .attr('x2', w())\n        .attr('y2', 1 + config.nullValueSeparatorPadding.top)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    } else if (config.nullValueSeparator == 'bottom') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', h() + 1 - config.nullValueSeparatorPadding.bottom)\n        .attr('x2', w())\n        .attr('y2', h() + 1 - config.nullValueSeparatorPadding.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    }\n\n    flags.axes = true;\n    return this;\n  };\n\nexport default createAxes;\n","import { entries } from 'd3-collection';\nimport { min } from 'd3-array';\n\n//draw dots with radius r on the axis line where data intersects\nconst axisDots = (config, pc, position) => _r => {\n  const r = _r || 0.1;\n  const ctx = pc.ctx.marks;\n  const startAngle = 0;\n  const endAngle = 2 * Math.PI;\n  ctx.globalAlpha = min([1 / Math.pow(config.data.length, 1 / 2), 1]);\n  config.data.forEach(d => {\n    entries(config.dimensions).forEach((p, i) => {\n      ctx.beginPath();\n      ctx.arc(\n        position(p),\n        config.dimensions[p.key].yscale(d[p]),\n        r,\n        startAngle,\n        endAngle\n      );\n      ctx.stroke();\n      ctx.fill();\n    });\n  });\n  return this;\n};\n\nexport default axisDots;\n","import { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\n\nconst applyAxisConfig = (axis, dimension) => {\n  let axisCfg;\n\n  switch (dimension.orient) {\n    case 'left':\n      axisCfg = axisLeft(dimension.yscale);\n      break;\n    case 'right':\n      axisCfg = axisRight(dimension.yscale);\n      break;\n    case 'top':\n      axisCfg = axisTop(dimension.yscale);\n      break;\n    case 'bottom':\n      axisCfg = axisBottom(dimension.yscale);\n      break;\n    default:\n      axisCfg = axisLeft(dimension.yscale);\n      break;\n  }\n\n  axisCfg\n    .ticks(dimension.ticks)\n    .tickValues(dimension.tickValues)\n    .tickSizeInner(dimension.innerTickSize)\n    .tickSizeOuter(dimension.outerTickSize)\n    .tickPadding(dimension.tickPadding)\n    .tickFormat(dimension.tickFormat);\n\n  return axisCfg;\n};\n\nexport default applyAxisConfig;\n","import { drag } from 'd3-drag';\nimport { event, select } from 'd3-selection';\n\nimport w from '../util/width';\n\n// Jason Davies, http://bl.ocks.org/1341281\nconst reorderable = (config, pc, xscale, position, dragging, flags) =>\n  function() {\n    if (pc.g() === undefined) pc.createAxes();\n    const g = pc.g();\n\n    g.style('cursor', 'move').call(\n      drag()\n        .on('start', function(d) {\n          dragging[d] = this.__origin__ = xscale(d);\n        })\n        .on('drag', function(d) {\n          dragging[d] = Math.min(\n            w(__),\n            Math.max(0, (this.__origin__ += event.dx))\n          );\n          pc.sortDimensions();\n          xscale.domain(pc.getOrderedDimensionKeys());\n          pc.render();\n          g.attr('transform', d => 'translate(' + position(d) + ')');\n        })\n        .on('end', function(d) {\n          delete this.__origin__;\n          delete dragging[d];\n          select(this)\n            .transition()\n            .attr('transform', 'translate(' + xscale(d) + ')');\n          pc.render();\n        })\n    );\n    flags.reorderable = true;\n    return this;\n  };\n\nexport default reorderable;\n","// rescale for height, width and margins\n// TODO currently assumes chart is brushable, and destroys old brushes\nconst resize = (config, pc, flags, events) => {\n  return function() {\n    // selection size\n    pc.selection\n      .select('svg')\n      .attr('width', config.width)\n      .attr('height', config.height);\n    pc.svg.attr(\n      'transform',\n      'translate(' + config.margin.left + ',' + config.margin.top + ')'\n    );\n\n    // FIXME: the current brush state should pass through\n    if (flags.brushable) pc.brushReset();\n\n    // scales\n    pc.autoscale();\n\n    // axes, destroys old brushes.\n    if (pc.g()) pc.createAxes();\n    if (flags.brushable) pc.brushable();\n    if (flags.reorderable) pc.reorderable();\n\n    events.call('resize', this, {\n      width: config.width,\n      height: config.height,\n      margin: config.margin,\n    });\n\n    return this;\n  };\n};\n\nexport default resize;\n","// Reorder dimensions, such that the highest value (visually) is on the left and\n// the lowest on the right. Visual values are determined by the data values in\n// the given row.\nconst reorder = (config, pc, xscale) => rowdata => {\n  const firstDim = pc.getOrderedDimensionKeys()[0];\n\n  pc.sortDimensionsByRowData(rowdata);\n  // NOTE: this is relatively cheap given that:\n  // number of dimensions < number of data items\n  // Thus we check equality of order to prevent rerendering when this is the case.\n  const reordered = firstDim !== pc.getOrderedDimensionKeys()[0];\n\n  if (reordered) {\n    xscale.domain(pc.getOrderedDimensionKeys());\n    const highlighted = config.highlighted.slice(0);\n    pc.unhighlight();\n\n    const g = pc.g();\n    g\n      .transition()\n      .duration(1500)\n      .attr('transform', d => 'translate(' + xscale(d) + ')');\n    pc.render();\n\n    // pc.highlight() does not check whether highlighted is length zero, so we do that here.\n    if (highlighted.length !== 0) {\n      pc.highlight(highlighted);\n    }\n  }\n};\n\nexport default reorder;\n","import { keys } from 'd3-collection';\n\nconst sortDimensions = (config, position) => () => {\n  const copy = Object.assign({}, config.dimensions);\n  const positionSortedKeys = keys(config.dimensions).sort(\n    (a, b) => (position(a) - position(b) === 0 ? 1 : position(a) - position(b))\n  );\n  config.dimensions = {};\n  positionSortedKeys.forEach((p, i) => {\n    config.dimensions[p] = copy[p];\n    config.dimensions[p].index = i;\n  });\n};\n\nexport default sortDimensions;\n","import { keys } from 'd3-collection';\n\nconst sortDimensionsByRowData = config => rowdata => {\n  const copy = Object.assign({}, config.dimensions);\n  const positionSortedKeys = keys(config.dimensions).sort((a, b) => {\n    const pixelDifference =\n      config.dimensions[a].yscale(rowdata[a]) -\n      config.dimensions[b].yscale(rowdata[b]);\n\n    // Array.sort is not necessarily stable, this means that if pixelDifference is zero\n    // the ordering of dimensions might change unexpectedly. This is solved by sorting on\n    // variable name in that case.\n    return pixelDifference === 0 ? a.localeCompare(b) : pixelDifference;\n  });\n  config.dimensions = {};\n  positionSortedKeys.forEach((p, i) => {\n    config.dimensions[p] = copy[p];\n    config.dimensions[p].index = i;\n  });\n};\n\nexport default sortDimensionsByRowData;\n","const isBrushed = (config, brushGroup) => {\n  if (config.brushed && config.brushed.length !== config.data.length)\n    return true;\n\n  const object = brushGroup.currentMode().brushState();\n\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport default isBrushed;\n","import h from '../util/height';\nimport w from '../util/width';\nimport isBrushed from '../util/isBrushed';\n\nconst clear = (config, pc, ctx, brushGroup) =>\n  function(layer) {\n    ctx[layer].clearRect(0, 0, w(config) + 2, h(config) + 2);\n\n    // This will make sure that the foreground items are transparent\n    // without the need for changing the opacity style of the foreground canvas\n    // as this would stop the css styling from working\n    if (layer === 'brushed' && isBrushed(config, brushGroup)) {\n      ctx.brushed.fillStyle = pc.selection.style('background-color');\n      ctx.brushed.globalAlpha = 1 - config.alphaOnBrushed;\n      ctx.brushed.fillRect(0, 0, w(config) + 2, h(config) + 2);\n      ctx.brushed.globalAlpha = config.alpha;\n    }\n    return this;\n  };\n\nexport default clear;\n","import { keys } from 'd3-collection';\n\nconst computeCentroids = (config, position, row) => {\n  const centroids = [];\n\n  const p = keys(config.dimensions);\n  const cols = p.length;\n  const a = 0.5; // center between axes\n  for (let i = 0; i < cols; ++i) {\n    // centroids on 'real' axes\n    const x = position(p[i]);\n    const y = config.dimensions[p[i]].yscale(row[p[i]]);\n    centroids.push($V([x, y]));\n\n    // centroids on 'virtual' axes\n    if (i < cols - 1) {\n      const cx = x + a * (position(p[i + 1]) - x);\n      let cy = y + a * (config.dimensions[p[i + 1]].yscale(row[p[i + 1]]) - y);\n      if (config.bundleDimension !== null) {\n        const leftCentroid = config.clusterCentroids\n          .get(\n            config.dimensions[config.bundleDimension].yscale(\n              row[config.bundleDimension]\n            )\n          )\n          .get(p[i]);\n        const rightCentroid = config.clusterCentroids\n          .get(\n            config.dimensions[config.bundleDimension].yscale(\n              row[config.bundleDimension]\n            )\n          )\n          .get(p[i + 1]);\n        let centroid = 0.5 * (leftCentroid + rightCentroid);\n        cy = centroid + (1 - config.bundlingStrength) * (cy - centroid);\n      }\n      centroids.push($V([cx, cy]));\n    }\n  }\n\n  return centroids;\n};\n\nexport default computeCentroids;\n","const computeControlPoints = (smoothness, centroids) => {\n  const cols = centroids.length;\n  const a = smoothness;\n  const cps = [];\n\n  cps.push(centroids[0]);\n  cps.push(\n    $V([\n      centroids[0].e(1) + a * 2 * (centroids[1].e(1) - centroids[0].e(1)),\n      centroids[0].e(2),\n    ])\n  );\n  for (let col = 1; col < cols - 1; ++col) {\n    let mid = centroids[col];\n    let left = centroids[col - 1];\n    let right = centroids[col + 1];\n\n    let diff = left.subtract(right);\n    cps.push(mid.add(diff.x(a)));\n    cps.push(mid);\n    cps.push(mid.subtract(diff.x(a)));\n  }\n  cps.push(\n    $V([\n      centroids[cols - 1].e(1) +\n        a * 2 * (centroids[cols - 2].e(1) - centroids[cols - 1].e(1)),\n      centroids[cols - 1].e(2),\n    ])\n  );\n  cps.push(centroids[cols - 1]);\n\n  return cps;\n};\n\nexport default computeControlPoints;\n","// draw single cubic bezier curve\nimport { entries } from 'd3-collection';\nimport computeCentroids from './computeCentroids';\nimport computeControlPoints from './computeControlPoints';\nimport h from './height';\n\nconst singleCurve = (config, position, d, ctx) => {\n  const centroids = computeCentroids(config, position, d);\n  const cps = computeControlPoints(config.smoothness, centroids);\n\n  ctx.moveTo(cps[0].e(1), cps[0].e(2));\n\n  for (let i = 1; i < cps.length; i += 3) {\n    if (config.showControlPoints) {\n      for (let j = 0; j < 3; j++) {\n        ctx.fillRect(cps[i + j].e(1), cps[i + j].e(2), 2, 2);\n      }\n    }\n    ctx.bezierCurveTo(\n      cps[i].e(1),\n      cps[i].e(2),\n      cps[i + 1].e(1),\n      cps[i + 1].e(2),\n      cps[i + 2].e(1),\n      cps[i + 2].e(2)\n    );\n  }\n};\n\n// returns the y-position just beyond the separating null value line\nconst getNullPosition = config => {\n  if (config.nullValueSeparator == 'bottom') {\n    return h(config) + 1;\n  } else if (config.nullValueSeparator == 'top') {\n    return 1;\n  } else {\n    console.log(\n      \"A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'.\"\n    );\n  }\n  return h(config) + 1;\n};\n\nconst singlePath = (config, position, d, ctx) => {\n  entries(config.dimensions).forEach((p, i) => {\n    //p isn't really p\n    if (i == 0) {\n      ctx.moveTo(\n        position(p.key),\n        typeof d[p.key] == 'undefined'\n          ? getNullPosition(config)\n          : config.dimensions[p.key].yscale(d[p.key])\n      );\n    } else {\n      ctx.lineTo(\n        position(p.key),\n        typeof d[p.key] == 'undefined'\n          ? getNullPosition(config)\n          : config.dimensions[p.key].yscale(d[p.key])\n      );\n    }\n  });\n};\n\n// draw single polyline\nconst colorPath = (config, position, d, ctx) => {\n  ctx.beginPath();\n  if (\n    (config.bundleDimension !== null && config.bundlingStrength > 0) ||\n    config.smoothness > 0\n  ) {\n    singleCurve(config, position, d, ctx);\n  } else {\n    singlePath(config, position, d, ctx);\n  }\n  ctx.stroke();\n};\n\nexport default colorPath;\n","const _functor = v => (typeof v === 'function' ? v : () => v);\n\nexport default _functor;\n","import { keys } from 'd3-collection';\n\nimport isBrushed from '../util/isBrushed';\nimport colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathBrushed = (config, ctx, position) => (d, i) => {\n  if (config.brushedColor !== null) {\n    ctx.brushed.strokeStyle = functor(config.brushedColor)(d, i);\n  } else {\n    ctx.brushed.strokeStyle = functor(config.color)(d, i);\n  }\n  return colorPath(config, position, d, ctx.brushed);\n};\n\nconst renderBrushedDefault = (config, ctx, position, pc, brushGroup) => () => {\n  pc.clear('brushed');\n\n  if (isBrushed(config, brushGroup)) {\n    config.brushed.forEach(pathBrushed(config, ctx, position));\n  }\n};\n\nconst renderBrushedQueue = (config, brushGroup, brushedQueue) => () => {\n  if (isBrushed(config, brushGroup)) {\n    brushedQueue(config.brushed);\n  } else {\n    brushedQueue([]); // This is needed to clear the currently brushed items\n  }\n};\n\nconst renderBrushed = (config, pc, events) =>\n  function() {\n    if (!keys(config.dimensions).length) pc.detectDimensions();\n\n    pc.renderBrushed[config.mode]();\n    events.call('render', this);\n    return this;\n  };\n\nexport { pathBrushed, renderBrushed, renderBrushedDefault, renderBrushedQueue };\n","import { select, selectAll } from 'd3-selection';\n\nconst brushReset = config =>\n  function(dimension) {\n    const brushesToKeep = [];\n    for (let j = 0; j < config.brushes.length; j++) {\n      if (config.brushes[j].data !== dimension) {\n        brushesToKeep.push(config.brushes[j]);\n      }\n    }\n\n    config.brushes = brushesToKeep;\n    config.brushed = false;\n\n    if (pc.g() !== undefined) {\n      const nodes = selectAll('.brush').nodes();\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].__data__ === dimension) {\n          // remove all dummy brushes for this axis or the real brush\n          select(select(nodes[i]).nodes()[0].parentNode)\n            .selectAll('.dummy')\n            .remove();\n          config.dimensions[dimension].brush.move(select(nodes[i], null));\n        }\n      }\n    }\n\n    return this;\n  };\n\nexport default brushReset;\n","// a better \"typeof\" from this post: http://stackoverflow.com/questions/7390426/better-way-to-get-type-of-a-javascript-variable\nconst toType = v => {\n  return {}.toString\n    .call(v)\n    .match(/\\s([a-zA-Z]+)/)[1]\n    .toLowerCase();\n};\n\nexport default toType;\n","import { keys } from 'd3-collection';\n\n// this descriptive text should live with other introspective methods\nconst toString = config => () => {\n  return (\n    'Parallel Coordinates: ' +\n    keys(config.dimensions).length +\n    ' dimensions (' +\n    keys(config.data[0]).length +\n    ' total) , ' +\n    config.data.length +\n    ' rows'\n  );\n};\n\nexport default toString;\n","// pairs of adjacent dimensions\nconst adjacentPairs = arr => {\n  let ret = [];\n  for (let i = 0; i < arr.length - 1; i++) {\n    ret.push([arr[i], arr[i + 1]]);\n  }\n  return ret;\n};\n\nexport default adjacentPairs;\n","import { selectAll } from 'd3-selection';\n\nimport colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathHighlight = (config, ctx, position) => (d, i) => {\n  ctx.highlight.strokeStyle = functor(config.color)(d, i);\n  return colorPath(config, position, d, ctx.highlight);\n};\n\n// highlight an array of data\nconst highlight = (config, pc, canvas, events, ctx, position) =>\n  function(data = null) {\n    if (data === null) {\n      return config.highlighted;\n    }\n\n    config.highlighted = data;\n    pc.clear('highlight');\n    selectAll([canvas.foreground, canvas.brushed]).classed('faded', true);\n    data.forEach(pathHighlight(config, ctx, position));\n    events.call('highlight', this, data);\n    return this;\n  };\n\nexport default highlight;\n","import { selectAll } from 'd3-selection';\n\n// clear highlighting\nconst unhighlight = (config, pc, canvas) =>\n  function() {\n    config.highlighted = [];\n    pc.clear('highlight');\n    selectAll([canvas.foreground, canvas.brushed]).classed('faded', false);\n    return this;\n  };\n\nexport default unhighlight;\n","const removeAxes = pc =>\n  function() {\n    pc._g.remove();\n\n    delete pc._g;\n    return this;\n  };\n\nexport default removeAxes;\n","import { keys } from 'd3-collection';\n\n/**\n * Renders the polylines.\n * If no dimensions have been specified, it will attempt to detect quantitative\n * dimensions based on the first data entry. If scales haven't been set, it will\n * autoscale based on the extent for each dimension.\n *\n * @param config\n * @param pc\n * @param events\n * @returns {Function}\n */\nconst render = (config, pc, events) =>\n  function() {\n    // try to autodetect dimensions and create scales\n    if (!keys(config.dimensions).length) {\n      pc.detectDimensions();\n    }\n    pc.autoscale();\n\n    pc.render[config.mode]();\n\n    events.call('render', this);\n    return this;\n  };\n\nexport default render;\n","import colorPath from '../util/colorPath';\nimport functor from '../util/functor';\n\nconst pathForeground = (config, ctx, position) => (d, i) => {\n  ctx.foreground.strokeStyle = functor(config.color)(d, i);\n  return colorPath(config, position, d, ctx.foreground);\n};\n\nconst renderDefault = (config, pc, ctx, position) => () => {\n  pc.clear('foreground');\n  pc.clear('highlight');\n\n  pc.renderBrushed.default();\n\n  config.data.forEach(pathForeground(config, ctx, position));\n};\n\nconst renderDefaultQueue = (config, pc, foregroundQueue) => () => {\n  pc.renderBrushed.queue();\n  foregroundQueue(config.data);\n};\n\nexport default renderDefault;\n\nexport { pathForeground, renderDefaultQueue };\n","import toType from './toType';\n\n// try to coerce to number before returning type\nconst toTypeCoerceNumbers = v =>\n  parseFloat(v) == v && v != null ? 'number' : toType(v);\n\nexport default toTypeCoerceNumbers;\n","import { keys } from 'd3-collection';\n\nimport toTypeCoerceNumbers from './toTypeCoerceNumbers';\n\n// attempt to determine types of each dimension based on first row of data\nconst detectDimensionTypes = data =>\n  keys(data[0]).reduce((acc, cur) => {\n    const key = isNaN(Number(cur)) ? cur : parseInt(cur);\n    acc[key] = toTypeCoerceNumbers(data[0][cur]);\n\n    return acc;\n  }, {});\n\nexport default detectDimensionTypes;\n","import { ascending } from 'd3-array';\nimport { keys } from 'd3-collection';\n\nconst getOrderedDimensionKeys = config => () =>\n  keys(config.dimensions).sort((x, y) =>\n    ascending(config.dimensions[x].index, config.dimensions[y].index)\n  );\n\nexport default getOrderedDimensionKeys;\n","const interactive = flags =>\n  function() {\n    flags.interactive = true;\n    return this;\n  };\n\nexport default interactive;\n","const shadows = (flags, pc) =>\n  function() {\n    flags.shadows = true;\n    pc.alphaOnBrushed(0.1);\n    pc.render();\n    return this;\n  };\n\nexport default shadows;\n","import { select } from 'd3-selection';\n\n/**\n * Setup a new parallel coordinates chart.\n *\n * @param config\n * @param canvas\n * @param ctx\n * @returns {pc} a parcoords closure\n */\nconst init = (config, canvas, ctx) => {\n  /**\n   * Create the chart within a container. The selector can also be a d3 selection.\n   *\n   * @param selection a d3 selection\n   * @returns {pc} instance for chained api\n   */\n  const pc = function(selection) {\n    selection = pc.selection = select(selection);\n\n    config.width = selection.node().clientWidth;\n    config.height = selection.node().clientHeight;\n    // canvas data layers\n    ['marks', 'foreground', 'brushed', 'highlight'].forEach(layer => {\n      canvas[layer] = selection\n        .append('canvas')\n        .attr('class', layer)\n        .node();\n      ctx[layer] = canvas[layer].getContext('2d');\n    });\n\n    // svg tick and brush layers\n    pc.svg = selection\n      .append('svg')\n      .attr('width', config.width)\n      .attr('height', config.height)\n      .style('font', '14px sans-serif')\n      .style('position', 'absolute')\n\n      .append('svg:g')\n      .attr(\n        'transform',\n        'translate(' + config.margin.left + ',' + config.margin.top + ')'\n      );\n    // for chained api\n    return pc;\n  };\n\n  // for partial-application style programming\n  return pc;\n};\n\nexport default init;\n","const flip = config =>\n  function(d) {\n    //__.dimensions[d].yscale.domain().reverse();                               // does not work\n    config.dimensions[d].yscale.domain(\n      config.dimensions[d].yscale.domain().reverse()\n    ); // works\n\n    return this;\n  };\n\nexport default flip;\n","const detectDimensions = pc =>\n  function() {\n    pc.dimensions(pc.applyDimensionDefaults());\n    return this;\n  };\n\nexport default detectDimensions;\n","const scale = config =>\n  function(d, domain) {\n    config.dimensions[d].yscale.domain(domain);\n\n    return this;\n  };\n\nexport default scale;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","const DefaultConfig = {\n  data: [],\n  highlighted: [],\n  dimensions: {},\n  dimensionTitleRotation: 0,\n  brushes: [],\n  brushed: false,\n  brushedColor: null,\n  alphaOnBrushed: 0.0,\n  mode: 'default',\n  rate: 20,\n  width: 600,\n  height: 300,\n  margin: { top: 24, right: 20, bottom: 12, left: 20 },\n  nullValueSeparator: 'undefined', // set to \"top\" or \"bottom\"\n  nullValueSeparatorPadding: { top: 8, right: 0, bottom: 8, left: 0 },\n  color: '#069',\n  composite: 'source-over',\n  alpha: 0.7,\n  bundlingStrength: 0.5,\n  bundleDimension: null,\n  smoothness: 0.0,\n  showControlPoints: false,\n  hideAxis: [],\n  flipAxes: [],\n  animationTime: 1100, // How long it takes to flip the axis when you double click\n  rotateLabels: false,\n};\n\nexport default DefaultConfig;\n","import { entries, keys } from 'd3-collection';\nimport { axisLeft } from 'd3-axis';\nimport { dispatch } from 'd3-dispatch';\nimport { scalePoint } from 'd3-scale';\nimport isFunction from 'lodash-es/isFunction';\n\nimport DefaultConfig from './defaultConfig';\n\nconst initState = userConfig => {\n  const config = Object.assign({}, DefaultConfig, userConfig);\n\n  if (userConfig && userConfig.dimensionTitles) {\n    console.warn(\n      'dimensionTitles passed in userConfig is deprecated. Add title to dimension object.'\n    );\n    entries(userConfig.dimensionTitles).forEach(d => {\n      if (config.dimensions[d.key]) {\n        config.dimensions[d.key].title = config.dimensions[d.key].title\n          ? config.dimensions[d.key].title\n          : d.value;\n      } else {\n        config.dimensions[d.key] = {\n          title: d.value,\n        };\n      }\n    });\n  }\n\n  const eventTypes = [\n    'render',\n    'resize',\n    'highlight',\n    'brush',\n    'brushend',\n    'brushstart',\n    'axesreorder',\n  ].concat(keys(config));\n\n  const events = dispatch.apply(this, eventTypes),\n    flags = {\n      brushable: false,\n      reorderable: false,\n      axes: false,\n      interactive: false,\n      debug: false,\n    },\n    xscale = scalePoint(),\n    dragging = {},\n    axis = axisLeft().ticks(5),\n    ctx = {},\n    canvas = {};\n\n  const brush = {\n    modes: {\n      None: {\n        install: function(pc) {}, // Nothing to be done.\n        uninstall: function(pc) {}, // Nothing to be done.\n        selected: function() {\n          return [];\n        }, // Nothing to return\n        brushState: function() {\n          return {};\n        },\n      },\n    },\n    mode: 'None',\n    predicate: 'AND',\n    currentMode: function() {\n      return this.modes[this.mode];\n    },\n  };\n\n  return {\n    config,\n    events,\n    eventTypes,\n    flags,\n    xscale,\n    dragging,\n    axis,\n    ctx,\n    canvas,\n    brush,\n  };\n};\n\nexport default initState;\n","import { keys, map } from 'd3-collection';\n\nconst computeClusterCentroids = (config, d) => {\n  const clusterCentroids = map();\n  const clusterCounts = map();\n  // determine clusterCounts\n  config.data.forEach(function(row) {\n    let scaled = config.dimensions[d].yscale(row[d]);\n    if (!clusterCounts.has(scaled)) {\n      clusterCounts.set(scaled, 0);\n    }\n    let count = clusterCounts.get(scaled);\n    clusterCounts.set(scaled, count + 1);\n  });\n\n  config.data.forEach(function(row) {\n    keys(config.dimensions).map(p => {\n      let scaled = config.dimensions[d].yscale(row[d]);\n      if (!clusterCentroids.has(scaled)) {\n        let _map = map();\n        clusterCentroids.set(scaled, _map);\n      }\n      if (!clusterCentroids.get(scaled).has(p)) {\n        clusterCentroids.get(scaled).set(p, 0);\n      }\n      let value = clusterCentroids.get(scaled).get(p);\n      value += config.dimensions[p].yscale(row[p]) / clusterCounts.get(scaled);\n      clusterCentroids.get(scaled).set(p, value);\n    });\n  });\n\n  return clusterCentroids;\n};\n\nexport default computeClusterCentroids;\n","// side effects for setters\nimport { keys } from 'd3-collection';\nimport { dispatch } from 'd3-dispatch';\nimport computeClusterCentroids from '../util/computeClusterCentroids';\nimport flipAxisAndUpdatePCP from '../util/flipAxisAndUpdatePCP';\n\nconst without = (arr, items) => {\n  items.forEach(el => {\n    delete arr[el];\n  });\n  return arr;\n};\n\nconst sideEffects = (\n  config,\n  ctx,\n  pc,\n  xscale,\n  flags,\n  brushedQueue,\n  foregroundQueue\n) =>\n  dispatch\n    .apply(this, keys(config))\n    .on('composite', d => {\n      ctx.foreground.globalCompositeOperation = d.value;\n      ctx.brushed.globalCompositeOperation = d.value;\n    })\n    .on('alpha', d => {\n      ctx.foreground.globalAlpha = d.value;\n      ctx.brushed.globalAlpha = d.value;\n    })\n    .on('brushedColor', d => {\n      ctx.brushed.strokeStyle = d.value;\n    })\n    .on('width', d => pc.resize())\n    .on('height', d => pc.resize())\n    .on('margin', d => pc.resize())\n    .on('rate', d => {\n      brushedQueue.rate(d.value);\n      foregroundQueue.rate(d.value);\n    })\n    .on('dimensions', d => {\n      config.dimensions = pc.applyDimensionDefaults(keys(d.value));\n      xscale.domain(pc.getOrderedDimensionKeys());\n      pc.sortDimensions();\n      if (flags.interactive) {\n        pc.render().updateAxes();\n      }\n    })\n    .on('bundleDimension', d => {\n      if (!keys(config.dimensions).length) pc.detectDimensions();\n      pc.autoscale();\n      if (typeof d.value === 'number') {\n        if (d.value < keys(config.dimensions).length) {\n          config.bundleDimension = config.dimensions[d.value];\n        } else if (d.value < config.hideAxis.length) {\n          config.bundleDimension = config.hideAxis[d.value];\n        }\n      } else {\n        config.bundleDimension = d.value;\n      }\n\n      config.clusterCentroids = computeClusterCentroids(\n        config,\n        config.bundleDimension\n      );\n      if (flags.interactive) {\n        pc.render();\n      }\n    })\n    .on('hideAxis', d => {\n      pc.dimensions(pc.applyDimensionDefaults());\n      pc.dimensions(without(config.dimensions, d.value));\n    })\n    .on('flipAxes', d => {\n      if (d.value && d.value.length) {\n        d.value.forEach(function(axis) {\n          flipAxisAndUpdatePCP(config, pc, axis);\n        });\n        pc.updateAxes(0);\n      }\n    });\n\nexport default sideEffects;\n","import { keys } from 'd3-collection';\n\nconst getset = (obj, state, events, side_effects, pc) => {\n  keys(state).forEach(function(key) {\n    obj[key] = function(x) {\n      if (!arguments.length) {\n        return state[key];\n      }\n      if (\n        key === 'dimensions' &&\n        Object.prototype.toString.call(x) === '[object Array]'\n      ) {\n        console.warn('pc.dimensions([]) is deprecated, use pc.dimensions({})');\n        x = obj.applyDimensionDefaults(x);\n      }\n      let old = state[key];\n      state[key] = x;\n      side_effects.call(key, obj, { value: x, previous: old });\n      events.call(key, obj, { value: x, previous: old });\n      return obj;\n    };\n  });\n};\n\nexport default getset;\n","// side effects for setters\nimport sideEffects from './state/sideEffects';\nimport getset from './util/getset';\n\nconst d3_rebind = (target, source, method) =>\n  function() {\n    const value = method.apply(source, arguments);\n    return value === source ? target : value;\n  };\n\nconst _rebind = (target, source, method) => {\n  target[method] = d3_rebind(target, source, source[method]);\n  return target;\n};\n\nconst bindEvents = (\n  __,\n  ctx,\n  pc,\n  xscale,\n  flags,\n  brushedQueue,\n  foregroundQueue,\n  events,\n  axis\n) => {\n  const side_effects = sideEffects(\n    __,\n    ctx,\n    pc,\n    xscale,\n    flags,\n    brushedQueue,\n    foregroundQueue\n  );\n\n  // create getter/setters\n  getset(pc, __, events, side_effects, pc);\n\n  // expose events\n  // getter/setter with event firing\n  _rebind(pc, events, 'on');\n\n  _rebind(\n    pc,\n    axis,\n    'ticks',\n    'orient',\n    'tickValues',\n    'tickSubdivide',\n    'tickSize',\n    'tickPadding',\n    'tickFormat'\n  );\n};\n\nexport default bindEvents;\n","// misc\nimport renderQueue from './util/renderQueue';\nimport w from './util/width';\n\n// brush\nimport install1DAxes from './brush/1d';\nimport install2DStrums from './brush/install2DStrums';\nimport installAngularBrush from './brush/installAngularBrush';\n\n// api\nimport intersection from './api/intersection';\nimport mergeParcoords from './api/mergeParcoords';\nimport selected from './api/selected';\nimport brushMode from './api/brushMode';\nimport updateAxes from './api/updateAxes';\nimport autoscale from './api/autoscale';\nimport brushable from './api/brushable';\nimport commonScale from './api/commonScale';\nimport computeRealCentroids from './api/computeRealCentroids';\nimport applyDimensionDefaults from './api/applyDimensionDefaults';\nimport createAxes from './api/createAxes';\nimport axisDots from './api/axisDots';\nimport applyAxisConfig from './api/applyAxisConfig';\nimport reorderable from './api/reorderable';\nimport resize from './api/resize';\nimport reorder from './api/reorder';\nimport sortDimensions from './api/sortDimensions';\nimport sortDimensionsByRowData from './api/sortDimensionsByRowData';\nimport clear from './api/clear';\nimport {\n  pathBrushed,\n  renderBrushed,\n  renderBrushedDefault,\n  renderBrushedQueue,\n} from './api/renderBrushed';\nimport brushReset from './api/brushReset';\nimport toType from './api/toType';\nimport toString from './api/toString';\nimport adjacentPairs from './api/adjacentPairs';\nimport highlight from './api/highlight';\nimport unhighlight from './api/unhighlight';\nimport removeAxes from './api/removeAxes';\nimport render from './api/render';\nimport renderDefault, {\n  pathForeground,\n  renderDefaultQueue,\n} from './api/renderDefault';\nimport toTypeCoerceNumbers from './api/toTypeCoerceNumbers';\nimport detectDimensionTypes from './api/detectDimensionTypes';\nimport getOrderedDimensionKeys from './api/getOrderedDimensionKeys';\nimport interactive from './api/interactive';\nimport shadows from './api/shadows';\nimport init from './api/init';\nimport flip from './api/flip';\nimport detectDimensions from './api/detectDimensions';\nimport scale from './api/scale';\n\nimport { version } from '../package.json';\nimport initState from './state';\nimport bindEvents from './bindEvents';\n\n//css\nimport './parallel-coordinates.css';\n\nconst ParCoords = userConfig => {\n  const state = initState(userConfig);\n  const {\n    config,\n    events,\n    flags,\n    xscale,\n    dragging,\n    axis,\n    ctx,\n    canvas,\n    brush,\n  } = state;\n\n  const pc = init(config, canvas, ctx);\n\n  const position = d => {\n    if (xscale.range().length === 0) {\n      xscale.range([0, w(config)], 1);\n    }\n    return dragging[d] == null ? xscale(d) : dragging[d];\n  };\n\n  const brushedQueue = renderQueue(pathBrushed(config, ctx, position))\n    .rate(50)\n    .clear(() => pc.clear('brushed'));\n\n  const foregroundQueue = renderQueue(pathForeground(config, ctx, position))\n    .rate(50)\n    .clear(function() {\n      pc.clear('foreground');\n      pc.clear('highlight');\n    });\n\n  bindEvents(\n    config,\n    ctx,\n    pc,\n    xscale,\n    flags,\n    brushedQueue,\n    foregroundQueue,\n    events,\n    axis\n  );\n\n  // expose the state of the chart\n  pc.state = config;\n  pc.flags = flags;\n\n  pc.autoscale = autoscale(config, pc, xscale, ctx);\n  pc.scale = scale(config);\n  pc.flip = flip(config);\n  pc.commonScale = commonScale(config, pc);\n  pc.detectDimensions = detectDimensions(pc);\n  // attempt to determine types of each dimension based on first row of data\n  pc.detectDimensionTypes = detectDimensionTypes;\n  pc.applyDimensionDefaults = applyDimensionDefaults(config, pc);\n  pc.getOrderedDimensionKeys = getOrderedDimensionKeys(config);\n\n  //Renders the polylines.\n  pc.render = render(config, pc, events);\n  pc.renderBrushed = renderBrushed(config, pc, events);\n  pc.render.default = renderDefault(config, pc, ctx, position);\n  pc.render.queue = renderDefaultQueue(config, pc, foregroundQueue);\n  pc.renderBrushed.default = renderBrushedDefault(\n    config,\n    ctx,\n    position,\n    pc,\n    brush\n  );\n  pc.renderBrushed.queue = renderBrushedQueue(config, brush, brushedQueue);\n\n  pc.compute_real_centroids = computeRealCentroids(config.dimensions, position);\n  pc.shadows = shadows(flags, pc);\n  pc.axisDots = axisDots(config, pc, position);\n  pc.clear = clear(config, pc, ctx, brush);\n  pc.createAxes = createAxes(config, pc, xscale, flags, axis);\n  pc.removeAxes = removeAxes(pc);\n  pc.updateAxes = updateAxes(config, pc, position, axis, flags);\n  pc.applyAxisConfig = applyAxisConfig;\n  pc.brushable = brushable(config, pc, flags);\n  pc.brushReset = brushReset(config);\n  pc.selected = selected(config);\n  pc.reorderable = reorderable(config, pc, xscale, position, dragging, flags);\n\n  // Reorder dimensions, such that the highest value (visually) is on the left and\n  // the lowest on the right. Visual values are determined by the data values in\n  // the given row.\n  pc.reorder = reorder(config, pc, xscale);\n  pc.sortDimensionsByRowData = sortDimensionsByRowData(config);\n  pc.sortDimensions = sortDimensions(config, position);\n\n  // pairs of adjacent dimensions\n  pc.adjacent_pairs = adjacentPairs;\n  pc.interactive = interactive(flags);\n\n  // expose internal state\n  pc.xscale = xscale;\n  pc.ctx = ctx;\n  pc.canvas = canvas;\n  pc.g = () => pc._g;\n\n  // rescale for height, width and margins\n  // TODO currently assumes chart is brushable, and destroys old brushes\n  pc.resize = resize(config, pc, flags, events);\n\n  // highlight an array of data\n  pc.highlight = highlight(config, pc, canvas, events, ctx, position);\n  // clear highlighting\n  pc.unhighlight = unhighlight(config, pc, canvas);\n\n  // calculate 2d intersection of line a->b with line c->d\n  // points are objects with x and y properties\n  pc.intersection = intersection;\n\n  // Merges the canvases and SVG elements into one canvas element which is then passed into the callback\n  // (so you can choose to save it to disk, etc.)\n  pc.mergeParcoords = mergeParcoords(pc);\n  pc.brushModes = () => Object.getOwnPropertyNames(brush.modes);\n  pc.brushMode = brushMode(brush, config, pc);\n\n  // install brushes\n  install1DAxes(brush, config, pc, events);\n  install2DStrums(brush, config, pc, events, xscale);\n  installAngularBrush(brush, config, pc, events, xscale);\n\n  pc.version = version;\n  // this descriptive text should live with other introspective methods\n  pc.toString = toString(config);\n  pc.toType = toType;\n  // try to coerce to number before returning type\n  pc.toTypeCoerceNumbers = toTypeCoerceNumbers;\n\n  return pc;\n};\n\nexport default ParCoords;\n"],"names":["renderQueue","func","_queue","rq","data","render","valid","invalidate","doFrame","chunk","splice","_rate","map","slice","add","concat","rate","value","arguments","length","remaining","clear","_invalidate","w","config","width","margin","right","left","brushExtents","state","pc","brushes","extents","keys","dimensions","reduce","acc","cur","brush","undefined","brushSelection","brushNodes","d","extent","brushSelections","g","selectAll","select","forEach","transition","duration","call","event","renderBrushed","brushReset","dimension","brushed","each","move","selected","brushGroup","is_brushed","p","actives","filter","_brushRange","yscale","invert","within","bandwidth","predicate","every","type","some","Error","brushPredicate","brushUpdated","events","newSelection","brushFor","axis","_selector","brushRangeMax","range","_brush","brushY","on","sourceEvent","stopPropagation","node","install","createAxes","append","attr","style","uninstall","remove","BrushState","install1DAxes","Object","assign","modes","h","height","top","bottom","install2DStrums","xscale","strums","strumRect","drawStrum","strum","activePoint","_svg","selection","id","dims","i","points","p1","p2","_line","circles","_drag","drag","enter","ev","Math","min","max","minX","x","maxX","minY","y","maxY","onDragEnd","dimensionsForPoint","dim","next","getOrderedDimensionKeys","indexOf","onDragStart","mouse","active","onDrag","containmentTest","m1","b1","m2","b2","y1","y2","ids","getOwnPropertyNames","isNaN","crossesStrum","test","d1","d2","point","removeStrum","svg","consecutive","first","second","insert","installAngularBrush","arcs","arc","p3","_path","angle","startAngle","endAngle","PI","d3Arc","innerRadius","hypothenuse","a","b","sqrt","rad","c","deg","signedAngle","ret","tmp","asin","outerRadius","sAngle","uAngle","intersection","mergeParcoords","devicePixelRatio","window","mergedCanvas","document","createElement","canvas","foreground","clientWidth","clientHeight","context","getContext","fillStyle","fillRect","key","drawImage","DOMURL","URL","webkitURL","serializer","XMLSerializer","svgStr","serializeToString","src","btoa","img","Image","onload","callback","ranges","nodes","k","push","__data__","values","ranger","domain","includes","flipAxes","unshift","ii","dimRange","dimDomain","j","category","categoryIndex","categoryRangeValue","multiBrushData","idx","filtered","z","String","toUpperCase","currentMode","brushMode","mode","brushModes","dimensionLabels","title","flipAxisAndUpdatePCP","flip","parentElement","animationTime","scale","rotateLabels","delta","deltaY","dimensionTitleRotation","preventDefault","updateAxes","position","flags","g_data","axisElement","applyAxisConfig","text","exit","brushable","reorderable","getRange","nullValueSeparator","nullValueSeparatorPadding","autoscale","ctx","defaultScales","_extent","getTime","scalePoint","tempDate","val","scaleTime","scaleLinear","counts","sort","tempArr","pop","categoricalRange","addBy","scaleOrdinal","strokeStyle","color","lineWidth","globalCompositeOperation","composite","globalAlpha","alpha","brushedColor","highlight","ctrlKey","html","outerHTML","replace","dat","parentNode","commonScale","global","t","detectDimensions","scales","bundleDimension","computeRealCentroids","row","applyDimensionDefaults","types","detectDimensionTypes","orient","ticks","innerTickSize","outerTickSize","tickPadding","index","removeAxes","_g","axes","axisDots","r","_r","marks","pow","beginPath","stroke","fill","axisCfg","axisLeft","axisRight","axisTop","axisBottom","tickValues","tickSizeInner","tickSizeOuter","tickFormat","dragging","__origin__","__","dx","sortDimensions","resize","reorder","firstDim","sortDimensionsByRowData","rowdata","reordered","highlighted","unhighlight","copy","positionSortedKeys","pixelDifference","localeCompare","isBrushed","object","brushState","hasOwnProperty","layer","clearRect","alphaOnBrushed","computeCentroids","centroids","cols","$V","cx","cy","leftCentroid","clusterCentroids","get","rightCentroid","centroid","bundlingStrength","computeControlPoints","smoothness","cps","e","col","mid","diff","subtract","singleCurve","moveTo","showControlPoints","bezierCurveTo","getNullPosition","log","singlePath","lineTo","colorPath","_functor","v","pathBrushed","functor","renderBrushedDefault","renderBrushedQueue","brushedQueue","brushesToKeep","toType","toString","match","toLowerCase","adjacentPairs","arr","pathHighlight","classed","pathForeground","renderDefault","default","renderDefaultQueue","foregroundQueue","queue","toTypeCoerceNumbers","parseFloat","Number","parseInt","ascending","interactive","shadows","init","reverse","freeGlobal","freeSelf","self","root","Function","Symbol","symToStringTag","toStringTag","DefaultConfig","initState","userConfig","dimensionTitles","warn","eventTypes","dispatch","apply","computeClusterCentroids","clusterCounts","scaled","has","set","count","_map","without","items","el","sideEffects","hideAxis","getset","obj","side_effects","prototype","old","previous","d3_rebind","target","source","method","_rebind","bindEvents","ParCoords","compute_real_centroids","adjacent_pairs","version"],"mappings":"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"}