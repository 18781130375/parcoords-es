{"version":3,"file":"parcoords.mjs","sources":["../src/RenderQueue.js","../src/helper/extend.js","../src/helper/without.js","../src/helper/rebind.js","../src/helper/functor.js","../src/index.js"],"sourcesContent":["import 'requestanimationframe';\n\nconst renderQueue = (function(func) {\n    let _queue = [],                  // data to be rendered\n        _rate = 1000,                 // number of calls per frame\n        _invalidate = function() {},  // invalidate last render queue\n        _clear = function() {};       // clearing function\n\n    let rq = function(data) {\n        if (data) rq.data(data);\n        _invalidate();\n        _clear();\n        rq.render();\n    };\n\n    rq.render = function() {\n        let valid = true;\n        _invalidate = rq.invalidate = function() {\n            valid = false;\n        };\n\n        function doFrame() {\n            if (!valid) return true;\n            let chunk = _queue.splice(0,_rate);\n            chunk.map(func);\n            requestAnimationFrame(doFrame);\n        }\n\n        doFrame();\n    };\n\n    rq.data = function(data) {\n        _invalidate();\n        _queue = data.slice(0);   // creates a copy of the data\n        return rq;\n    };\n\n    rq.add = function(data) {\n        _queue = _queue.concat(data);\n    };\n\n    rq.rate = function(value) {\n        if (!arguments.length) return _rate;\n        _rate = value;\n        return rq;\n    };\n\n    rq.remaining = function() {\n        return _queue.length;\n    };\n\n    // clear the canvas\n    rq.clear = function(func) {\n        if (!arguments.length) {\n            _clear();\n            return rq;\n        }\n        _clear = func;\n        return rq;\n    };\n\n    rq.invalidate = _invalidate;\n\n    return rq;\n});\n\nexport default renderQueue;","const extend = (target, source)=> {\n    for (let key in source) {\n        target[key] = source[key];\n    }\n    return target;\n};\n\nexport default extend;","const without = (arr, items)=> {\n    items.forEach( (el)=> {\n        delete arr[el];\n    });\n    return arr;\n};\n\nexport default without;","const d3_rebind = (target, source, method)=> {\n    return function() {\n        let value = method.apply(source, arguments);\n        return value === source ? target : value;\n    };\n}\n\nconst _rebind =  (target, source, method)=> {\n    target[method] = d3_rebind(target, source, source[method]);\n    return target;\n}\n\nexport default _rebind;","const _functor =(v)=> {\n    return typeof v === \"function\" ? v : function() { return v; };\n}\n\nexport default _functor;","import { select, selectAll, event, mouse } from 'd3-selection';\nimport { keys, entries, map } from 'd3-collection';\nimport { dispatch } from 'd3-dispatch';\nimport { extent, ascending, min } from 'd3-array';\nimport { scalePoint, scaleOrdinal, scaleTime, scaleLinear } from 'd3-scale';\nimport { line, arc as d3Arc } from 'd3-shape';\nimport { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\nimport { brushSelection, brushY } from 'd3-brush';\nimport { drag } from 'd3-drag';\n\nimport './parallel-coordinates.css';\nimport renderQueue from './RenderQueue';\n\nimport {\n    _functor,\n    _rebind,\n    extend,\n    without\n} from './helper';\n\n\n//============================================================================================\n\nconst ParCoords = (config)=> {\n    let __ = {\n        data: [],\n        highlighted: [],\n        dimensions: {},\n        dimensionTitleRotation: 0,\n        brushes: [],\n        brushed: false,\n        brushedColor: null,\n        alphaOnBrushed: 0.0,\n        mode: \"default\",\n        rate: 20,\n        width: 600,\n        height: 300,\n        margin: { top: 24, right: 20, bottom: 12, left: 20 },\n        nullValueSeparator: \"undefined\", // set to \"top\" or \"bottom\"\n        nullValueSeparatorPadding: { top: 8, right: 0, bottom: 8, left: 0 },\n        color: \"#069\",\n        composite: \"source-over\",\n        alpha: 0.7,\n        bundlingStrength: 0.5,\n        bundleDimension: null,\n        smoothness: 0.0,\n        showControlPoints: false,\n        hideAxis : [],\n        flipAxes: [],\n        animationTime: 1100, // How long it takes to flip the axis when you double click\n        rotateLabels: false\n    };\n\n    extend(__, config);\n\n    if (config && config.dimensionTitles) {\n        console.warn(\"dimensionTitles passed in config is deprecated. Add title to dimension object.\");\n        entries(config.dimensionTitles).forEach(function(d) {\n            if (__.dimensions[d.key]) {\n                __.dimensions[d.key].title = __.dimensions[d.key].title ? __.dimensions[d.key].title : d.value;\n            } else {\n                __.dimensions[d.key] = {\n                    title: d.value\n                };\n            }\n        });\n    }\n    let pc = function(selection) {\n        selection = pc.selection = select(selection);\n\n        __.width = selection.node().clientWidth;\n        __.height = selection.node().clientHeight;\n        // canvas data layers\n        [\"marks\", \"foreground\", \"brushed\", \"highlight\"].forEach(function(layer) {\n            canvas[layer] = selection\n                .append(\"canvas\")\n                .attr(\"class\", layer).node();\n            ctx[layer] = canvas[layer].getContext(\"2d\");\n        });\n\n\n        // svg tick and brush layers\n        pc.svg = selection\n            .append(\"svg\")\n            .attr(\"width\", __.width )\n            .attr(\"height\", __.height)\n            .style(\"font\", \"14px sans-serif\")\n            .style(\"position\", \"absolute\")\n\n            .append(\"svg:g\")\n            .attr(\"transform\", \"translate(\" + __.margin.left + \",\" + __.margin.top + \")\");\n\n        return pc;\n    };\n\n    let eventTypes = [\"render\", \"resize\", \"highlight\", \"brush\", \"brushend\", \"brushstart\", \"axesreorder\"].concat(keys(__));\n    let events = dispatch.apply(this, eventTypes),\n        w = function() { return __.width - __.margin.right - __.margin.left; },\n        h = function() { return __.height - __.margin.top - __.margin.bottom; },\n        flags = {\n            brushable: false,\n            reorderable: false,\n            axes: false,\n            interactive: false,\n            debug: false\n        },\n        xscale = scalePoint(),\n        dragging = {},\n        _line = line(),\n        axis = axisLeft().ticks(5),\n        g, // groups for axes, brushes\n        ctx = {},\n        canvas = {},\n        clusterCentroids = [];\n\n    // side effects for setters\n    let side_effects = dispatch.apply(this, keys(__))\n        .on(\"composite\", function(d) {\n            ctx.foreground.globalCompositeOperation = d.value;\n            ctx.brushed.globalCompositeOperation = d.value;\n        })\n        .on(\"alpha\", function(d) {\n            ctx.foreground.globalAlpha = d.value;\n            ctx.brushed.globalAlpha = d.value;\n        })\n        .on(\"brushedColor\", function (d) {\n            ctx.brushed.strokeStyle = d.value;\n        })\n        .on(\"width\", function(d) { pc.resize(); })\n        .on(\"height\", function(d) { pc.resize(); })\n        .on(\"margin\", function(d) { pc.resize(); })\n        .on(\"rate\", function(d) {\n            brushedQueue.rate(d.value);\n            foregroundQueue.rate(d.value);\n        })\n        .on(\"dimensions\", function(d) {\n            __.dimensions = pc.applyDimensionDefaults(keys(d.value));\n            xscale.domain(pc.getOrderedDimensionKeys());\n            pc.sortDimensions();\n            if (flags.interactive){pc.render().updateAxes();}\n        })\n        .on(\"bundleDimension\", function(d) {\n            if (!keys(__.dimensions).length) pc.detectDimensions();\n            pc.autoscale();\n            if (typeof d.value === \"number\") {\n                if (d.value < keys(__.dimensions).length) {\n                    __.bundleDimension = __.dimensions[d.value];\n                } else if (d.value < __.hideAxis.length) {\n                    __.bundleDimension = __.hideAxis[d.value];\n                }\n            } else {\n                __.bundleDimension = d.value;\n            }\n\n            __.clusterCentroids = compute_cluster_centroids(__.bundleDimension);\n            if (flags.interactive){pc.render();}\n        })\n        .on(\"hideAxis\", function(d) {\n            pc.dimensions(pc.applyDimensionDefaults());\n            pc.dimensions(without(__.dimensions, d.value));\n        })\n        .on(\"flipAxes\", function(d) {\n            if (d.value && d.value.length) {\n                d.value.forEach(function(axis) {\n                    flipAxisAndUpdatePCP(axis);\n                });\n                pc.updateAxes(0);\n            }\n        });\n\n    // expose the state of the chart\n    pc.state = __;\n    pc.flags = flags;\n\n    // create getter/setters\n    getset(pc, __, events);\n\n    // expose events\n    _rebind(pc, events, \"on\");\n    // getter/setter with event firing\n    function getset(obj,state,events)  {\n        keys(state).forEach(function(key) {\n            obj[key] = function(x) {\n                if (!arguments.length) {\n                    return state[key];\n                }\n                if (key === 'dimensions' && Object.prototype.toString.call(x) === '[object Array]') {\n                    console.warn(\"pc.dimensions([]) is deprecated, use pc.dimensions({})\");\n                    x = pc.applyDimensionDefaults(x);\n                }\n                let old = state[key];\n                state[key] = x;\n                side_effects.call(key, pc, {\"value\": x, \"previous\": old});\n                events.call(key ,pc, {\"value\": x, \"previous\": old});\n                return obj;\n            };\n        });\n    };\n\n    /** adjusts an axis' default range [h()+1, 1] if a NullValueSeparator is set */\n    function getRange() {\n        if (__.nullValueSeparator==\"bottom\") {\n            return [h()+1-__.nullValueSeparatorPadding.bottom-__.nullValueSeparatorPadding.top, 1];\n        } else if (__.nullValueSeparator==\"top\") {\n            return [h()+1, 1+__.nullValueSeparatorPadding.bottom+__.nullValueSeparatorPadding.top];\n        }\n        return [h()+1, 1];\n    };\n\n    pc.autoscale = function() {\n        // yscale\n        let defaultScales = {\n            \"date\": function(k) {\n                let _extent = extent(__.data, function(d) {\n                    return d[k] ? d[k].getTime() : null;\n                });\n                // special case if single value\n                if (_extent[0] === _extent[1]) {\n                    return scalePoint()\n                        .domain([_extent[0]])\n                        .range(getRange());\n                }\n                if (__.flipAxes.includes(k)) {\n                    let tempDate = [];\n                    _extent.forEach(function (val) {\n                        tempDate.unshift(val);\n                    });\n                    _extent = tempDate;\n                }\n                return scaleTime()\n                    .domain(_extent)\n                    .range(getRange());\n            },\n            \"number\": function(k) {\n                let _extent = extent(__.data, function(d) { return +d[k]; });\n                // special case if single value\n                if (_extent[0] === _extent[1]) {\n                    return scaleOrdinal()\n                        .domain([_extent[0]])\n                        .range(getRange());\n                }\n                if (__.flipAxes.includes(k)) {\n                    let temp = [];\n                    _extent.forEach(function (val) {\n                        temp.unshift(val);\n                    });\n                    _extent = temp;\n                }\n                return scaleLinear()\n                    .domain(_extent)\n                    .range(getRange());\n            },\n            \"string\": function(k) {\n                let counts = {},\n                    domain = [];\n                // Let's get the count for each value so that we can sort the domain based\n                // on the number of items for each value.\n                __.data.map(function(p) {\n                    if (p[k] === undefined && __.nullValueSeparator!== \"undefined\"){\n                        return; // null values will be drawn beyond the horizontal null value separator!\n                    }\n                    if (counts[p[k]] === undefined) {\n                        counts[p[k]] = 1;\n                    } else {\n                        counts[p[k]] = counts[p[k]] + 1;\n                    }\n                });\n                if (__.flipAxes.includes(k)) {\n                    domain = Object.getOwnPropertyNames(counts).sort();\n                } else {\n                    let tempArr = Object.getOwnPropertyNames(counts).sort();\n                    for (let i = 0; i < Object.getOwnPropertyNames(counts).length; i++) {\n                        domain.push(tempArr.pop());\n                    }\n                }\n\n                //need to create an ordinal scale for categorical data\n                let categoricalRange = [];\n                if (domain.length === 1) { //edge case\n                    domain = [\" \", domain[0], \" \"];\n                }\n                let addBy = getRange()[0] / (domain.length - 1);\n                for (let j = 0; j < domain.length; j++) {\n                    if (categoricalRange.length === 0) {\n                        categoricalRange.push(0);\n                        continue;\n                    }\n                    categoricalRange.push(categoricalRange[j - 1] + addBy)\n                }\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(categoricalRange);\n            }\n        };\n        keys(__.dimensions).forEach(function(k) {\n            __.dimensions[k].yscale = defaultScales[__.dimensions[k].type](k);\n        });\n\n        // xscale\n        xscale.range([0, w()], 1);\n        // Retina display, etc.\n        let devicePixelRatio = window.devicePixelRatio || 1;\n\n        // canvas sizes\n        pc.selection.selectAll(\"canvas\")\n            .style(\"margin-top\", __.margin.top + \"px\")\n            .style(\"margin-left\", __.margin.left + \"px\")\n            .style(\"width\", (w()+2) + \"px\")\n            .style(\"height\", (h()+2) + \"px\")\n            .attr(\"width\", (w()+2) * devicePixelRatio)\n            .attr(\"height\", (h()+2) * devicePixelRatio);\n        // default styles, needs to be set when canvas width changes\n        ctx.foreground.strokeStyle = __.color;\n        ctx.foreground.lineWidth = 1.4;\n        ctx.foreground.globalCompositeOperation = __.composite;\n        ctx.foreground.globalAlpha = __.alpha;\n        ctx.foreground.scale(devicePixelRatio, devicePixelRatio);\n        ctx.brushed.strokeStyle = __.brushedColor;\n        ctx.brushed.lineWidth = 1.4;\n        ctx.brushed.globalCompositeOperation = __.composite;\n        ctx.brushed.globalAlpha = __.alpha;\n        ctx.brushed.scale(devicePixelRatio, devicePixelRatio);\n        ctx.highlight.lineWidth = 3;\n        ctx.highlight.scale(devicePixelRatio, devicePixelRatio);\n\n        return this;\n    };\n\n    pc.scale = function(d, domain) {\n        __.dimensions[d].yscale.domain(domain);\n\n        return this;\n    };\n\n    pc.flip = function(d) {\n        //__.dimensions[d].yscale.domain().reverse();                               // does not work\n        __.dimensions[d].yscale.domain(__.dimensions[d].yscale.domain().reverse()); // works\n\n        return this;\n    };\n\n    pc.commonScale = function(global, type) {\n        let t = type || \"number\";\n        if (typeof global === 'undefined') {\n            global = true;\n        }\n\n        // try to autodetect dimensions and create scales\n        if (!keys(__.dimensions).length) {\n            pc.detectDimensions()\n        }\n        pc.autoscale();\n\n        // scales of the same type\n        let scales = keys(__.dimensions).filter(function(p) {\n            return __.dimensions[p].type == t;\n        });\n\n        if (global) {\n            let _extent = extent(scales.map(function(d,i) {\n                return __.dimensions[d].yscale.domain();\n            }).reduce(function(a,b) {\n                return a.concat(b);\n            }));\n\n            scales.forEach(function(d) {\n                __.dimensions[d].yscale.domain(_extent);\n            });\n\n        } else {\n            scales.forEach(function(d) {\n                __.dimensions[d].yscale.domain(extent(__.data, function(d) { return +d[k]; }));\n            });\n        }\n\n        // update centroids\n        if (__.bundleDimension !== null) {\n            pc.bundleDimension(__.bundleDimension);\n        }\n\n        return this;\n    };\n    pc.detectDimensions = function() {\n        pc.dimensions(pc.applyDimensionDefaults());\n        return this;\n    };\n\n    pc.applyDimensionDefaults = function(dims) {\n        let types = pc.detectDimensionTypes(__.data);\n        dims = dims ? dims : keys(types);\n        let newDims = {};\n        let currIndex = 0;\n        dims.forEach(function(k) {\n            newDims[k] = __.dimensions[k] ? __.dimensions[k] : {};\n            //Set up defaults\n            newDims[k].orient= newDims[k].orient ? newDims[k].orient : 'left';\n            newDims[k].ticks= newDims[k].ticks != null ? newDims[k].ticks : 5;\n            newDims[k].innerTickSize= newDims[k].innerTickSize != null ? newDims[k].innerTickSize : 6;\n            newDims[k].outerTickSize= newDims[k].outerTickSize != null ? newDims[k].outerTickSize : 0;\n            newDims[k].tickPadding= newDims[k].tickPadding != null ? newDims[k].tickPadding : 3;\n            newDims[k].type= newDims[k].type ? newDims[k].type : types[k];\n\n            newDims[k].index = newDims[k].index != null ? newDims[k].index : currIndex;\n            currIndex++;\n        });\n        return newDims;\n    };\n\n    pc.getOrderedDimensionKeys = function(){\n        return keys(__.dimensions).sort(function(x, y){\n            return ascending(__.dimensions[x].index, __.dimensions[y].index);\n        });\n    };\n\n// a better \"typeof\" from this post: http://stackoverflow.com/questions/7390426/better-way-to-get-type-of-a-javascript-variable\n    pc.toType = function(v) {\n        return ({}).toString.call(v).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n    };\n\n// try to coerce to number before returning type\n    pc.toTypeCoerceNumbers = function(v) {\n        if ((parseFloat(v) == v) && (v != null)) {\n            return \"number\";\n        }\n        return pc.toType(v);\n    };\n\n// attempt to determine types of each dimension based on first row of data\n    pc.detectDimensionTypes = function(data) {\n        let types = {};\n        keys(data[0])\n            .forEach(function(col) {\n                types[isNaN(Number(col)) ? col : parseInt(col)] = pc.toTypeCoerceNumbers(data[0][col]);\n            });\n        return types;\n    };\n\n    pc.render = function() {\n        // try to autodetect dimensions and create scales\n        if (!keys(__.dimensions).length) {\n            pc.detectDimensions()\n        }\n        pc.autoscale();\n\n        pc.render[__.mode]();\n\n        events.call('render', this);\n        return this;\n    };\n\n    pc.renderBrushed = function() {\n        if (!keys(__.dimensions).length) pc.detectDimensions();\n\n        pc.renderBrushed[__.mode]();\n        events.call('render', this);\n        return this;\n    };\n\n    function isBrushed() {\n        if (__.brushed && __.brushed.length !== __.data.length)\n            return true;\n\n        let object = brush.currentMode().brushState();\n\n        for (let key in object) {\n            if (object.hasOwnProperty(key)) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    pc.render.default = function() {\n        pc.clear('foreground');\n        pc.clear('highlight');\n\n        pc.renderBrushed.default();\n\n        __.data.forEach(path_foreground);\n    };\n\n    let foregroundQueue = renderQueue(path_foreground)\n        .rate(50)\n        .clear(function() {\n            pc.clear('foreground');\n            pc.clear('highlight');\n        });\n\n    pc.render.queue = function() {\n        pc.renderBrushed.queue();\n\n        foregroundQueue(__.data);\n    };\n\n    pc.renderBrushed.default = function() {\n        pc.clear('brushed');\n\n        if (isBrushed()) {\n            __.brushed.forEach(path_brushed);\n        }\n    };\n\n    let brushedQueue = renderQueue(path_brushed)\n        .rate(50)\n        .clear(function() {\n            pc.clear('brushed');\n        });\n\n    pc.renderBrushed.queue = function() {\n        if (isBrushed()) {\n            brushedQueue(__.brushed);\n        } else {\n            brushedQueue([]); // This is needed to clear the currently brushed items\n        }\n    };\n    function compute_cluster_centroids(d) {\n\n        let clusterCentroids = map();\n        let clusterCounts = map();\n        // determine clusterCounts\n        __.data.forEach(function(row) {\n            let scaled = __.dimensions[d].yscale(row[d]);\n            if (!clusterCounts.has(scaled)) {\n                clusterCounts.set(scaled, 0);\n            }\n            let count = clusterCounts.get(scaled);\n            clusterCounts.set(scaled, count + 1);\n        });\n\n        __.data.forEach(function(row) {\n            keys(__.dimensions).map(function(p, i) {\n                let scaled = __.dimensions[d].yscale(row[d]);\n                if (!clusterCentroids.has(scaled)) {\n                    let _map = map();\n                    clusterCentroids.set(scaled, _map);\n                }\n                if (!clusterCentroids.get(scaled).has(p)) {\n                    clusterCentroids.get(scaled).set(p, 0);\n                }\n                let value = clusterCentroids.get(scaled).get(p);\n                value += __.dimensions[p].yscale(row[p]) / clusterCounts.get(scaled);\n                clusterCentroids.get(scaled).set(p, value);\n            });\n        });\n\n        return clusterCentroids;\n\n    }\n\n    function compute_centroids(row) {\n        let centroids = [];\n\n        let p = keys(__.dimensions);\n        let cols = p.length;\n        let a = 0.5;\t\t\t// center between axes\n        for (let i = 0; i < cols; ++i) {\n            // centroids on 'real' axes\n            let x = position(p[i]);\n            let y = __.dimensions[p[i]].yscale(row[p[i]]);\n            centroids.push($V([x, y]));\n\n            // centroids on 'virtual' axes\n            if (i < cols - 1) {\n                let cx = x + a * (position(p[i+1]) - x);\n                let cy = y + a * (__.dimensions[p[i+1]].yscale(row[p[i+1]]) - y);\n                if (__.bundleDimension !== null) {\n                    let leftCentroid = __.clusterCentroids.get(__.dimensions[__.bundleDimension].yscale(row[__.bundleDimension])).get(p[i]);\n                    let rightCentroid = __.clusterCentroids.get(__.dimensions[__.bundleDimension].yscale(row[__.bundleDimension])).get(p[i+1]);\n                    let centroid = 0.5 * (leftCentroid + rightCentroid);\n                    cy = centroid + (1 - __.bundlingStrength) * (cy - centroid);\n                }\n                centroids.push($V([cx, cy]));\n            }\n        }\n\n        return centroids;\n    }\n\n    pc.compute_real_centroids = function(row) {\n        let realCentroids = [];\n\n        let p = keys(__.dimensions);\n        let cols = p.length;\n        let a = 0.5;\n\n        for (let i = 0; i < cols; ++i) {\n            let x = position(p[i]);\n            let y = __.dimensions[p[i]].yscale(row[p[i]]);\n            realCentroids.push([x, y]);\n        }\n\n        return realCentroids;\n    }\n\n    function compute_control_points(centroids) {\n\n        let cols = centroids.length;\n        let a = __.smoothness;\n        let cps = [];\n\n        cps.push(centroids[0]);\n        cps.push($V([centroids[0].e(1) + a * 2 * (centroids[1].e(1) - centroids[0].e(1)), centroids[0].e(2)]));\n        for (let col = 1; col < cols - 1; ++col) {\n            let mid = centroids[col];\n            let left = centroids[col - 1];\n            let right = centroids[col + 1];\n\n            let diff = left.subtract(right);\n            cps.push(mid.add(diff.x(a)));\n            cps.push(mid);\n            cps.push(mid.subtract(diff.x(a)));\n        }\n        cps.push($V([centroids[cols - 1].e(1) + a * 2 * (centroids[cols - 2].e(1) - centroids[cols - 1].e(1)), centroids[cols - 1].e(2)]));\n        cps.push(centroids[cols - 1]);\n\n        return cps;\n    }\n\n    pc.shadows = function() {\n        flags.shadows = true;\n        pc.alphaOnBrushed(0.1);\n        pc.render();\n        return this;\n    };\n\n// draw dots with radius r on the axis line where data intersects\n    pc.axisDots = function(_r) {\n        let r = _r || 0.1;\n        let ctx = pc.ctx.marks;\n        let startAngle = 0;\n        let endAngle = 2 * Math.PI;\n        ctx.globalAlpha = min([ 1 / Math.pow(__.data.length, 1 / 2), 1 ]);\n        __.data.forEach(function(d) {\n            entries(__.dimensions).forEach(function(p, i) {\n                ctx.beginPath();\n                ctx.arc(position(p), __.dimensions[p.key].yscale(d[p]), r, startAngle, endAngle);\n                ctx.stroke();\n                ctx.fill();\n            });\n        });\n        return this;\n    };\n\n    // draw single cubic bezier curve\n    function single_curve(d, ctx) {\n\n        let centroids = compute_centroids(d);\n        let cps = compute_control_points(centroids);\n\n        ctx.moveTo(cps[0].e(1), cps[0].e(2));\n        for (let i = 1; i < cps.length; i += 3) {\n            if (__.showControlPoints) {\n                for (let j = 0; j < 3; j++) {\n                    ctx.fillRect(cps[i+j].e(1), cps[i+j].e(2), 2, 2);\n                }\n            }\n            ctx.bezierCurveTo(cps[i].e(1), cps[i].e(2), cps[i+1].e(1), cps[i+1].e(2), cps[i+2].e(1), cps[i+2].e(2));\n        }\n    };\n\n    // draw single polyline\n    function color_path(d, ctx) {\n        ctx.beginPath();\n        if ((__.bundleDimension !== null && __.bundlingStrength > 0) || __.smoothness > 0) {\n            single_curve(d, ctx);\n        } else {\n            single_path(d, ctx);\n        }\n        ctx.stroke();\n    };\n\n\n// draw many polylines of the same color\n    function paths(data, ctx) {\n        ctx.clearRect(-1, -1, w() + 2, h() + 2);\n        ctx.beginPath();\n        data.forEach(function(d) {\n            if ((__.bundleDimension !== null && __.bundlingStrength > 0) || __.smoothness > 0) {\n                single_curve(d, ctx);\n            } else {\n                single_path(d, ctx);\n            }\n        });\n        ctx.stroke();\n    };\n\n// returns the y-position just beyond the separating null value line\n    function getNullPosition() {\n        if (__.nullValueSeparator==\"bottom\") {\n            return h()+1;\n        } else if (__.nullValueSeparator==\"top\") {\n            return 1;\n        } else {\n            console.log(\"A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'.\");\n        }\n        return h()+1;\n    };\n\n    function single_path(d, ctx) {\n        entries(__.dimensions).forEach(function(p, i) {  //p isn't really p\n            if (i == 0) {\n                ctx.moveTo(position(p.key), typeof d[p.key] =='undefined' ? getNullPosition() : __.dimensions[p.key].yscale(d[p.key]));\n            } else {\n                ctx.lineTo(position(p.key), typeof d[p.key] =='undefined' ? getNullPosition() : __.dimensions[p.key].yscale(d[p.key]));\n            }\n        });\n    };\n\n    function path_brushed(d, i) {\n        if (__.brushedColor !== null) {\n            ctx.brushed.strokeStyle = _functor(__.brushedColor)(d, i);\n        } else {\n            ctx.brushed.strokeStyle = _functor(__.color)(d, i);\n        }\n        return color_path(d, ctx.brushed)\n    };\n\n    function path_foreground(d, i) {\n        ctx.foreground.strokeStyle = _functor(__.color)(d, i);\n        return color_path(d, ctx.foreground);\n    };\n\n    function path_highlight(d, i) {\n        ctx.highlight.strokeStyle = _functor(__.color)(d, i);\n        return color_path(d, ctx.highlight);\n    };\n    pc.clear = function(layer) {\n        ctx[layer].clearRect(0, 0, w() + 2, h() + 2);\n\n        // This will make sure that the foreground items are transparent\n        // without the need for changing the opacity style of the foreground canvas\n        // as this would stop the css styling from working\n        if(layer === \"brushed\" && isBrushed()) {\n            ctx.brushed.fillStyle = pc.selection.style(\"background-color\");\n            ctx.brushed.globalAlpha = 1 - __.alphaOnBrushed;\n            ctx.brushed.fillRect(0, 0, w() + 2, h() + 2);\n            ctx.brushed.globalAlpha = __.alpha;\n        }\n        return this;\n    };\n    _rebind(pc, axis, \"ticks\", \"orient\", \"tickValues\", \"tickSubdivide\", \"tickSize\", \"tickPadding\", \"tickFormat\");\n\n    function flipAxisAndUpdatePCP(dimension) {\n        let g = pc.svg.selectAll(\".dimension\");\n        pc.flip(dimension);\n        pc.brushReset(dimension);\n        select(this.parentElement)\n            .transition()\n            .duration(__.animationTime)\n            .call(axis.scale(__.dimensions[dimension].yscale))\n        pc.render();\n    }\n\n    function rotateLabels() {\n        if (!__.rotateLabels) return;\n\n        let delta = event.deltaY;\n        delta = delta < 0 ? -5 : delta;\n        delta = delta > 0 ? 5 : delta;\n\n        __.dimensionTitleRotation += delta;\n        pc.svg.selectAll(\"text.label\")\n            .attr(\"transform\", \"translate(0,-5) rotate(\" + __.dimensionTitleRotation + \")\");\n        event.preventDefault();\n    }\n\n    function dimensionLabels(d) {\n        return __.dimensions[d].title ? __.dimensions[d].title : d;  // dimension display names\n    }\n\n    pc.createAxes = function() {\n        if (g) pc.removeAxes();\n        // Add a group element for each dimension.\n        g = pc.svg.selectAll(\".dimension\")\n            .data(pc.getOrderedDimensionKeys(), function(d) {\n                return d;\n            })\n            .enter().append(\"svg:g\")\n            .attr(\"class\", \"dimension\")\n            .attr(\"transform\", function(d) {\n                return \"translate(\" + xscale(d) + \")\";\n            });\n        // Add an axis and title.\n        g.append(\"svg:g\")\n            .attr(\"class\", \"axis\")\n            .attr(\"transform\", \"translate(0,0)\")\n            .each(function(d) {\n                let axisElement = select(this).call( pc.applyAxisConfig(axis, __.dimensions[d]) );\n\n                axisElement.selectAll(\"path\")\n                    .style(\"fill\", \"none\")\n                    .style(\"stroke\", \"#222\")\n                    .style(\"shape-rendering\", \"crispEdges\");\n\n                axisElement.selectAll(\"line\")\n                    .style(\"fill\", \"none\")\n                    .style(\"stroke\", \"#222\")\n                    .style(\"shape-rendering\", \"crispEdges\");\n            })\n\n            .append(\"svg:text\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"y\", 0)\n            .attr(\"transform\", \"translate(0,-5) rotate(\" + __.dimensionTitleRotation + \")\")\n            .attr(\"x\", 0)\n            .attr(\"class\", \"label\")\n            .text(dimensionLabels)\n            .on(\"dblclick\", flipAxisAndUpdatePCP)\n            .on(\"wheel\", rotateLabels);\n\n        if (__.nullValueSeparator==\"top\") {\n            pc.svg.append(\"line\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", 1+__.nullValueSeparatorPadding.top)\n                .attr(\"x2\", w())\n                .attr(\"y2\", 1+__.nullValueSeparatorPadding.top)\n                .attr(\"stroke-width\", 1)\n                .attr(\"stroke\", \"#777\")\n                .attr(\"fill\", \"none\")\n                .attr(\"shape-rendering\", \"crispEdges\");\n        } else if (__.nullValueSeparator==\"bottom\") {\n            pc.svg.append(\"line\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", h()+1-__.nullValueSeparatorPadding.bottom)\n                .attr(\"x2\", w())\n                .attr(\"y2\", h()+1-__.nullValueSeparatorPadding.bottom)\n                .attr(\"stroke-width\", 1)\n                .attr(\"stroke\", \"#777\")\n                .attr(\"fill\", \"none\")\n                .attr(\"shape-rendering\", \"crispEdges\");\n        }\n\n        flags.axes= true;\n        return this;\n    };\n\n    pc.removeAxes = function() {\n        g.remove();\n        g = undefined;\n        return this;\n    };\n\n    pc.updateAxes = function(animationTime) {\n        if (typeof animationTime === 'undefined') {\n            animationTime = __.animationTime;\n        }\n        let g_data = pc.svg.selectAll(\".dimension\").data(pc.getOrderedDimensionKeys());\n        // Enter\n        g_data.enter().append(\"svg:g\")\n            .attr(\"class\", \"dimension\")\n            .attr(\"transform\", function(p) { return \"translate(\" + position(p) + \")\"; })\n            .style(\"opacity\", 0)\n            .append(\"svg:g\")\n            .attr(\"class\", \"axis\")\n            .attr(\"transform\", \"translate(0,0)\")\n            .each(function(d) {\n                let axisElement = select(this).call( pc.applyAxisConfig(axis, __.dimensions[d]) );\n\n                axisElement.selectAll(\"path\")\n                    .style(\"fill\", \"none\")\n                    .style(\"stroke\", \"#222\")\n                    .style(\"shape-rendering\", \"crispEdges\");\n\n                axisElement.selectAll(\"line\")\n                    .style(\"fill\", \"none\")\n                    .style(\"stroke\", \"#222\")\n                    .style(\"shape-rendering\", \"crispEdges\");\n            })\n            .append(\"svg:text\")\n            .attr({\n                \"text-anchor\": \"middle\",\n                \"y\": 0,\n                \"transform\": \"translate(0,-5) rotate(\" + __.dimensionTitleRotation + \")\",\n                \"x\": 0,\n                \"class\": \"label\"\n            })\n            .text(dimensionLabels)\n            .on(\"dblclick\", flipAxisAndUpdatePCP)\n            .on(\"wheel\", rotateLabels);\n\n        // Update\n        g_data.attr(\"opacity\", 0);\n        g_data.select(\".axis\")\n            .transition()\n            .duration(animationTime)\n            .each(function(d) { select(this).call( pc.applyAxisConfig(axis, __.dimensions[d]) )\n            });\n        g_data.select(\".label\")\n            .transition()\n            .duration(animationTime)\n            .text(dimensionLabels)\n            .attr(\"transform\", \"translate(0,-5) rotate(\" + __.dimensionTitleRotation + \")\");\n\n        // Exit\n        g_data.exit().remove();\n\n        g = pc.svg.selectAll(\".dimension\");\n        g.transition().duration(animationTime)\n            .attr(\"transform\", function(p) { return \"translate(\" + position(p) + \")\"; })\n            .style(\"opacity\", 1);\n\n        pc.svg.selectAll(\".axis\")\n            .transition()\n            .duration(animationTime)\n            .each(function(d) { select(this).call( pc.applyAxisConfig(axis, __.dimensions[d]) );\n            });\n\n        if (flags.brushable) pc.brushable();\n        if (flags.reorderable) pc.reorderable();\n        if (pc.brushMode() !== \"None\") {\n            let mode = pc.brushMode();\n            pc.brushMode(\"None\");\n            pc.brushMode(mode);\n        }\n        return this;\n    };\n\n    pc.applyAxisConfig = function(axis, dimension) {\n        let axisCfg;\n\n        switch (dimension.orient) {\n            case 'left':\n                axisCfg = axisLeft(dimension.yscale);\n                break;\n            case 'right':\n                axisCfg = axisRight(dimension.yscale);\n\n                break;\n            case 'top':\n                axisCfg = axisTop(dimension.yscale);\n\n                break;\n            case 'bottom':\n                axisCfg = axisBottom(dimension.yscale);\n\n                break;\n            default:\n                axisCfg = axisLeft(dimension.yscale);\n\n                break;\n        }\n\n        axisCfg.ticks(dimension.ticks)\n            .tickValues(dimension.tickValues)\n            .tickSizeInner(dimension.innerTickSize)\n            .tickSizeOuter(dimension.outerTickSize)\n            .tickPadding(dimension.tickPadding)\n            .tickFormat(dimension.tickFormat);\n\n        return axisCfg;\n    };\n\n    pc.brushable = function() {\n        if (!g) pc.createAxes();\n\n        // Add and store a brush for each axis.\n        g.append(\"svg:g\")\n            .attr(\"class\", \"brush\")\n            .each(function(d) {\n                if (__.dimensions[d] !== undefined) {\n                    __.dimensions[d][\"brush\"] = brushY(select(this))\n                        .extent([[-15, 0], [15, __.dimensions[d].yscale.range()[0]]]);\n                    select(this).call(\n                        __.dimensions[d][\"brush\"]\n                            .on(\"start\", function() {\n                                if (event.sourceEvent !== null && !event.sourceEvent.ctrlKey) {\n                                    pc.brushReset();\n                                }\n                            })\n                            .on(\"brush\", function () {\n                                if (!event.sourceEvent.ctrlKey) {\n                                    pc.brush();\n                                }\n                            })\n                            .on(\"end\", function() {\n                                // save brush selection is ctrl key is held\n                                // store important brush information and\n                                // the html element of the selection,\n                                // to make a dummy selection element\n                                if (event.sourceEvent.ctrlKey) {\n                                    let html = select(this).select('.selection').nodes()[0].outerHTML;\n                                    html = html.replace('class=\"selection\"', ('class=\"selection dummy' + ' selection-' + __.brushes.length + '\"'));\n                                    let dat = select(this).nodes()[0].__data__;\n                                    let brush = {\n                                        id: __.brushes.length,\n                                        extent: brushSelection(this),\n                                        html: html,\n                                        data: dat\n                                    };\n                                    __.brushes.push(brush);\n                                    select(\n                                        select(this)\n                                            .nodes()[0].parentNode\n                                    )\n                                        .select('.axis')\n                                        .nodes()[0].outerHTML += html;\n                                    pc.brush();\n                                    __.dimensions[d].brush.move(select(this, null));\n                                    select(this).select(\".selection\").attr(\"style\", \"display:none\");\n                                    pc.brushable();\n                                } else {\n                                    pc.brush();\n                                }\n                            })\n                    );\n                    select(this)\n                        .on(\"dblclick\", function () {\n                            pc.brushReset(d);\n                        });\n                }\n            });\n\n        flags.brushable = true;\n        return this;\n    };\n\n    pc.brush = function() {\n        __.brushed = pc.selected();\n        render.call(\"render\");\n    }\n\n    pc.brushReset = function(dimension) {\n        let brushesToKeep = [];\n        for (let j = 0; j < __.brushes.length; j++) {\n            if (__.brushes[j].data !== dimension) {\n                brushesToKeep.push(__.brushes[j]);\n            }\n        }\n\n        __.brushes = brushesToKeep;\n        __.brushed = false;\n\n        if (g) {\n            let nodes = selectAll(\".brush\").nodes();\n            for (let i = 0; i < nodes.length; i++) {\n                if (nodes[i].__data__ === dimension) {\n                    // remove all dummy brushes for this axis or the real brush\n                    select(select(nodes[i]).nodes()[0].parentNode).selectAll(\".dummy\").remove();\n                    __.dimensions[dimension].brush.move(select(nodes[i], null));\n                }\n            }\n        }\n\n        return this;\n    };\n\n    pc.selected = function() {\n        let actives = [];\n        let extents = [];\n        let ranges = {};\n        //get brush selections from each node, convert to actual values\n        //invert order of values in array to comply with the parcoords architecture\n        if (__.brushes.length === 0) {\n            let nodes = selectAll(\".brush\").nodes();\n            for (let k = 0; k < nodes.length; k++) {\n                if (brushSelection(nodes[k]) !== null) {\n                    actives.push(nodes[k].__data__);\n                    let values = [];\n                    let ranger = brushSelection(nodes[k]);\n                    if (typeof __.dimensions[nodes[k].__data__].yscale.domain()[0] === \"number\") {\n                        for (let i = 0; i < ranger.length; i++) {\n                            if (actives.includes(nodes[k].__data__) && __.flipAxes.includes(nodes[k].__data__)) {\n                                values.push(__.dimensions[nodes[k].__data__].yscale.invert(ranger[i]));\n                            } else if (__.dimensions[nodes[k].__data__].yscale() !== 1)  {\n                                values.unshift(__.dimensions[nodes[k].__data__].yscale.invert(ranger[i]));\n                            }\n                        }\n                        extents.push(values)\n                        for (let ii = 0; ii < extents.length; ii++) {\n                            if (extents[ii].length === 0) {\n                                extents[ii] = [1, 1];\n                            }\n                        }\n                    } else {\n                        ranges[nodes[k].__data__] = brushSelection(nodes[k]);\n                        let dimRange = __.dimensions[nodes[k].__data__].yscale.range();\n                        let dimDomain = __.dimensions[nodes[k].__data__].yscale.domain();\n                        for (let j = 0; j < dimRange.length; j++) {\n                            if ((dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) && actives.includes(nodes[k].__data__) && __.flipAxes.includes(nodes[k].__data__)) {\n                                values.push(dimRange[j]);\n                            } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n                                values.unshift(dimRange[j]);\n                            }\n                        }\n                        extents.push(values);\n                        for (let ii = 0; ii < extents.length; ii++) {\n                            if (extents[ii].length === 0) {\n                                extents[ii] = [1, 1];\n                            }\n                        }\n                    }\n                }\n            }\n            // test if within range\n            let within = {\n                \"date\": function(d,p,dimension) {\n                    let category = d[p];\n                    let categoryIndex = __.dimensions[p].yscale.domain().indexOf(category);\n                    let categoryRangeValue = __.dimensions[p].yscale.range()[categoryIndex];\n                    return categoryRangeValue >= ranges[p][0] && categoryRangeValue <= ranges[p][1];\n                },\n                \"number\": function(d,p,dimension) {\n                    return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1];\n                },\n                \"string\": function(d,p,dimension) {\n                    let category = d[p];\n                    let categoryIndex = __.dimensions[p].yscale.domain().indexOf(category);\n                    let categoryRangeValue = __.dimensions[p].yscale.range()[categoryIndex];\n                    return categoryRangeValue >= ranges[p][0] && categoryRangeValue <= ranges[p][1];\n                }\n            };\n            return __.data\n                .filter(function(d) {\n                    return actives.every(function(p, dimension) {\n                        return within[__.dimensions[p].type](d,p,dimension);\n                    });\n                });\n        } else {\n            // need to get data from each brush instead of each axis\n            // first must find active axes by iterating through all brushes\n            // then go through similiar process as above.\n            let multiBrushData = [];\n            for (let idx = 0; idx < __.brushes.length; idx++) {\n                let brush = __.brushes[idx];\n                let values = [];\n                let ranger = brush.extent;\n                let actives = [brush.data];\n                if (typeof __.dimensions[brush.data].yscale.domain()[0] === \"number\") {\n                    for (let i = 0; i < ranger.length; i++) {\n                        if (actives.includes(brush.data) && __.flipAxes.includes(brush.data)) {\n                            values.push(__.dimensions[brush.data].yscale.invert(ranger[i]));\n                        } else if (__.dimensions[brush.data].yscale() !== 1)  {\n                            values.unshift(__.dimensions[brush.data].yscale.invert(ranger[i]));\n                        }\n                    }\n                    extents.push(values)\n                    for (let ii = 0; ii < extents.length; ii++) {\n                        if (extents[ii].length === 0) {\n                            extents[ii] = [1, 1];\n                        }\n                    }\n                } else {\n                    ranges[brush.data] = brush.extent;\n                    let dimRange = __.dimensions[brush.data].yscale.range();\n                    let dimDomain = __.dimensions[brush.data].yscale.domain();\n                    for (let j = 0; j < dimRange.length; j++) {\n                        if ((dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) && actives.includes(brush.data) && __.flipAxes.includes(brush.data)) {\n                            values.push(dimRange[j]);\n                        } else if (dimRange[j] >= ranger[0] && dimRange[j] <= ranger[1]) {\n                            values.unshift(dimRange[j]);\n                        }\n                    }\n                    extents.push(values);\n                    for (let ii = 0; ii < extents.length; ii++) {\n                        if (extents[ii].length === 0) {\n                            extents[ii] = [1, 1];\n                        }\n                    }\n                }\n                let within = {\n                    \"date\": function(d,p,dimension) {\n                        let category = d[p];\n                        let categoryIndex = __.dimensions[p].yscale.domain().indexOf(category);\n                        let categoryRangeValue = __.dimensions[p].yscale.range()[categoryIndex];\n                        return categoryRangeValue >= ranges[p][0] && categoryRangeValue <= ranges[p][1];\n                    },\n                    \"number\": function(d,p,dimension) {\n                        return extents[idx][0] <= d[p] && d[p] <= extents[idx][1];\n                    },\n                    \"string\": function(d,p,dimension) {\n                        let category = d[p];\n                        let categoryIndex = __.dimensions[p].yscale.domain().indexOf(category);\n                        let categoryRangeValue = __.dimensions[p].yscale.range()[categoryIndex];\n                        return categoryRangeValue >= ranges[p][0] && categoryRangeValue <= ranges[p][1];\n                    }\n                };\n\n                // filter data, but instead of returning it now,\n                // put it into multiBrush data which is returned after\n                // all brushes are iterated through.\n                let filtered = __.data\n                    .filter(function(d) {\n                        return actives.every(function(p, dimension) {\n                            return within[__.dimensions[p].type](d,p,dimension);\n                        });\n                    });\n                for (let z = 0; z < filtered.length; z++) {\n                    multiBrushData.push(filtered[z]);\n                }\n                actives = [];\n                ranges = {};\n            }\n            return multiBrushData;\n        }\n\n\n    };\n\n// Jason Davies, http://bl.ocks.org/1341281\n    pc.reorderable = function() {\n        if (!g) pc.createAxes();\n        g.style(\"cursor\", \"move\")\n            .call(drag()\n                .on(\"start\", function(d) {\n                    dragging[d] = this.__origin__ = xscale(d);\n                })\n                .on(\"drag\", function(d) {\n                    dragging[d] = Math.min(w(), Math.max(0, this.__origin__ += event.dx));\n                    pc.sortDimensions();\n                    xscale.domain(pc.getOrderedDimensionKeys());\n                    pc.render();\n                    g.attr(\"transform\", function(d) {\n                        return \"translate(\" + position(d) + \")\";\n                    });\n                })\n                .on(\"end\", function(d) {\n                    delete this.__origin__;\n                    delete dragging[d];\n                    select(this).transition().attr(\"transform\", \"translate(\" + xscale(d) + \")\");\n                    pc.render();\n                }));\n        flags.reorderable = true;\n        return this;\n    };\n\n// Reorder dimensions, such that the highest value (visually) is on the left and\n// the lowest on the right. Visual values are determined by the data values in\n// the given row.\n    pc.reorder = function(rowdata) {\n        let firstDim = pc.getOrderedDimensionKeys()[0];\n\n        pc.sortDimensionsByRowData(rowdata);\n        // NOTE: this is relatively cheap given that:\n        // number of dimensions < number of data items\n        // Thus we check equality of order to prevent rerendering when this is the case.\n        let reordered = false;\n        reordered = firstDim !== pc.getOrderedDimensionKeys()[0];\n\n        if (reordered) {\n            xscale.domain(pc.getOrderedDimensionKeys());\n            let highlighted = __.highlighted.slice(0);\n            pc.unhighlight();\n\n            g.transition()\n                .duration(1500)\n                .attr(\"transform\", function(d) {\n                    return \"translate(\" + xscale(d) + \")\";\n                });\n            pc.render();\n\n            // pc.highlight() does not check whether highlighted is length zero, so we do that here.\n            if (highlighted.length !== 0) {\n                pc.highlight(highlighted);\n            }\n        }\n    }\n\n    pc.sortDimensionsByRowData = function(rowdata) {\n        let copy = __.dimensions;\n        let positionSortedKeys = keys(__.dimensions).sort(function(a, b) {\n            let pixelDifference = __.dimensions[a].yscale(rowdata[a]) - __.dimensions[b].yscale(rowdata[b]);\n\n            // Array.sort is not necessarily stable, this means that if pixelDifference is zero\n            // the ordering of dimensions might change unexpectedly. This is solved by sorting on\n            // variable name in that case.\n            if (pixelDifference === 0) {\n                return a.localeCompare(b);\n            } // else\n            return pixelDifference;\n        });\n        __.dimensions = {};\n        positionSortedKeys.forEach(function(p, i){\n            __.dimensions[p] = copy[p];\n            __.dimensions[p].index = i;\n        });\n    }\n\n    pc.sortDimensions = function() {\n        let copy = __.dimensions;\n        let positionSortedKeys = keys(__.dimensions).sort(function(a, b) {\n            if (position(a) - position(b) === 0) {\n                return 1;\n            } else {\n                return position(a) - position(b);\n            }\n        });\n        __.dimensions = {};\n        positionSortedKeys.forEach(function(p, i){\n            __.dimensions[p] = copy[p];\n            __.dimensions[p].index = i;\n        })\n    };\n\n// pairs of adjacent dimensions\n    pc.adjacent_pairs = function(arr) {\n        let ret = [];\n        for (let i = 0; i < arr.length-1; i++) {\n            ret.push([arr[i],arr[i+1]]);\n        };\n        return ret;\n    };\n\n    let brush = {\n        modes: {\n            \"None\": {\n                install: function(pc) {},            // Nothing to be done.\n                uninstall: function(pc) {},          // Nothing to be done.\n                selected: function() { return []; }, // Nothing to return\n                brushState: function() { return {}; }\n            }\n        },\n        mode: \"None\",\n        predicate: \"AND\",\n        currentMode: function() {\n            return this.modes[this.mode];\n        }\n    };\n\n// This function can be used for 'live' updates of brushes. That is, during the\n// specification of a brush, this method can be called to update the view.\n//\n// @param newSelection - The new set of data items that is currently contained\n//                       by the brushes\n    function brushUpdated(newSelection) {\n        __.brushed = newSelection;\n        events.call('brush', pc,__.brushed);\n        pc.renderBrushed();\n    }\n\n    function brushPredicate(predicate) {\n        if (!arguments.length) { return brush.predicate; }\n\n        predicate = String(predicate).toUpperCase();\n        if (predicate !== \"AND\" && predicate !== \"OR\") {\n            throw new Error(\"Invalid predicate \" + predicate);\n        }\n\n        brush.predicate = predicate;\n        __.brushed = brush.currentMode().selected();\n        pc.renderBrushed();\n        return pc;\n    }\n\n    pc.brushModes = function() {\n        return Object.getOwnPropertyNames(brush.modes);\n    };\n\n    pc.brushMode = function(mode) {\n        if (arguments.length === 0) {\n            return brush.mode;\n        }\n\n        if (pc.brushModes().indexOf(mode) === -1) {\n            throw new Error(\"pc.brushmode: Unsupported brush mode: \" + mode);\n        }\n\n        // Make sure that we don't trigger unnecessary events by checking if the mode\n        // actually changes.\n        if (mode !== brush.mode) {\n            // When changing brush modes, the first thing we need to do is clearing any\n            // brushes from the current mode, if any.\n            if (brush.mode !== \"None\") {\n                pc.brushReset();\n            }\n\n            // Next, we need to 'uninstall' the current brushMode.\n            brush.modes[brush.mode].uninstall(pc);\n            // Finally, we can install the requested one.\n            brush.mode = mode;\n            brush.modes[brush.mode].install();\n            if (mode === \"None\") {\n                delete pc.brushPredicate;\n            } else {\n                pc.brushPredicate = brushPredicate;\n            }\n        }\n\n        return pc;\n    };\n\n    // brush mode: 1D-Axes\n    const install1DAxes = ()=> {\n        let brushes = {};\n        let brushNodes = {};\n\n        //https://github.com/d3/d3-brush/issues/10\n        function is_brushed(p) {\n            return brushSelection(brushNodes[p]) !== null;\n        }\n\n        // data within extents\n        function selected() {\n            let actives = keys(__.dimensions).filter(is_brushed),\n                extents = actives.map(function(p) {\n                    let _brushRange = brushSelection(brushNodes[p]);\n                    let _projected = [__.dimensions[p].yscale.invert(_brushRange[1]), __.dimensions[p].yscale.invert(_brushRange[0])];\n                    return _projected;\n                });\n            // We don't want to return the full data set when there are no axes brushed.\n            // Actually, when there are no axes brushed, by definition, no items are\n            // selected. So, let's avoid the filtering and just return false.\n            //if (actives.length === 0) return false;\n\n            // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n            if (actives.length === 0) return __.data;\n\n            // test if within range\n            let within = {\n                \"date\": function(d,p,dimension) {\n                    if (typeof __.dimensions[p].yscale.bandwidth === \"function\") { // if it is ordinal\n                        return extents[dimension][0] <= __.dimensions[p].yscale(d[p]) && __.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n                    } else {\n                        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1]\n                    }\n                },\n                \"number\": function(d,p,dimension) {\n                    if (typeof __.dimensions[p].yscale.bandwidth === \"function\") { // if it is ordinal\n                        return extents[dimension][0] <= __.dimensions[p].yscale(d[p]) && __.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n                    } else {\n                        return extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1]\n                    }\n                },\n                \"string\": function(d,p,dimension) {\n                    return extents[dimension][0] <= __.dimensions[p].yscale(d[p]) && __.dimensions[p].yscale(d[p]) <= extents[dimension][1]\n                }\n            };\n\n            return __.data\n                .filter(function(d) {\n                    switch(brush.predicate) {\n                        case \"AND\":\n                            return actives.every(function(p, dimension) {\n                                return within[__.dimensions[p].type](d,p,dimension);\n                            });\n                        case \"OR\":\n                            return actives.some(function(p, dimension) {\n                                return within[__.dimensions[p].type](d,p,dimension);\n                            });\n                        default:\n                            throw new Error(\"Unknown brush predicate \" + __.brushPredicate);\n                    }\n                });\n        };\n\n        function brushExtents(extents) {\n            if(typeof(extents) === 'undefined')\n            {\n                let extents = {};\n                keys(__.dimensions).forEach(function(d) {\n                    let brush = brushes[d];\n                    //todo: brush check\n                    if (brush !== undefined && brushSelection(brushNodes[d]) !== null) {\n                        let extent = brush.extent();\n                        extents[d] = extent;\n                    }\n                });\n                return extents;\n            }\n            else\n            {\n                //first get all the brush selections\n                let brushSelections = {};\n                g.selectAll('.brush')\n                    .each(function(d) {\n                        brushSelections[d] = select(this);\n\n                    });\n\n                // loop over each dimension and update appropriately (if it was passed in through extents)\n                keys(__.dimensions).forEach(function(d) {\n                    if (extents[d] === undefined){\n                        return;\n                    }\n\n                    let brush = brushes[d];\n                    if (brush !== undefined) {\n                        //update the extent\n                        brush.extent(extents[d]);\n\n                        //redraw the brush\n                        brushSelections[d]\n                            .transition()\n                            .duration(0)\n                            .call(brush);\n\n                        //fire some events\n                        brush.event(brushSelections[d]);\n                    }\n                });\n\n                //redraw the chart\n                pc.renderBrushed();\n\n                return pc;\n            }\n        }\n\n        function brushFor(axis, _selector) {\n            let _brush = brushY(_selector)\n                .extent([[-15, 0], [15, __.dimensions[axis].yscale.range()[0]]]);\n\n            _brush\n                .on(\"start\", function() {\n                    if(event.sourceEvent !== null) {\n                        events.call('brushstart', pc, __.brushed);\n                        event.sourceEvent.stopPropagation();\n                    }\n                })\n                .on(\"brush\", function() {\n                    brushUpdated(selected());\n                })\n                .on(\"end\", function() {\n                    events.call('brushend', pc, __.brushed);\n                });\n\n            brushes[axis] = _brush;\n            brushNodes[axis] = _selector.node();\n            return _brush;\n        };\n\n        function brushReset(dimension) {\n            if (dimension===undefined) {\n                __.brushed = false;\n                if (g) {\n                    g.selectAll('.brush')\n                        .each(function(d) {\n                            select(this)\n                                .call(brushes[d].move, null);\n                        });\n                    pc.renderBrushed();\n                }\n            }\n            else {\n                if (g) {\n                    g.selectAll('.brush')\n                        .each(function(d) {\n                            if (d!=dimension) return;\n                            select(this)\n                                .call(brushes[d].move, null);\n                            brushes[d].event(select(this));\n                        });\n                    pc.renderBrushed();\n                }\n            }\n            return this;\n        };\n\n        function install() {\n            if (!g) pc.createAxes();\n            // Add and store a brush for each axis.\n            let brush = g.append(\"svg:g\")\n                .attr(\"class\", \"brush\")\n                .each(function(d) {\n                    select(this).call(brushFor(d, select(this)));\n                })\n            brush.selectAll(\"rect\")\n                .style(\"visibility\", null)\n                .attr(\"x\", -15)\n                .attr(\"width\", 30);\n\n            brush.selectAll(\"rect.background\")\n                .style(\"fill\", \"transparent\");\n\n            brush.selectAll(\"rect.extent\")\n                .style(\"fill\", \"rgba(255,255,255,0.25)\")\n                .style(\"stroke\", \"rgba(0,0,0,0.6)\");\n\n            brush.selectAll(\".resize rect\")\n                .style(\"fill\", \"rgba(0,0,0,0.1)\");\n\n            pc.brushExtents = brushExtents;\n            pc.brushReset = brushReset;\n            return pc;\n        };\n\n        brush.modes[\"1D-axes\"] = {\n            install: install,\n            uninstall: function() {\n                g.selectAll(\".brush\").remove();\n                brushes = {};\n                delete pc.brushExtents;\n                delete pc.brushReset;\n            },\n            selected: selected,\n            brushState: brushExtents\n        }\n    }\n\n    // brush mode: 2D-strums\n    // bl.ocks.org/syntagmatic/5441022\n    const install2DStrums = ()=> {\n        let strums = {},\n            strumRect;\n\n        function drawStrum(strum, activePoint) {\n            let _svg = pc.selection.select(\"svg\").select(\"g#strums\"),\n                id = strum.dims.i,\n                points = [strum.p1, strum.p2],\n                _line = _svg.selectAll(\"line#strum-\" + id).data([strum]),\n                circles = _svg.selectAll(\"circle#strum-\" + id).data(points),\n                _drag = drag();\n\n            _line.enter()\n                .append(\"line\")\n                .attr(\"id\", \"strum-\" + id)\n                .attr(\"class\", \"strum\");\n\n            _line\n                .attr(\"x1\", function(d) {\n                    return d.p1[0]; })\n                .attr(\"y1\", function(d) {\n                    return d.p1[1]; })\n                .attr(\"x2\", function(d) {\n                    return d.p2[0]; })\n                .attr(\"y2\", function(d) {\n                    return d.p2[1]; })\n                .attr(\"stroke\", \"black\")\n                .attr(\"stroke-width\", 2);\n\n            _drag\n                .on(\"drag\", function(d, i) {\n                    let ev = event;\n                    i = i + 1;\n                    strum[\"p\" + i][0] = Math.min(Math.max(strum.minX + 1, ev.x), strum.maxX);\n                    strum[\"p\" + i][1] = Math.min(Math.max(strum.minY, ev.y), strum.maxY);\n                    drawStrum(strum, i - 1);\n                })\n                .on(\"end\", onDragEnd());\n\n            circles.enter()\n                .append(\"circle\")\n                .attr(\"id\", \"strum-\" + id)\n                .attr(\"class\", \"strum\");\n\n            circles\n                .attr(\"cx\", function(d) { return d[0]; })\n                .attr(\"cy\", function(d) { return d[1]; })\n                .attr(\"r\", 5)\n                .style(\"opacity\", function(d, i) {\n                    return (activePoint !== undefined && i === activePoint) ? 0.8 : 0;\n                })\n                .on(\"mouseover\", function() {\n                    select(this).style(\"opacity\", 0.8);\n                })\n                .on(\"mouseout\", function() {\n                    select(this).style(\"opacity\", 0);\n                })\n                .call(_drag);\n        }\n\n        function dimensionsForPoint(p) {\n            let dims = { i: -1, left: undefined, right: undefined };\n            keys(__.dimensions).some(function(dim, i) {\n                if (xscale(dim) < p[0]) {\n                    let next = keys(__.dimensions)[pc.getOrderedDimensionKeys().indexOf(dim)+1];\n                    dims.i = i;\n                    dims.left = dim;\n                    dims.right = next;\n                    return false;\n                }\n                return true;\n            });\n\n            if (dims.left === undefined) {\n                // Event on the left side of the first axis.\n                dims.i = 0;\n                dims.left = pc.getOrderedDimensionKeys()[0];\n                dims.right = pc.getOrderedDimensionKeys()[1];\n            } else if (dims.right === undefined) {\n                // Event on the right side of the last axis\n                dims.i = keys(__.dimensions).length - 1;\n                dims.right = dims.left;\n                dims.left = pc.getOrderedDimensionKeys()[keys(__.dimensions).length - 2];\n            }\n\n            return dims;\n        }\n\n        function onDragStart() {\n            // First we need to determine between which two axes the sturm was started.\n            // This will determine the freedom of movement, because a strum can\n            // logically only happen between two axes, so no movement outside these axes\n            // should be allowed.\n            return function() {\n                let p = mouse(strumRect.node()),\n                    dims,\n                    strum;\n\n                p[0] = p[0] - __.margin.left;\n                p[1] = p[1] - __.margin.top;\n\n                dims = dimensionsForPoint(p),\n                    strum = {\n                        p1: p,\n                        dims: dims,\n                        minX: xscale(dims.left),\n                        maxX: xscale(dims.right),\n                        minY: 0,\n                        maxY: h()\n                    };\n\n                strums[dims.i] = strum;\n                strums.active = dims.i;\n\n                // Make sure that the point is within the bounds\n                strum.p1[0] = Math.min(Math.max(strum.minX, p[0]), strum.maxX);\n                strum.p2 = strum.p1.slice();\n            };\n        }\n\n        function onDrag() {\n            return function() {\n                let ev = event,\n                    strum = strums[strums.active];\n\n                // Make sure that the point is within the bounds\n                strum.p2[0] = Math.min(Math.max(strum.minX + 1, ev.x - __.margin.left), strum.maxX);\n                strum.p2[1] = Math.min(Math.max(strum.minY, ev.y - __.margin.top), strum.maxY);\n                drawStrum(strum, 1);\n            };\n        }\n\n        function containmentTest(strum, width) {\n            let p1 = [strum.p1[0] - strum.minX, strum.p1[1] - strum.minX],\n                p2 = [strum.p2[0] - strum.minX, strum.p2[1] - strum.minX],\n                m1 = 1 - width / p1[0],\n                b1 = p1[1] * (1 - m1),\n                m2 = 1 - width / p2[0],\n                b2 = p2[1] * (1 - m2);\n\n            // test if point falls between lines\n            return function(p) {\n                let x = p[0],\n                    y = p[1],\n                    y1 = m1 * x + b1,\n                    y2 = m2 * x + b2;\n\n                if (y > Math.min(y1, y2) && y < Math.max(y1, y2)) {\n                    return true;\n                }\n\n                return false;\n            };\n        }\n\n        function selected() {\n            let ids = Object.getOwnPropertyNames(strums),\n                brushed = __.data;\n\n            // Get the ids of the currently active strums.\n            ids = ids.filter(function(d) {\n                return !isNaN(d);\n            });\n\n            function crossesStrum(d, id) {\n                let strum = strums[id],\n                    test = containmentTest(strum, strums.width(id)),\n                    d1 = strum.dims.left,\n                    d2 = strum.dims.right,\n                    y1 = __.dimensions[d1].yscale,\n                    y2 = __.dimensions[d2].yscale,\n                    point = [y1(d[d1]) - strum.minX, y2(d[d2]) - strum.minX];\n                return test(point);\n            }\n\n            if (ids.length === 0) { return brushed; }\n\n            return brushed.filter(function(d) {\n                switch(brush.predicate) {\n                    case \"AND\":\n                        return ids.every(function(id) { return crossesStrum(d, id); });\n                    case \"OR\":\n                        return ids.some(function(id) { return crossesStrum(d, id); });\n                    default:\n                        throw new Error(\"Unknown brush predicate \" + __.brushPredicate);\n                }\n            });\n        }\n\n        function removeStrum() {\n            let strum = strums[strums.active],\n                svg = pc.selection.select(\"svg\").select(\"g#strums\");\n\n            delete strums[strums.active];\n            strums.active = undefined;\n            svg.selectAll(\"line#strum-\" + strum.dims.i).remove();\n            svg.selectAll(\"circle#strum-\" + strum.dims.i).remove();\n        }\n\n        function onDragEnd() {\n            return function() {\n                let brushed = __.data,\n                    strum = strums[strums.active];\n\n                // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n                // considered a drag without move. So we have to deal with that case\n                if (strum && strum.p1[0] === strum.p2[0] && strum.p1[1] === strum.p2[1]) {\n                    removeStrum(strums);\n                }\n\n                brushed = selected(strums);\n                strums.active = undefined;\n                __.brushed = brushed;\n                pc.renderBrushed();\n                events.call('brushend', pc, __.brushed);\n            };\n        }\n\n        function brushReset(strums) {\n            return function() {\n                let ids = Object.getOwnPropertyNames(strums).filter(function(d) {\n                    return !isNaN(d);\n                });\n\n                ids.forEach(function(d) {\n                    strums.active = d;\n                    removeStrum(strums);\n                });\n                onDragEnd(strums)();\n            };\n        }\n\n        function install() {\n            if (!g) pc.createAxes();\n            \n            let _drag = drag();\n\n            // Map of current strums. Strums are stored per segment of the PC. A segment,\n            // being the area between two axes. The left most area is indexed at 0.\n            strums.active = undefined;\n            // Returns the width of the PC segment where currently a strum is being\n            // placed. NOTE: even though they are evenly spaced in our current\n            // implementation, we keep for when non-even spaced segments are supported as\n            // well.\n            strums.width = function(id) {\n                let strum = strums[id];\n\n                if (strum === undefined) {\n                    return undefined;\n                }\n\n                return strum.maxX - strum.minX;\n            };\n\n            pc.on(\"axesreorder.strums\", function() {\n                let ids = Object.getOwnPropertyNames(strums).filter(function(d) {\n                    return !isNaN(d);\n                });\n\n                // Checks if the first dimension is directly left of the second dimension.\n                function consecutive(first, second) {\n                    let length = keys(__.dimensions).length;\n                    return keys(__.dimensions).some(function(d, i) {\n                        return (d === first)\n                            ? i + i < length && __.dimensions[i + 1] === second\n                            : false;\n                    });\n                }\n\n                if (ids.length > 0) { // We have some strums, which might need to be removed.\n                    ids.forEach(function(d) {\n                        let dims = strums[d].dims;\n                        strums.active = d;\n                        // If the two dimensions of the current strum are not next to each other\n                        // any more, than we'll need to remove the strum. Otherwise we keep it.\n                        if (!consecutive(dims.left, dims.right)) {\n                            removeStrum(strums);\n                        }\n                    });\n                    onDragEnd(strums)();\n                }\n            });\n\n            // Add a new svg group in which we draw the strums.\n            pc.selection.select(\"svg\").append(\"g\")\n                .attr(\"id\", \"strums\")\n                .attr(\"transform\", \"translate(\" + __.margin.left + \",\" + __.margin.top + \")\");\n\n            // Install the required brushReset function\n            pc.brushReset = brushReset(strums);\n\n            _drag\n                .on(\"start\", onDragStart(strums))\n                .on(\"drag\", onDrag(strums))\n                .on(\"end\", onDragEnd(strums));\n\n            // NOTE: The styling needs to be done here and not in the css. This is because\n            //       for 1D brushing, the canvas layers should not listen to\n            //       pointer-events._.\n            strumRect = pc.selection.select(\"svg\").insert(\"rect\", \"g#strums\")\n                .attr(\"id\", \"strum-events\")\n                .attr(\"x\", __.margin.left)\n                .attr(\"y\", __.margin.top)\n                .attr(\"width\", w())\n                .attr(\"height\", h() + 2)\n                .style(\"opacity\", 0)\n                .call(_drag);\n        }\n\n        brush.modes[\"2D-strums\"] = {\n            install: install,\n            uninstall: function() {\n                pc.selection.select(\"svg\").select(\"g#strums\").remove();\n                pc.selection.select(\"svg\").select(\"rect#strum-events\").remove();\n                pc.on(\"axesreorder.strums\", undefined);\n                delete pc.brushReset;\n\n                strumRect = undefined;\n            },\n            selected: selected,\n            brushState: function () { return strums; }\n        };\n\n    }\n\n\n// brush mode: angular\n// code based on 2D.strums.js\n\n    const installAngularBrush = ()=> {\n        let arcs = {},\n            strumRect;\n\n        function drawStrum(arc, activePoint) {\n            let svg = pc.selection.select(\"svg\").select(\"g#arcs\"),\n                id = arc.dims.i,\n                points = [arc.p2, arc.p3],\n                _line = svg.selectAll(\"line#arc-\" + id).data([{p1:arc.p1,p2:arc.p2},{p1:arc.p1,p2:arc.p3}]),\n                circles = svg.selectAll(\"circle#arc-\" + id).data(points),\n                _drag = drag(),\n                _path = svg.selectAll(\"path#arc-\" + id).data([arc]);\n\n            _path.enter()\n                .append(\"path\")\n                .attr(\"id\", \"arc-\" + id)\n                .attr(\"class\", \"arc\")\n                .style(\"fill\", \"orange\")\n                .style(\"opacity\", 0.5);\n\n            _path\n                .attr(\"d\", arc.arc)\n                .attr(\"transform\", \"translate(\" + arc.p1[0] + \",\" + arc.p1[1] + \")\");\n\n            _line.enter()\n                .append(\"line\")\n                .attr(\"id\", \"arc-\" + id)\n                .attr(\"class\", \"arc\");\n\n            _line\n                .attr(\"x1\", function(d) { return d.p1[0]; })\n                .attr(\"y1\", function(d) { return d.p1[1]; })\n                .attr(\"x2\", function(d) { return d.p2[0]; })\n                .attr(\"y2\", function(d) { return d.p2[1]; })\n                .attr(\"stroke\", \"black\")\n                .attr(\"stroke-width\", 2);\n\n            _drag\n                .on(\"drag\", function(d, i) {\n                    let ev = event,\n                        angle = 0;\n\n                    i = i + 2;\n\n                    arc[\"p\" + i][0] = Math.min(Math.max(arc.minX + 1, ev.x), arc.maxX);\n                    arc[\"p\" + i][1] = Math.min(Math.max(arc.minY, ev.y), arc.maxY);\n\n                    angle = i === 3 ? arcs.startAngle(id) : arcs.endAngle(id);\n\n                    if ((arc.startAngle < Math.PI && arc.endAngle < Math.PI && angle < Math.PI) ||\n                        (arc.startAngle >= Math.PI && arc.endAngle >= Math.PI && angle >= Math.PI)) {\n\n                        if (i === 2) {\n                            arc.endAngle = angle;\n                            arc.arc.endAngle(angle);\n                        } else if (i === 3) {\n                            arc.startAngle = angle;\n                            arc.arc.startAngle(angle);\n                        }\n\n                    }\n\n                    drawStrum(arc, i - 2);\n                })\n                .on(\"end\", onDragEnd());\n\n            circles.enter()\n                .append(\"circle\")\n                .attr(\"id\", \"arc-\" + id)\n                .attr(\"class\", \"arc\");\n\n            circles\n                .attr(\"cx\", function(d) { return d[0]; })\n                .attr(\"cy\", function(d) { return d[1]; })\n                .attr(\"r\", 5)\n                .style(\"opacity\", function(d, i) {\n                    return (activePoint !== undefined && i === activePoint) ? 0.8 : 0;\n                })\n                .on(\"mouseover\", function() {\n                    select(this).style(\"opacity\", 0.8);\n                })\n                .on(\"mouseout\", function() {\n                    select(this).style(\"opacity\", 0);\n                })\n                .call(_drag);\n        }\n\n        function dimensionsForPoint(p) {\n            let dims = { i: -1, left: undefined, right: undefined };\n            keys(__.dimensions).some(function(dim, i) {\n                if (xscale(dim) < p[0]) {\n                    let next = keys(__.dimensions)[pc.getOrderedDimensionKeys().indexOf(dim)+1];\n                    dims.i = i;\n                    dims.left = dim;\n                    dims.right = next;\n                    return false;\n                }\n                return true;\n            });\n\n            if (dims.left === undefined) {\n                // Event on the left side of the first axis.\n                dims.i = 0;\n                dims.left = pc.getOrderedDimensionKeys()[0];\n                dims.right = pc.getOrderedDimensionKeys()[1];\n            } else if (dims.right === undefined) {\n                // Event on the right side of the last axis\n                dims.i = keys(__.dimensions).length - 1;\n                dims.right = dims.left;\n                dims.left = pc.getOrderedDimensionKeys()[keys(__.dimensions).length - 2];\n            }\n\n            return dims;\n        }\n\n        function onDragStart() {\n            // First we need to determine between which two axes the arc was started.\n            // This will determine the freedom of movement, because a arc can\n            // logically only happen between two axes, so no movement outside these axes\n            // should be allowed.\n            return function() {\n                let p = mouse(strumRect.node()),\n                    dims,\n                    arc;\n\n                p[0] = p[0] - __.margin.left;\n                p[1] = p[1] - __.margin.top;\n\n                dims = dimensionsForPoint(p),\n                    arc = {\n                        p1: p,\n                        dims: dims,\n                        minX: xscale(dims.left),\n                        maxX: xscale(dims.right),\n                        minY: 0,\n                        maxY: h(),\n                        startAngle: undefined,\n                        endAngle: undefined,\n                        arc: d3Arc().innerRadius(0)\n                    };\n\n                arcs[dims.i] = arc;\n                arcs.active = dims.i;\n\n                // Make sure that the point is within the bounds\n                arc.p1[0] = Math.min(Math.max(arc.minX, p[0]), arc.maxX);\n                arc.p2 = arc.p1.slice();\n                arc.p3 = arc.p1.slice();\n            };\n        }\n\n        function onDrag() {\n            return function() {\n                let ev = event,\n                    arc = arcs[arcs.active];\n\n                // Make sure that the point is within the bounds\n                arc.p2[0] = Math.min(Math.max(arc.minX + 1, ev.x - __.margin.left), arc.maxX);\n                arc.p2[1] = Math.min(Math.max(arc.minY, ev.y - __.margin.top), arc.maxY);\n                arc.p3 = arc.p2.slice();\n                // console.log(arcs.angle(arcs.active));\n                // console.log(signedAngle(arcs.unsignedAngle(arcs.active)));\n                drawStrum(arc, 1);\n            };\n        }\n\n        // some helper functions\n        function hypothenuse(a, b) {\n            return Math.sqrt(a*a + b*b);\n        }\n\n        let rad = (function() {\n            let c = Math.PI / 180;\n            return function(angle) {\n                return angle * c;\n            };\n        })();\n\n        let deg = (function() {\n            let c = 180 / Math.PI;\n            return function(angle) {\n                return angle * c;\n            };\n        })();\n\n        // [0, 2*PI] -> [-PI/2, PI/2]\n        let signedAngle = function(angle) {\n            let ret = angle;\n            if (angle > Math.PI) {\n                ret = angle - 1.5 * Math.PI;\n                ret = angle - 1.5 * Math.PI;\n            } else {\n                ret = angle - 0.5 * Math.PI;\n                ret = angle - 0.5 * Math.PI;\n            }\n            return -ret;\n        }\n\n        /**\n         * angles are stored in radians from in [0, 2*PI], where 0 in 12 o'clock.\n         * However, one can only select lines from 0 to PI, so we compute the\n         * 'signed' angle, where 0 is the horizontal line (3 o'clock), and +/- PI/2\n         * are 12 and 6 o'clock respectively.\n         */\n        function containmentTest(arc) {\n            let startAngle = signedAngle(arc.startAngle);\n            let endAngle = signedAngle(arc.endAngle);\n\n            if (startAngle > endAngle) {\n                let tmp = startAngle;\n                startAngle = endAngle;\n                endAngle = tmp;\n            }\n\n            // test if segment angle is contained in angle interval\n            return function(a) {\n\n                if (a >= startAngle && a <= endAngle) {\n                    return true;\n                }\n\n                return false;\n            };\n        }\n\n        function selected() {\n            let ids = Object.getOwnPropertyNames(arcs),\n                brushed = __.data;\n\n            // Get the ids of the currently active arcs.\n            ids = ids.filter(function(d) {\n                return !isNaN(d);\n            });\n\n            function crossesStrum(d, id) {\n                let arc = arcs[id],\n                    test = containmentTest(arc),\n                    d1 = arc.dims.left,\n                    d2 = arc.dims.right,\n                    y1 = __.dimensions[d1].yscale,\n                    y2 = __.dimensions[d2].yscale,\n                    a = arcs.width(id),\n                    b = y1(d[d1]) - y2(d[d2]),\n                    c = hypothenuse(a, b),\n                    angle = Math.asin(b/c); // rad in [-PI/2, PI/2]\n                return test(angle);\n            }\n\n            if (ids.length === 0) { return brushed; }\n\n            return brushed.filter(function(d) {\n                switch(brush.predicate) {\n                    case \"AND\":\n                        return ids.every(function(id) { return crossesStrum(d, id); });\n                    case \"OR\":\n                        return ids.some(function(id) { return crossesStrum(d, id); });\n                    default:\n                        throw new Error(\"Unknown brush predicate \" + __.brushPredicate);\n                }\n            });\n        }\n\n        function removeStrum() {\n            let arc = arcs[arcs.active],\n                svg = pc.selection.select(\"svg\").select(\"g#arcs\");\n\n            delete arcs[arcs.active];\n            arcs.active = undefined;\n            svg.selectAll(\"line#arc-\" + arc.dims.i).remove();\n            svg.selectAll(\"circle#arc-\" + arc.dims.i).remove();\n            svg.selectAll(\"path#arc-\" + arc.dims.i).remove();\n        }\n\n        function onDragEnd() {\n            return function() {\n                let brushed = __.data,\n                    arc = arcs[arcs.active];\n\n                // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n                // considered a drag without move. So we have to deal with that case\n                if (arc && arc.p1[0] === arc.p2[0] && arc.p1[1] === arc.p2[1]) {\n                    removeStrum(arcs);\n                }\n\n                if (arc) {\n                    let angle = arcs.startAngle(arcs.active);\n\n                    arc.startAngle = angle;\n                    arc.endAngle = angle;\n                    arc.arc\n                        .outerRadius(arcs.length(arcs.active))\n                        .startAngle(angle)\n                        .endAngle(angle);\n                }\n\n\n                brushed = selected(arcs);\n                arcs.active = undefined;\n                __.brushed = brushed;\n                pc.renderBrushed();\n                events.call('brushend', pc, __.brushed);\n            };\n        }\n\n        function brushReset(arcs) {\n            return function() {\n                let ids = Object.getOwnPropertyNames(arcs).filter(function(d) {\n                    return !isNaN(d);\n                });\n\n                ids.forEach(function(d) {\n                    arcs.active = d;\n                    removeStrum(arcs);\n                });\n                onDragEnd(arcs)();\n            };\n        }\n\n        function install() {\n            if (!g) pc.createAxes();\n\n            let _drag = drag();\n\n            // Map of current arcs. arcs are stored per segment of the PC. A segment,\n            // being the area between two axes. The left most area is indexed at 0.\n            arcs.active = undefined;\n            // Returns the width of the PC segment where currently a arc is being\n            // placed. NOTE: even though they are evenly spaced in our current\n            // implementation, we keep for when non-even spaced segments are supported as\n            // well.\n            arcs.width = function(id) {\n                let arc = arcs[id];\n\n                if (arc === undefined) {\n                    return undefined;\n                }\n\n                return arc.maxX - arc.minX;\n            };\n\n            // returns angles in [-PI/2, PI/2]\n            let angle = function(p1, p2) {\n                let a = p1[0] - p2[0],\n                    b = p1[1] - p2[1],\n                    c = hypothenuse(a, b);\n\n                return Math.asin(b/c);\n            }\n\n            // returns angles in [0, 2 * PI]\n            arcs.endAngle = function(id) {\n                let arc = arcs[id];\n                if (arc === undefined) {\n                    return undefined;\n                }\n                let sAngle = angle(arc.p1, arc.p2),\n                    uAngle = -sAngle + Math.PI / 2;\n\n                if (arc.p1[0] > arc.p2[0]) {\n                    uAngle = 2 * Math.PI - uAngle;\n                }\n\n                return uAngle;\n            }\n\n            arcs.startAngle = function(id) {\n                let arc = arcs[id];\n                if (arc === undefined) {\n                    return undefined;\n                }\n\n                let sAngle = angle(arc.p1, arc.p3),\n                    uAngle = -sAngle + Math.PI / 2;\n\n                if (arc.p1[0] > arc.p3[0]) {\n                    uAngle = 2 * Math.PI - uAngle;\n                }\n\n                return uAngle;\n            }\n\n            arcs.length = function(id) {\n                let arc = arcs[id];\n\n                if (arc === undefined) {\n                    return undefined;\n                }\n\n                let a = arc.p1[0] - arc.p2[0],\n                    b = arc.p1[1] - arc.p2[1],\n                    c = hypothenuse(a, b);\n\n                return(c);\n            }\n\n            pc.on(\"axesreorder.arcs\", function() {\n                let ids = Object.getOwnPropertyNames(arcs).filter(function(d) {\n                    return !isNaN(d);\n                });\n\n                // Checks if the first dimension is directly left of the second dimension.\n                function consecutive(first, second) {\n                    let length = keys(__.dimensions).length;\n                    return keys(__.dimensions).some(function(d, i) {\n                        return (d === first)\n                            ? i + i < length && __.dimensions[i + 1] === second\n                            : false;\n                    });\n                }\n\n                if (ids.length > 0) { // We have some arcs, which might need to be removed.\n                    ids.forEach(function(d) {\n                        let dims = arcs[d].dims;\n                        arcs.active = d;\n                        // If the two dimensions of the current arc are not next to each other\n                        // any more, than we'll need to remove the arc. Otherwise we keep it.\n                        if (!consecutive(dims.left, dims.right)) {\n                            removeStrum(arcs);\n                        }\n                    });\n                    onDragEnd(arcs)();\n                }\n            });\n\n            // Add a new svg group in which we draw the arcs.\n            pc.selection.select(\"svg\").append(\"g\")\n                .attr(\"id\", \"arcs\")\n                .attr(\"transform\", \"translate(\" + __.margin.left + \",\" + __.margin.top + \")\");\n\n            // Install the required brushReset function\n            pc.brushReset = brushReset(arcs);\n\n            _drag\n                .on(\"start\", onDragStart(arcs))\n                .on(\"drag\", onDrag(arcs))\n                .on(\"end\", onDragEnd(arcs));\n\n            // NOTE: The styling needs to be done here and not in the css. This is because\n            //       for 1D brushing, the canvas layers should not listen to\n            //       pointer-events._.\n            strumRect = pc.selection.select(\"svg\").insert(\"rect\", \"g#arcs\")\n                .attr(\"id\", \"arc-events\")\n                .attr(\"x\", __.margin.left)\n                .attr(\"y\", __.margin.top)\n                .attr(\"width\", w())\n                .attr(\"height\", h() + 2)\n                .style(\"opacity\", 0)\n                .call(_drag);\n        }\n\n        brush.modes[\"angular\"] = {\n            install: install,\n            uninstall: function() {\n                pc.selection.select(\"svg\").select(\"g#arcs\").remove();\n                pc.selection.select(\"svg\").select(\"rect#arc-events\").remove();\n                pc.on(\"axesreorder.arcs\", undefined);\n                delete pc.brushReset;\n\n                strumRect = undefined;\n            },\n            selected: selected,\n            brushState: function () { return arcs; }\n        };\n\n    };\n\n    pc.interactive = function() {\n        flags.interactive = true;\n        return this;\n    };\n\n// expose a few objects\n    pc.xscale = xscale;\n    pc.ctx = ctx;\n    pc.canvas = canvas;\n    pc.g = function() { return g; };\n\n// rescale for height, width and margins\n// TODO currently assumes chart is brushable, and destroys old brushes\n    pc.resize = function() {\n        // selection size\n        pc.selection.select(\"svg\")\n            .attr(\"width\", __.width)\n            .attr(\"height\", __.height)\n        pc.svg.attr(\"transform\", \"translate(\" + __.margin.left + \",\" + __.margin.top + \")\");\n\n        // FIXME: the current brush state should pass through\n        if (flags.brushable) pc.brushReset();\n\n        // scales\n        pc.autoscale();\n\n        // axes, destroys old brushes.\n        if (g) pc.createAxes();\n        if (flags.brushable) pc.brushable();\n        if (flags.reorderable) pc.reorderable();\n\n        events.call('resize', this, {width: __.width, height: __.height, margin: __.margin});\n        return this;\n    };\n\n// highlight an array of data\n    pc.highlight = function(data) {\n        if (arguments.length === 0) {\n            return __.highlighted;\n        }\n\n        __.highlighted = data;\n        pc.clear(\"highlight\");\n        selectAll([canvas.foreground, canvas.brushed]).classed(\"faded\", true);\n        data.forEach(path_highlight);\n        events.call('highlight', this, data);\n        return this;\n    };\n\n// clear highlighting\n    pc.unhighlight = function() {\n        __.highlighted = [];\n        pc.clear(\"highlight\");\n        selectAll([canvas.foreground, canvas.brushed]).classed(\"faded\", false);\n        return this;\n    };\n\n// calculate 2d intersection of line a->b with line c->d\n// points are objects with x and y properties\n    pc.intersection =  function(a, b, c, d) {\n        return {\n            x: ((a.x * b.y - a.y * b.x) * (c.x - d.x) - (a.x - b.x) * (c.x * d.y - c.y * d.x)) / ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n            y: ((a.x * b.y - a.y * b.x) * (c.y - d.y) - (a.y - b.y) * (c.x * d.y - c.y * d.x)) / ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x))\n        };\n    };\n\n    function position(d) {\n        if (xscale.range().length === 0) {\n            xscale.range([0, w()], 1);\n        }\n        let v = dragging[d];\n        return v == null ? xscale(d) : v;\n    }\n\n// Merges the canvases and SVG elements into one canvas element which is then passed into the callback\n// (so you can choose to save it to disk, etc.)\n    pc.mergeParcoords = function(callback) {\n        // Retina display, etc.\n        let devicePixelRatio = window.devicePixelRatio || 1;\n\n        // Create a canvas element to store the merged canvases\n        let mergedCanvas = document.createElement(\"canvas\");\n        mergedCanvas.width = pc.canvas.foreground.clientWidth * devicePixelRatio\n        mergedCanvas.height = (pc.canvas.foreground.clientHeight + 30) * devicePixelRatio;\n        mergedCanvas.style.width = mergedCanvas.width / devicePixelRatio + \"px\";\n        mergedCanvas.style.height = mergedCanvas.height / devicePixelRatio + \"px\";\n\n        // Give the canvas a white background\n        let context = mergedCanvas.getContext(\"2d\");\n        context.fillStyle = \"#ffffff\";\n        context.fillRect(0, 0, mergedCanvas.width, mergedCanvas.height);\n\n        // Merge all the canvases\n        for (let key in pc.canvas) {\n            context.drawImage(pc.canvas[key], 0, 24 * devicePixelRatio, mergedCanvas.width, mergedCanvas.height - 30 * devicePixelRatio);\n        }\n\n        // Add SVG elements to canvas\n        let DOMURL = window.URL || window.webkitURL || window;\n        let serializer = new XMLSerializer();\n        let svgStr = serializer.serializeToString(pc.selection.select(\"svg\").node());\n\n        // Create a Data URI.\n        let src = 'data:image/svg+xml;base64,' + window.btoa(svgStr);\n        let img = new Image();\n        img.onload = function () {\n            context.drawImage(img, 0, 0, img.width * devicePixelRatio, img.height * devicePixelRatio);\n            if (typeof callback === \"function\") {\n                callback(mergedCanvas);\n            }\n        };\n        img.src = src;\n    }\n\n    install1DAxes();\n    install2DStrums();\n    installAngularBrush();\n\n    pc.version = \"0.7.0\";\n    // this descriptive text should live with other introspective methods\n    pc.toString = function() { return \"Parallel Coordinates: \" + keys(__.dimensions).length + \" dimensions (\" + keys(__.data[0]).length + \" total) , \" + __.data.length + \" rows\"; };\n\n    return pc;\n};\n\n\n\nexport default ParCoords;"],"names":["renderQueue","func","_queue","rq","data","render","valid","invalidate","doFrame","chunk","splice","_rate","map","slice","add","concat","rate","value","arguments","length","remaining","clear","_invalidate","extend","target","source","key","without","arr","items","forEach","el","d3_rebind","method","apply","_rebind","_functor","v","ParCoords","config","__","top","right","bottom","left","dimensionTitles","warn","d","dimensions","title","pc","selection","select","width","node","clientWidth","height","clientHeight","layer","append","attr","canvas","getContext","svg","style","margin","eventTypes","keys","events","dispatch","w","h","flags","xscale","scalePoint","dragging","_line","line","axis","axisLeft","ticks","g","clusterCentroids","side_effects","on","foreground","globalCompositeOperation","brushed","globalAlpha","strokeStyle","resize","applyDimensionDefaults","domain","getOrderedDimensionKeys","sortDimensions","interactive","updateAxes","detectDimensions","autoscale","bundleDimension","hideAxis","compute_cluster_centroids","state","getset","obj","x","Object","prototype","toString","call","old","getRange","nullValueSeparator","nullValueSeparatorPadding","defaultScales","k","_extent","extent","getTime","range","flipAxes","includes","tempDate","val","unshift","scaleTime","scaleOrdinal","temp","scaleLinear","counts","p","undefined","getOwnPropertyNames","sort","tempArr","i","push","pop","categoricalRange","addBy","j","yscale","type","devicePixelRatio","window","selectAll","color","lineWidth","composite","alpha","scale","brushedColor","highlight","flip","reverse","commonScale","global","t","scales","filter","reduce","a","b","dims","types","detectDimensionTypes","newDims","currIndex","orient","innerTickSize","outerTickSize","tickPadding","index","y","ascending","toType","match","toLowerCase","toTypeCoerceNumbers","parseFloat","col","isNaN","Number","parseInt","mode","renderBrushed","isBrushed","object","brush","currentMode","brushState","hasOwnProperty","default","path_foreground","foregroundQueue","queue","path_brushed","brushedQueue","clusterCounts","row","scaled","has","set","count","get","_map","compute_centroids","centroids","cols","position","$V","cx","cy","leftCentroid","rightCentroid","centroid","bundlingStrength","compute_real_centroids","realCentroids","compute_control_points","smoothness","cps","e","mid","diff","subtract","shadows","alphaOnBrushed","axisDots","_r","r","ctx","marks","startAngle","endAngle","Math","PI","min","pow","beginPath","arc","stroke","fill","single_curve","moveTo","showControlPoints","fillRect","bezierCurveTo","color_path","getNullPosition","log","single_path","lineTo","path_highlight","clearRect","fillStyle","flipAxisAndUpdatePCP","dimension","brushReset","parentElement","transition","duration","animationTime","rotateLabels","delta","event","deltaY","dimensionTitleRotation","preventDefault","dimensionLabels","createAxes","removeAxes","enter","each","axisElement","applyAxisConfig","text","axes","remove","g_data","exit","brushable","reorderable","brushMode","axisCfg","axisRight","axisTop","axisBottom","tickValues","tickSizeInner","tickSizeOuter","tickFormat","brushY","sourceEvent","ctrlKey","html","nodes","outerHTML","replace","brushes","dat","__data__","brushSelection","parentNode","move","selected","brushesToKeep","actives","extents","ranges","values","ranger","invert","ii","dimRange","dimDomain","within","category","categoryIndex","indexOf","categoryRangeValue","every","multiBrushData","idx","filtered","z","drag","__origin__","max","dx","reorder","rowdata","firstDim","sortDimensionsByRowData","reordered","highlighted","unhighlight","copy","positionSortedKeys","pixelDifference","localeCompare","adjacent_pairs","ret","modes","brushUpdated","newSelection","brushPredicate","predicate","String","toUpperCase","Error","brushModes","uninstall","install","install1DAxes","brushNodes","is_brushed","_brushRange","_projected","bandwidth","some","brushExtents","brushSelections","brushFor","_selector","_brush","stopPropagation","install2DStrums","strums","strumRect","drawStrum","strum","activePoint","_svg","id","points","p1","p2","circles","_drag","ev","minX","maxX","minY","maxY","onDragEnd","dimensionsForPoint","dim","next","onDragStart","mouse","active","onDrag","containmentTest","m1","b1","m2","b2","y1","y2","ids","crossesStrum","test","d1","d2","point","removeStrum","consecutive","first","second","insert","installAngularBrush","arcs","p3","_path","angle","d3Arc","innerRadius","hypothenuse","sqrt","rad","c","deg","signedAngle","tmp","asin","outerRadius","sAngle","uAngle","classed","intersection","mergeParcoords","callback","mergedCanvas","document","createElement","context","drawImage","DOMURL","URL","webkitURL","serializer","XMLSerializer","svgStr","serializeToString","src","btoa","img","Image","onload","version"],"mappings":"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"}